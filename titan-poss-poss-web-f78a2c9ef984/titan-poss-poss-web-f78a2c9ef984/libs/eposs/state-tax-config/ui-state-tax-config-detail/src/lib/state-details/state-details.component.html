<div class="container-fluid">
  <form [formGroup]="stateDetailsForm" (ngSubmit)="onSubmit()">
    <div class="mt-4">
      <div class="row">
        <div class="col-lg-6">
          <div class="pw-form-card">
            <div class="row">
              <div class="col-auto pw-font-weight-bold">
                {{ 'pw.statetaxconfiguration.enterDetailsBelow' | translate }}
              </div>
              <div class="col-auto pw-detail-card__right-container">
                <mat-slide-toggle formControlName="isActive">
                  <span *ngIf="stateDetailsForm.get('isActive').value">
                    {{ 'pw.toggleButton.activeLabel' | translate }}
                  </span>
                  <span *ngIf="!stateDetailsForm.get('isActive').value">
                    {{ 'pw.toggleButton.inactiveLabel' | translate }}
                  </span>
                </mat-slide-toggle>
              </div>
            </div>
            <div class="row pw-detail-card__list">
              <div class="col-lg-12">
                <poss-web-select-dropdown
                  class="pw-mat-form-field"
                  placeholder="{{
                    'pw.statetaxconfiguration.stateName' | translate
                  }}"
                  [control]="stateDetailsForm.get('stateList')"
                  [options]="allStateListSelect"
                  [required]="true"
                >
                </poss-web-select-dropdown>
              </div>
            </div>
            <div class="row">
              <div class="col-6">
                <mat-form-field style="width: 100%">
                  <mat-label>{{
                    'pw.statetaxconfiguration.stateCode' | translate
                  }}</mat-label>
                  <input matInput formControlName="stateCode" />
                  <mat-error
                    *ngIf="
                      stateDetailsForm.get('stateCode').errors &&
                      stateDetailsForm.get('stateCode').errors.errorArray
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        stateDetailsForm.get('stateCode').errors.errorArray
                      "
                    >
                    </poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-6">
                <mat-form-field style="width: 100%">
                  <mat-label>{{
                    'pw.statetaxconfiguration.gstStateCode' | translate
                  }}</mat-label>
                  <input matInput formControlName="gstStateCode" />
                  <mat-error
                    *ngIf="
                      stateDetailsForm.get('gstStateCode').errors &&
                      stateDetailsForm.get('gstStateCode').errors.errorArray
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        stateDetailsForm.get('gstStateCode').errors.errorArray
                      "
                    >
                    </poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-lg-12">
                <poss-web-select-dropdown
                  class="pw-mat-form-field"
                  placeholder="{{
                    'pw.statetaxconfiguration.taxSystem' | translate
                  }}"
                  [control]="stateDetailsForm.get('taxSystemList')"
                  [options]="allTaxSystemListSelect"
                  [required]="true"
                >
                </poss-web-select-dropdown>
              </div>
            </div>
          </div>
          <div class="pw-form-card" formArrayName="CESS_Details">
            {{ 'pw.statetaxconfiguration.selectCESS' | translate }}
            <table  aria-describedby="table" class="pw-grid-table">
              <thead>
                <tr class="pw-grid-table__background-header">
                  <th class="pw-grid-table__header-item" scope="col">
                    {{ 'pw.statetaxconfiguration.cessName' | translate }}
                  </th>
                  <th class="pw-grid-table__header-item" scope="col">
                    {{ 'pw.statetaxconfiguration.isCessOnTax' | translate }}
                  </th>
                </tr>
              </thead>
              <tbody class="pw-grid-table__body">
                <tr
                  class="pw-grid-table__row"
                  *ngFor="let item of cessData; let rowIndex = index"
                  [formGroupName]="rowIndex"
                >
                  <td class="pw-grid-table__item">
                    <mat-checkbox formControlName="cessValues">
                      {{ cessData[rowIndex].cessCode }}
                    </mat-checkbox>
                  </td>
                  <td class="pw-grid-table__item">
                    <mat-slide-toggle
                      [labelPosition]="'before'"
                      formControlName="cessOnTax"
                    >
                      {{ cessData[rowIndex].cessOnTax ? 'Yes' : 'No' }}
                    </mat-slide-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="pw-text-right mb-3">
      <button class="pw-btn pw-accent-btn">
        {{ 'pw.statetaxconfiguration.save' | translate }}
      </button>
    </div>
  </form>
</div>
