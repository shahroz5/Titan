<div
  class="pw-confirmation-box"
  cdkDragBoundary=".cdk-overlay-container"
  cdkDragRootElement=".cdk-overlay-pane"
  cdkDrag
  cdkDragHandle
>
  <div class="row pw-confirmation-box__header">
    <div class="col-auto" *ngIf="!dialogData.mode">
      {{ 'pw.statetaxconfiguration.addTaxDetails' | translate }}
    </div>
    <div class="col-auto" *ngIf="dialogData.mode">
      {{ 'pw.statetaxconfiguration.editTaxDetails' | translate }}
    </div>
    <div class="col pw-text-right">
      <button
        mat-icon-button
        (click)="onClose()"
        class="pw-confirmation-box__icon-button"
      >
        <mat-icon>
          <span class="pw-i-24 pw-close-no-border-icon-24"></span>
        </mat-icon>
      </button>
    </div>
  </div>
  <form [formGroup]="taxDetailsForm" (ngSubmit)="onSubmit()">
    <div class="pw-confirmation-box__body">
      <div class="pw-header-left-list">
        <div class="row pw-header-left-list__row">
          <div class="col-7 pw-header-left-list__header">
            {{ 'pw.statetaxconfiguration.taxClass' | translate }}
          </div>
          <div class="col-5 pw-header-left-list__item">
            <mat-form-field
              class="pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
            >
              <mat-select
                formControlName="taxClass"
                [multiple]="dialogData.mode"
                [disabled]="this.dialogData.mode"
              >
                <mat-option
                  *ngFor="let taxClass of dialogData.allTaxClassList$ | async"
                  [value]="taxClass"
                >
                  {{ taxClass }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div formArrayName="taxComponentDetails">
          <!-- let item of dialogData.taxComponent$ | async; -->
          <div
            class="row pw-header-left-list__row"
            *ngFor="let control of getControls(); let rowIndex = index"
            [formGroupName]="rowIndex"
          >
            <div class="col-7 pw-header-left-list__header">
              {{ control.value.taxComponentName }}(%)
            </div>
            <div class="col-5 pw-header-left-list__item">
              <input type="hidden" formControlName="taxComponentName" />
              <mat-form-field
                appearance="outline"
                class="pw-full-bordered-input-box pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
              >
                <input
                  matInput
                  placeholder="0%"
                  formControlName="taxComponent"
                />

                <mat-error
                  *ngIf="
                    control.get('taxComponent').errors &&
                    control.get('taxComponent').errors.errorArray
                  "
                >
                  <poss-web-error-info-tooltip
                    [errorMessage]="
                      control.get('taxComponent').errors.errorArray
                    "
                  >
                  </poss-web-error-info-tooltip>
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="pw-text-right">
      <div class="row align-items-center">
        <div class="col-auto ml-auto">
          <button class="pw-btn pw-accent-btn">
            {{ 'pw.statetaxconfiguration.save' | translate }}
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
