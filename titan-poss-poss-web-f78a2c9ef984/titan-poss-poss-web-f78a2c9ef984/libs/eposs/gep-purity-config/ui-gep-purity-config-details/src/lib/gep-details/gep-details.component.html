<div class="pw-form-card" [formGroup]="gepDetailsFormGroup">
  <div class="row pw-form-card__border-bottom mt-2 pb-2">
    <mat-radio-group
      aria-label="Select an option"
      formControlName="gepPayment"
      class="col-auto row"
    >
      <mat-radio-button class="mr-3" class="col-auto" value="discount">
        {{
          'pw.gePurityConfiguration.GEPdeductionAmtToGivenAsdiscountLabel'
            | translate
        }}
      </mat-radio-button>
      <mat-radio-button class="col-auto" value="payment">
        {{ 'pw.gePurityConfiguration.gepExchangeAsPaymentLabel' | translate }}
      </mat-radio-button>
    </mat-radio-group>
  </div>

  <div class="row pw-form-card__border-bottom mt-2 pb-2">
    <div class="col-auto row">
      <mat-checkbox
        class="mr-3"
        class="col-auto"
        formControlName="isGepExchangeOfferAppicable"
        (change)="change($event)"
      >
        {{
          'pw.gePurityConfiguration.isGEPExchangeOfferApplicableLabel'
            | translate
        }}</mat-checkbox
      >
      <mat-checkbox class="col-auto" formControlName="isRivaah">
        {{ 'pw.gePurityConfiguration.isRivaah' | translate }}
      </mat-checkbox>
    </div>
  </div>

  <div class="row">
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.noOfForGEPCNLabel' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            [readonly]="isReadonly"
            formControlName="noOfDaysForGepCNAfterOffer"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('noOfDaysForGepCNAfterOffer').errors &&
              gepDetailsFormGroup.get('noOfDaysForGepCNAfterOffer').errors
                .errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('noOfDaysForGepCNAfterOffer').errors
                  .errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.noOfDaysForABLabel' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            [readonly]="isReadonly"
            formControlName="noOfDaysForGepCNAfterOfferForAB"
            autocomplete="off"
            matInput
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('noOfDaysForGepCNAfterOfferForAB')
                .errors &&
              gepDetailsFormGroup.get('noOfDaysForGepCNAfterOfferForAB').errors
                .errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('noOfDaysForGepCNAfterOfferForAB')
                  .errors.errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.rebillingLabel' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            [readonly]="isReadonly"
            formControlName="noOfDaysForRebillingAfterOffer"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('noOfDaysForRebillingAfterOffer')
                .errors &&
              gepDetailsFormGroup.get('noOfDaysForRebillingAfterOffer').errors
                .errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('noOfDaysForRebillingAfterOffer').errors
                  .errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.noOfDaysAfterCOLabel' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            [readonly]="isReadonly"
            formControlName="noOfDaysForGepAfterOfferForCO"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('noOfDaysForGepAfterOfferForCO').errors &&
              gepDetailsFormGroup.get('noOfDaysForGepAfterOfferForCO').errors
                .errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('noOfDaysForGepAfterOfferForCO').errors
                  .errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.gepCNUtilization' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            [readonly]="isReadonly"
            formControlName="GepCNUtilization"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('GepCNUtilization').errors &&
              gepDetailsFormGroup.get('GepCNUtilization').errors.errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('GepCNUtilization').errors.errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          {{ 'pw.gePurityConfiguration.grnCNUtilizationLabel' | translate }}
        </div>
        <mat-form-field
          [class.pw-readonly-field]="isReadonly"
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            [readonly]="isReadonly"
            formControlName="grnCNUtilization"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('grnCNUtilization').errors &&
              gepDetailsFormGroup.get('grnCNUtilization').errors.errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('grnCNUtilization').errors.errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row pw-form-card__margin-top">
        <div class="col-auto">
          <mat-form-field class="pw-single-bordered-input">
            <mat-label>Discount Date Range</mat-label>
            <mat-date-range-input
              formGroupName="rangeFormGroup"
              [rangePicker]="picker"
              [min]=" configId === 'new' ? currentDate : gepDetailsFormGroup.get('rangeFormGroup').get('startDate').value "
            >
              <input
                matStartDate
                formControlName="startDate"
                placeholder="StartDate"
              />
              <input
                matEndDate
                formControlName="endDate"
                placeholder="EndDate"
              />
            </mat-date-range-input>
            <mat-datepicker-toggle matSuffix [for]="picker">
              <mat-icon matDatepickerToggleIcon>
                <span class="pw-i-12 pw-calender-icon-12"></span>
              </mat-icon>
            </mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
            <mat-error
              *ngIf="
                gepDetailsFormGroup.get('rangeFormGroup').get('startDate')
                  .errors &&
                gepDetailsFormGroup.get('rangeFormGroup').get('startDate')
                  .errors.errorArray
              "
            >
              <poss-web-error-info-tooltip
                [errorMessage]="
                  gepDetailsFormGroup.get('rangeFormGroup').get('startDate')
                    .errors.errorArray
                "
              ></poss-web-error-info-tooltip>
            </mat-error>
            <mat-error
              *ngIf="
                gepDetailsFormGroup.get('rangeFormGroup').get('endDate')
                  .errors &&
                gepDetailsFormGroup.get('rangeFormGroup').get('endDate').errors
                  .errorArray
              "
            >
              <poss-web-error-info-tooltip
                [errorMessage]="
                  gepDetailsFormGroup.get('rangeFormGroup').get('endDate')
                    .errors.errorArray
                "
              ></poss-web-error-info-tooltip>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="col-6 col-lg-6 pw-form-card__margin-top">
      <div class="row">
        <div class="col-9 pw-form-card__align-center">
          Base Karat for Purity
        </div>
        <mat-form-field
          class="col-3 pw-full-bordered-input-box pw-mat-form-field pw-header-left-list__item pw-form-field-padding-bottom-0"
          appearance="outline"
        >
          <input
            matInput
            formControlName="baseCaratForPurity"
            autocomplete="off"
          />
          <mat-error
            *ngIf="
              gepDetailsFormGroup.get('baseCaratForPurity').errors &&
              gepDetailsFormGroup.get('baseCaratForPurity').errors.errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                gepDetailsFormGroup.get('baseCaratForPurity').errors.errorArray
              "
            ></poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
  </div>
</div>
<div class="row mb-3">
  <div class="col-auto ml-auto">
    <button
      class="pw-btn pw-accent-btn"
      [disabled]="!isParentFormValid || gepDetailsFormGroup.invalid"
      (click)="save()"
    >
      {{ 'pw.gePurityConfiguration.saveLabel' | translate }}
    </button>
  </div>
</div>
