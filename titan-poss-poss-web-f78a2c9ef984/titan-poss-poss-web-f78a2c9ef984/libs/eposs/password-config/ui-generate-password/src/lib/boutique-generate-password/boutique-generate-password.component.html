<form
  [formGroup]="generateBoutiquePasswordForm"
  (ngSubmit)="onSubmit()"
  novalidate
  #generateBoutiquePasswordFormDirective="ngForm"
  autocomplete="off"
>
  <div class="mt-4 pw-min-height">
    <div class="row">
      <div class="col-lg-12">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-12">
            <div class="pw-form-card pw-fixed-height">
              <div class="row">
                <mat-form-field class="col-6">
                  <mat-label>{{
                    (contextType !== contextTypeEnumRef.GOLD_RATE
                      ? 'pw.passwordConfig.billDateLabel'
                      : 'pw.passwordConfig.businessDateLabel'
                    ) | translate
                  }}</mat-label>
                  <input
                    matInput
                    class="pw-single-bordered-input"
                    [matDatepicker]="datePicker"
                    formControlName="manualBillDate"
                    [max]="currentDate"
                    [min]="minDate"
                    (click)="datePicker.open()"
                    readonly
                    required
                  />
                  <mat-datepicker-toggle matSuffix [for]="datePicker">
                    <mat-icon matDatepickerToggleIcon>
                      <span class="pw-i-12 pw-calender-icon-12"></span>
                    </mat-icon>
                  </mat-datepicker-toggle>
                  <mat-datepicker #datePicker></mat-datepicker>
                  <mat-error
                    *ngIf="
                      generateBoutiquePasswordForm.get('manualBillDate')
                        .errors &&
                      generateBoutiquePasswordForm.get('manualBillDate').errors
                        .errorArray &&
                      generateBoutiquePasswordForm.get('manualBillDate').touched
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        generateBoutiquePasswordForm.get('manualBillDate')
                          .errors.errorArray
                      "
                    ></poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>
              <div
                class="row pw-detail-card__list"
                *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
              >
                <poss-web-select-dropdown
                  class="col-lg-12 pw-form-bottom"
                  [placeholder]="
                    'pw.passwordConfig.documentTypePlaceHolder' | translate
                  "
                  [control]="generateBoutiquePasswordForm.get('txnType')"
                  [options]="documentTypesOptions"
                  [required]="true"
                  (selectionChange)="txnTypeChange()"
                >
                </poss-web-select-dropdown>
              </div>
              <div
                class="row pw-form-bottom"
                *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
              >
                <div class="col-6">
                  <p class="pw-secondary-color">
                    {{ 'pw.passwordConfig.billNumberLabel' | translate
                    }}<span
                      *ngIf="
                        generateBoutiquePasswordForm.get('manualBillNo').enabled
                      "
                      class="pw-error-color"
                    >
                      *</span
                    >
                  </p>
                  <mat-form-field class="pw-margin-space" appearance="none">
                    <input
                      matInput
                      formControlName="manualBillNo"
                      class="pw-input-box pw-error-msg"
                      required
                    />
                    <mat-error
                      *ngIf="
                        generateBoutiquePasswordForm.get('manualBillNo')
                          .errors &&
                        generateBoutiquePasswordForm.get('manualBillNo').errors
                          .errorArray &&
                        generateBoutiquePasswordForm.get('manualBillNo').touched
                      "
                    >
                      <poss-web-error-info-tooltip
                        [errorMessage]="
                          generateBoutiquePasswordForm.get('manualBillNo')
                            .errors.errorArray
                        "
                      ></poss-web-error-info-tooltip>
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-6">
                  <p class="pw-secondary-color">
                    {{ 'pw.passwordConfig.billValueLabel' | translate }}
                  </p>
                  <mat-form-field class="pw-margin-space" appearance="none">
                    <input
                      matInput
                      type="text"
                      class="pw-input-box pw-error-msg"
                      formControlName="manualBillValue"
                      [allowDecimal]="false"
                      possWebAmountInput
                    />
                    <mat-error
                      *ngIf="
                        generateBoutiquePasswordForm.get('manualBillValue')
                          .errors &&
                        generateBoutiquePasswordForm.get('manualBillValue')
                          .errors.errorArray &&
                        generateBoutiquePasswordForm.get('manualBillValue')
                          .touched
                      "
                    >
                      <poss-web-error-info-tooltip
                        [errorMessage]="
                          generateBoutiquePasswordForm.get('manualBillValue')
                            .errors.errorArray
                        "
                      ></poss-web-error-info-tooltip>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <mat-form-field class="col-lg-12 pw-form-bottom">
                  <input
                    matInput
                    type="text"
                    [placeholder]="
                      'pw.passwordConfig.remarksPlaceHolder' | translate
                    "
                    class="pw-single-bordered-input"
                    formControlName="remarks"
                    required
                    name="remarkField"
                    possWebMaxLengthValidator
                  />
                  <mat-error
                    *ngIf="
                      generateBoutiquePasswordForm.get('remarks').errors &&
                      generateBoutiquePasswordForm.get('remarks').errors
                        .errorArray &&
                      generateBoutiquePasswordForm.get('remarks').touched
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        generateBoutiquePasswordForm.get('remarks').errors
                          .errorArray
                      "
                    ></poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>

              <div
                class="row"
                *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
              >
                <mat-form-field class="pw-form-bottom col-lg-12">
                  <input
                    matInput
                    type="text"
                    [placeholder]="
                      'pw.passwordConfig.approvedByLabel' | translate
                    "
                    class="pw-single-bordered-input"
                    formControlName="approvedBy"
                    required
                  />
                  <mat-error
                    *ngIf="
                      generateBoutiquePasswordForm.get('approvedBy').errors &&
                      generateBoutiquePasswordForm.get('approvedBy').errors
                        .errorArray &&
                      generateBoutiquePasswordForm.get('approvedBy').touched
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        generateBoutiquePasswordForm.get('approvedBy').errors
                          .errorArray
                      "
                    ></poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-12">
            <div class="pw-form-card pw-fixed-height">
              <div class="row">
                <mat-form-field class="col-lg-12">
                  <input
                    class="pw-single-bordered-input"
                    matInput
                    [placeholder]="
                      'pw.passwordConfig.locationCodePlaceHolder' | translate
                    "
                    formControlName="locationCode"
                    readonly
                    required
                    (click)="openLocationSelectionPopup()"
                  />
                  <mat-icon matSuffix>
                    <span class="pw-i-16 pw-location-icon-16"></span>
                  </mat-icon>
                  <mat-error
                    *ngIf="
                      generateBoutiquePasswordForm.get('locationCode').errors &&
                      generateBoutiquePasswordForm.get('locationCode').errors
                        .errorArray &&
                      generateBoutiquePasswordForm.get('locationCode').touched
                    "
                  >
                    <poss-web-error-info-tooltip
                      [errorMessage]="
                        generateBoutiquePasswordForm.get('locationCode').errors
                          .errorArray
                      "
                    ></poss-web-error-info-tooltip>
                  </mat-error>
                </mat-form-field>
              </div>
              <div formGroupName="metalRates">
                <div class="row pw-box-align" formGroupName="gold">
                  <div class="col-4">
                    <div class="pw-form-card__item pw-checkbox-space">
                      <mat-checkbox
                        (change)="checkBoxSelected('gold', $event)"
                        formControlName="isSelected"
                        >{{
                          'pw.passwordConfig.goldRateLabel' | translate
                        }}</mat-checkbox
                      >
                    </div>
                  </div>
                  <div class="col-8">
                    <div class="row">
                      <div class="col-6">
                        <div class="pw-form-card__item">
                          <poss-web-select-dropdown
                            placeholder=" {{
                              'pw.passwordConfig.rateLabel' | translate
                            }}({{ defaultCurrencyCode | currencySymbol }})"
                            [control]="
                              generateBoutiquePasswordForm.get([
                                'metalRates',
                                'gold',
                                'ratePerUnit'
                              ])
                            "
                            [options]="goldRates"
                            [required]="true"
                          >
                          </poss-web-select-dropdown>
                        </div>
                      </div>
                      <div
                        class="col-6"
                        *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
                      >
                        <div class="pw-form-card__item">
                          <p class="pw-secondary-color">
                            {{ 'pw.passwordConfig.weightLabel' | translate }}({{
                              weightCode
                            }})<span
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'gold',
                                  'totalMetalWeight'
                                ]).enabled &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'gold',
                                  'materialTypeCode'
                                ]).value !== null &&
                                generateBoutiquePasswordForm.get(['txnType'])
                                  .value !== txnTypeEnumRef.GRF
                              "
                              class="pw-error-color"
                            >
                              *</span
                            >
                          </p>
                          <mat-form-field
                            class="pw-margin-space"
                            appearance="none"
                          >
                            <input
                              class="pw-input-box pw-error-msg"
                              matInput
                              formControlName="totalMetalWeight"
                              possWebWeightInput
                            />
                            <mat-error
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'gold',
                                  'totalMetalWeight'
                                ]).errors &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'gold',
                                  'totalMetalWeight'
                                ]).errors.errorArray &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'gold',
                                  'totalMetalWeight'
                                ]).touched
                              "
                            >
                              <poss-web-error-info-tooltip
                                [errorMessage]="
                                  generateBoutiquePasswordForm.get([
                                    'metalRates',
                                    'gold',
                                    'totalMetalWeight'
                                  ]).errors.errorArray
                                "
                              ></poss-web-error-info-tooltip>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row pw-box-align" formGroupName="platinum">
                  <div class="col-4">
                    <div class="pw-form-card__item pw-checkbox-space">
                      <mat-checkbox
                        (change)="checkBoxSelected('platinum', $event)"
                        formControlName="isSelected"
                        >{{
                          'pw.passwordConfig.platinumRateLabel' | translate
                        }}</mat-checkbox
                      >
                    </div>
                  </div>
                  <div class="col-8">
                    <div class="row">
                      <div class="col-6">
                        <div class="pw-form-card__item">
                          <poss-web-select-dropdown
                            placeholder=" {{
                              'pw.passwordConfig.rateLabel' | translate
                            }}({{ defaultCurrencyCode | currencySymbol }})"
                            [control]="
                              generateBoutiquePasswordForm.get([
                                'metalRates',
                                'platinum',
                                'ratePerUnit'
                              ])
                            "
                            [options]="platinumRates"
                            [required]="true"
                          >
                          </poss-web-select-dropdown>
                        </div>
                      </div>
                      <div
                        class="col-6"
                        *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
                      >
                        <div class="pw-form-card__item">
                          <p class="pw-secondary-color">
                            {{ 'pw.passwordConfig.weightLabel' | translate }}({{
                              weightCode
                            }})<span
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'platinum',
                                  'totalMetalWeight'
                                ]).enabled &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'platinum',
                                  'materialTypeCode'
                                ]).value !== null &&
                                generateBoutiquePasswordForm.get(['txnType'])
                                  .value !== txnTypeEnumRef.GRF
                              "
                              class="pw-error-color"
                            >
                              *</span
                            >
                          </p>
                          <mat-form-field
                            class="pw-margin-space"
                            appearance="none"
                          >
                            <input
                              class="pw-input-box pw-error-msg"
                              matInput
                              formControlName="totalMetalWeight"
                              possWebWeightInput
                            />
                            <mat-error
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'platinum',
                                  'totalMetalWeight'
                                ]).errors &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'platinum',
                                  'totalMetalWeight'
                                ]).errors.errorArray &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'platinum',
                                  'totalMetalWeight'
                                ]).touched
                              "
                            >
                              <poss-web-error-info-tooltip
                                [errorMessage]="
                                  generateBoutiquePasswordForm.get([
                                    'metalRates',
                                    'platinum',
                                    'totalMetalWeight'
                                  ]).errors.errorArray
                                "
                              ></poss-web-error-info-tooltip>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row pw-box-align" formGroupName="silver">
                  <div class="col-4">
                    <div class="pw-form-card__item pw-checkbox-space">
                      <mat-checkbox
                        (change)="checkBoxSelected('silver', $event)"
                        formControlName="isSelected"
                        >{{
                          'pw.passwordConfig.silverRateLabel' | translate
                        }}</mat-checkbox
                      >
                    </div>
                  </div>
                  <div class="col-8">
                    <div class="row">
                      <div class="col-6">
                        <div class="pw-form-card__item">
                          <poss-web-select-dropdown
                            placeholder=" {{
                              'pw.passwordConfig.rateLabel' | translate
                            }}({{ defaultCurrencyCode | currencySymbol }})"
                            [control]="
                              generateBoutiquePasswordForm.get([
                                'metalRates',
                                'silver',
                                'ratePerUnit'
                              ])
                            "
                            [options]="silverRates"
                            [required]="true"
                          >
                          </poss-web-select-dropdown>
                        </div>
                      </div>
                      <div
                        class="col-6"
                        *ngIf="contextType !== contextTypeEnumRef.GOLD_RATE"
                      >
                        <div class="pw-form-card__item">
                          <p class="pw-secondary-color">
                            {{ 'pw.passwordConfig.weightLabel' | translate }}({{
                              weightCode
                            }})<span
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'silver',
                                  'totalMetalWeight'
                                ]).enabled &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'silver',
                                  'materialTypeCode'
                                ]).value !== null &&
                                generateBoutiquePasswordForm.get(['txnType'])
                                  .value !== txnTypeEnumRef.GRF
                              "
                              class="pw-error-color"
                            >
                              *</span
                            >
                          </p>
                          <mat-form-field
                            class="pw-margin-space"
                            appearance="none"
                          >
                            <input
                              class="pw-input-box pw-error-msg"
                              matInput
                              formControlName="totalMetalWeight"
                              possWebWeightInput
                            />
                            <mat-error
                              *ngIf="
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'silver',
                                  'totalMetalWeight'
                                ]).errors &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'silver',
                                  'totalMetalWeight'
                                ]).errors.errorArray &&
                                generateBoutiquePasswordForm.get([
                                  'metalRates',
                                  'silver',
                                  'totalMetalWeight'
                                ]).touched
                              "
                            >
                              <poss-web-error-info-tooltip
                                [errorMessage]="
                                  generateBoutiquePasswordForm.get([
                                    'metalRates',
                                    'silver',
                                    'totalMetalWeight'
                                  ]).errors.errorArray
                                "
                              ></poss-web-error-info-tooltip>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <mat-checkbox
                formControlName="isBimetal"
              >
                {{'pw.passwordConfig.isBimetalLabel' | translate}}
              </mat-checkbox>
              <div class="row mb-3">
                <div class="col-6">
                  <button
                    [disabled]="disableGeneratePassword"
                    mat-button
                    class="pw-btn pw-accent-btn"
                    type="submit"
                  >
                    {{ 'pw.passwordConfig.generatePasswordLabel' | translate }}
                  </button>
                </div>
                <div class="col-auto ml-auto">
                  <button
                    mat-button
                    class="pw-btn pw-primary-btn"
                    type="button"
                    (click)="reset(generateBoutiquePasswordFormDirective)"
                  >
                    {{ 'pw.passwordConfig.clearLabel' | translate }}
                  </button>
                </div>
              </div>

              <div class="row">
                <div class="col-7">
                  <div class="pw-form-card__item">
                    <p class="pw-secondary-color">
                      {{ 'pw.passwordConfig.passwordLabel' | translate }}
                    </p>
                    <mat-form-field class="pw-margin-space" appearance="none">
                      <input
                        matInput
                        readonly
                        class="pw-input-box"
                        formControlName="password"
                        [type]="show ? 'text' : 'password'"
                      />
                    </mat-form-field>
                    <mat-checkbox
                      class="pw-form-card__item pt-3"
                      (change)="showPassword()"
                    >
                      {{
                        'pw.passwordConfig.showPasswordLabel' | translate
                      }}</mat-checkbox
                    >
                  </div>
                </div>
                <div class="col-auto pb-1 ml-auto">
                  <button
                    [disabled]="
                      generateBoutiquePasswordForm.get('password').value ===
                      null
                    "
                    mat-button
                    [cdkCopyToClipboard]="getPassword()"
                    class="pw-btn pw-small-btn mt-3 ml-2"
                    type="button"
                  >
                    {{ 'pw.passwordConfig.copyPasswordLabel' | translate }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
