<mat-expansion-panel expanded class="pw-expansion-panel">
  <mat-expansion-panel-header
    class="pw-expansion-panel__header"
    [collapsedHeight]="'40px'"
    [expandedHeight]="'40px'"
  >
    <mat-panel-title class="pw-expansion-panel__heading">
      {{ 'pw.abRequestApproval.manualCMDetailsLabel' | translate }}
    </mat-panel-title>
  </mat-expansion-panel-header>
  <div class="pw-card pw-panel">
    <div class="row pw-card__header">
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">
          {{ 'pw.abRequestApproval.locationCodeLabel' | translate }}
        </div>
        {{ cmHeaderDetails$?.locationCode }}
      </div>
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">Request No.</div>
        {{ cmHeaderDetails$?.docNo }}
      </div>
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">
          {{ 'pw.abRequestApproval.billAmountLabel' | translate }}
        </div>
        {{ cmHeaderDetails$?.headerData?.data?.finalValue }}
      </div>
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">Requested By</div>
        {{ cmHeaderDetails$?.requestorUserName }}
      </div>
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">
          {{ 'pw.abRequestApproval.approvedByLabel' | translate }}
        </div>
        {{
          cmHeaderDetails$?.headerData?.data?.manualBillDetails
            ?.manualBillDetails?.approvedBy
        }}
      </div>
      <div class="col-xl-2 col-lg-3 col-3">
        <div class="pw-detail-card__label">
          {{ 'pw.abRequestApproval.rateOption' | translate }}
        </div>
        <div
          *ngIf="cmHeaderDetails$?.headerData?.data?.isBestRate"
          class="pw-font-weight-bold"
        >
          <span> {{ 'pw.abRequestApproval.bestGoldRate' | translate }}</span>
        </div>
        <div
          *ngIf="!cmHeaderDetails$?.headerData?.data?.isBestRate"
          class="pw-font-weight-bold"
        >
          <span *ngIf="cmHeaderDetails$?.headerData?.data?.isFrozenRate">
            {{ 'pw.abRequestApproval.frozen' | translate }}</span
          >
          <span *ngIf="!cmHeaderDetails$?.headerData?.data?.isFrozenRate">
            {{ 'pw.abRequestApproval.nonFrozen' | translate }}</span
          >
        </div>
      </div>
      <div *ngIf="imageUrl" class="col-xl-2 col-lg-3 col-3">
        <div class="pw-tertiary-color">
          {{ 'pw.cmRequestApproval.billCopyLabel' | translate }}
        </div>
        <div class="pw-fourth-color">
          <poss-web-file-upload
            [imageUrl]="imageUrl"
            [enableClose]="enableClose"
            [previewHeader]="'pw.manualCashMemo.previewHeaderTxt' | translate"
            [fileName]="'pw.manualCashMemo.viewBillLabel' | translate"
          ></poss-web-file-upload>
        </div>
      </div>

      <div *ngIf="headerDetails?.remarks" class="col-xl-2 col-lg-5 col-5">
        <div class="pw-tertiary-color">
          {{ 'pw.cmRequestApproval.reasonLabel' | translate }}
        </div>
        {{ cmHeaderDetails$?.requestorRemarks }}
      </div>
    </div>
    <div class="pw-card__body">
      <div class="row pw-card__row">
        <div class="col-xl-2 col-lg-3 col-3">
          <div class="pw-tertiary-color">
            {{ 'pw.abRequestApproval.billDateLabel' | translate }}
          </div>
          {{
            dateFormat(
              cmHeaderDetails$?.headerData?.data?.manualBillDetails
                ?.manualBillDetails?.manualBillDate
            ) | dateFormatter
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.manualBillDetails
              ?.manualBillDetails?.manualBillNo
          "
          class="col-xl-2 col-lg-2 col-2"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.abRequestApproval.billNumberLabel' | translate }}
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.manualBillDetails
              ?.manualBillDetails?.manualBillNo
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.J
              ?.totalMetalWeight
          "
          class="col-xl-2 col-lg-2 col-2"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.goldWtLabel' | translate }} ({{
              weightCodeForGms
            }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.J
              ?.totalMetalWeight | weightFormatter
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.J
              ?.ratePerUnit
          "
          class="col-xl-2 col-lg-3 col-3"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.goldRateLabel' | translate }} ({{
              defaultCurrencyCode | currencySymbol
            }}
            / {{ weightCodeForGm }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.J
              ?.ratePerUnit | currencyFormatter
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.L
              ?.totalMetalWeight
          "
          class="col-xl-2 col-lg-3 col-3"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.platinumWtLabel' | translate }} ({{
              weightCodeForGms
            }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.L
              ?.totalMetalWeight | weightFormatter
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.L
              ?.ratePerUnit
          "
          class="col-xl-4 col-lg-4 col-4"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.platinumRateLabel' | translate }}({{
              defaultCurrencyCode | currencySymbol
            }}
            / {{ weightCodeForGm }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.L
              ?.ratePerUnit | currencyFormatter
          }}
        </div>
        <div
          *ngIf="
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.P
              ?.totalMetalWeight
          "
          class="col-xl-2 col-lg-3 col-3"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.silverWtLabel' | translate }} ({{
              weightCodeForGms
            }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRates?.P?.totalMetalWeight
              | weightFormatter
          }}
        </div>
        <div
          *ngIf="cmHeaderDetails$?.headerData?.data?.metalRates?.P?.ratePerUnit"
          class="col-xl-4 col-lg-4 col-4"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.cmRequestApproval.silverRateLabel' | translate }}
            ({{ defaultCurrencyCode | currencySymbol }} / {{ weightCodeForGm }})
          </div>
          {{
            cmHeaderDetails$?.headerData?.data?.metalRateList?.metalRates?.P
              ?.ratePerUnit | currencyFormatter
          }}
        </div>
        <div
          *ngIf="cmHeaderDetails$?.headerData?.data?.collectedBy"
          class="col-xl-3 col-lg-3 col-3"
        >
          <div class="pw-tertiary-color">
            {{ 'pw.advanceBooking.productCollectedByLabel' | translate }}
          </div>
          {{ cmHeaderDetails$?.headerData?.data?.collectedBy }}
        </div>
      </div>
    </div>
  </div>
</mat-expansion-panel>
