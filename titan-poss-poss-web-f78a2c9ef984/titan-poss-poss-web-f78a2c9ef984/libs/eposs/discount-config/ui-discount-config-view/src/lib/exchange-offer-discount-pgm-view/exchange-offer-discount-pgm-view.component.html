<form [formGroup]="filterForm">
  <div class="row">
    <div class="col-lg-8">
      <div class="pw-tab">
        <ul class="pw-tab__list">
          <li class="pw-tab__list-item">
            <a
              (click)="changeTab(discountProductGroupTabRef.PRODUCT_GROUP_TEP)"
              [class.pw-is-active-bar]="
                selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_TEP
              "
            >
              <h5 class="pw-tab__item">
                {{ 'pw.discountConfig.applicablepgMappingforTep' | translate }}
              </h5>
            </a>
          </li>

          <li class="pw-tab__list-item">
            <a
              (click)="changeTab(discountProductGroupTabRef.PRODUCT_GROUP_1KT)"
              [class.pw-is-active-bar]="
                selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_1KT
              "
            >
              <h5 class="pw-tab__item">
                {{ 'pw.discountConfig.onektpgmapLabel' | translate }}
              </h5></a
            >
          </li>
          <li class="pw-tab__list-item">
            <a
              (click)="changeTab(discountProductGroupTabRef.PRODUCT_GROUP_2KT)"
              [class.pw-is-active-bar]="
                selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_2KT
              "
            >
              <h5 class="pw-tab__item">
                {{ 'pw.discountConfig.twoktpgmapLabel' | translate }}
              </h5></a
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div
    class="row align-items-baseline"
    *ngIf="mappedProductGroups.length > 0 || productGroups.length > 0"
  >
    <div class="col-auto ml-auto">
      <button mat-button [matMenuTriggerFor]="filterby">
        <span
          class="pw-i-24 pw-filter-box__icon-top"
          [ngClass]="
            appliedFilter ? 'pw-filter-icon-color-24' : 'pw-filter-icon-24'
          "
        ></span>
        {{ 'pw.discountConfig.filterLabel' | translate }}
      </button>

      <mat-menu #filterby="matMenu">
        <ng-container *ngFor="let product of productTypeList">
          <button mat-menu-item (click)="getValue(product.value)">
            {{ product.description }}
          </button>
        </ng-container>
      </mat-menu>
    </div>
  </div>
  <ng-container
    *ngIf="
      mappedProductGroups.length > 0 || productGroups.length > 0;
      else errorMesage
    "
  >
    <div class="row">
      <div
        class="col-12"
        *ngIf="selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_TEP"
      >
        <table class="pw-grid-table"  aria-describedby="table">
          <thead>
            <tr class="pw-grid-table__background-header">
              <th class="pw-grid-table__header-item" scope="col">
                {{ 'pw.discountConfig.productGroupsLabel' | translate }}
              </th>
              <th class="pw-grid-table__header-item" scope="col">
                {{ 'pw.discountConfig.descriptionLabel' | translate }}
              </th>
              <th class="pw-grid-table__header-item" scope="col">
                {{ 'pw.discountConfig.minEligibleKaratageLabel' | translate }}
              </th>
            </tr>
          </thead>
          <tbody class="pw-grid-table__body">
            <tr
              *ngFor="let item of mappedProductGroups"
              class="pw-grid-table__row"
            >
              <td class="pw-grid-table__item">{{ item.productGroupCode }}</td>
              <td class="pw-grid-table__item">{{ item.description }}</td>
              <td class="pw-grid-table__item">{{ item.eligibleKarat }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div
        class="col-12"
        *ngIf="
          selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_1KT ||
          selectedTab === discountProductGroupTabRef.PRODUCT_GROUP_2KT
        "
      >
        <table class="pw-grid-table"  aria-describedby="table">
          <thead>
            <tr class="pw-grid-table__background-header">
              <th class="pw-grid-table__header-item" scope="col">
                {{ 'pw.discountConfig.productGroupsLabel' | translate }}
              </th>
              <th class="pw-grid-table__header-item" scope="col">
                {{ 'pw.discountConfig.descriptionLabel' | translate }}
              </th>
            </tr>
          </thead>
          <tbody class="pw-grid-table__body">
            <tr *ngFor="let item of productGroups" class="pw-grid-table__row">
              <td class="pw-grid-table__item">{{ item.productGroupCode }}</td>
              <td class="pw-grid-table__item">{{ item.description }}</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
  </ng-container>
  <ng-template #errorMesage>
    <div class="pw-sub-heading pw-message pw-text-center">
      {{ 'No Records' | translate }}
    </div>
  </ng-template>

  <div class="row mt-2">
    <mat-paginator
      class="pw-paginator ml-auto"
      *ngIf="totalElements > minPageSize && mappedProductGroups.length > 0"
      [length]="totalElements"
      [pageSize]="pageEvent.pageSize"
      [pageIndex]="pageEvent.pageIndex"
      showFirstLastButtons
      [pageSizeOptions]="pageSizeOptions"
      (page)="paginate($event)"
    >
    </mat-paginator>
  </div>
</form>
