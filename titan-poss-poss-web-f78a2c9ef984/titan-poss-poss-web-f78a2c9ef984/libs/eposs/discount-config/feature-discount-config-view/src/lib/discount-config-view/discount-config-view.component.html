<div class="container-fluid">
  <div class="row margin-bottom">
    <div class="col-12 col-lg-10 m-auto">
      <div class="pw-top-heading-container">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto">
            <div class="pw-top-heading-container__main-head">
              <a (click)="back()">
                <span class="pw-i-24 pw-back-arrow-icon-24"></span>
              </a>
              <span class="pw-i-36 pw-customer-transaction-icon-36"></span>
              <div>
                <h2>
                  {{ 'pw.discountConfig.offerConfigurationLabel' | translate }}
                </h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.discountConfig.configurationLabel' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row pw-sub-header">
        <div class="col-auto">
          <div class="pw-sub-header__heading">
            {{ 'pw.discountConfig.discountConfigLabel' | translate }}
          </div>
        </div>
      </div>
      <div class="row">
        <div class="ml-auto mr-3 mb-3">
          <button
            mat-button
            class="pw-btn pw-primary-btn"
            type="button"
            (click)="toggleAccordion()"
          >
            {{
              (expanded
                ? 'pw.discountConfig.collapseAllLabel'
                : 'pw.discountConfig.expandAllLabel'
              ) | translate
            }}
          </button>
        </div>
      </div>

      <mat-accordion multi>
        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(0)"
          (opened)="opened(0)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.configurationLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="discountDetails$ | async as discountDetails">
            <poss-web-discount-header-details-view
              *ngIf="panelStatus[0]"
              [discountTypes]="discountTypes"
              [clubbingDiscountTypes]="clubbingDiscountTypes"
              [approvers]="approvers"
              [applicableLevels]="applicableLevels"
              [subBrands]="subBrandsdropDown"
              [brands]="brandsDropDown"
              [discountDetails]="discountDetails"
              [disable]="disable"
              [isLocationData]="isLocationData"
              [isCategoryPgData]="isCategoryPgData"
              [isSlabData]="isSlabData"
              (discountSelected)="getSelectedDiscount($event)"
              (faqFileDownload)="faqFileDownload($event)"
            ></poss-web-discount-header-details-view>
          </ng-container>
        </mat-expansion-panel>
        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="discountDetails$ | async"
          (closed)="closed(1)"
          (opened)="opened(1)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading"
              >{{
                'pw.discountConfig.discApplicableLabel' | translate | uppercase
              }}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="discountDetails$ | async as discountDetails">
            <poss-web-disc-applicable-view
              *ngIf="panelStatus[1]"
              [config]="discountDetails"
              [selectedDiscount]="selectedDiscount"
              [isRiva]="isRiva"
              [currencyCode]="currencyCode"
              [discountTypes]="discountTypes"
              [clubbingDiscountTypes]="clubbingDiscountTypes"
              [durations]="durations$"
            ></poss-web-disc-applicable-view>
          </ng-container>
        </mat-expansion-panel>
        <mat-expansion-panel
          *ngIf="enableTab(empowermentConfigTabDiscounts)"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(2)"
          (opened)="opened(2)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.empowermentConfigLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-discount-empower-config-view
            *ngIf="panelStatus[2]"
            [empowerConfigDetailsList]="empowerConfigDetailsList"
          >
          </poss-web-discount-empower-config-view>
        </mat-expansion-panel>
        <mat-expansion-panel
          *ngIf="enableTab(pcMappingTabDiscounts)"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(3)"
          (opened)="opened(3)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.prodCategoryLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="productCategories$ | async as productCategories">
            <poss-web-product-category-mapping-view
              *ngIf="panelStatus[3]"
              [mappedProductCategory]="productCategories"
              [allMappedProductCategory]="selectedProductCategories"
              [totalElements]="totalProductCategories$ | async"
              [pageEvent]="productCategoryPageEvent"
              [minPageSize]="minPageSize"
              [pageSizeOptions]="pageSizeOptions"
              (loadPc)="loadProductCategoryList($event)"
            ></poss-web-product-category-mapping-view>
          </ng-container>
        </mat-expansion-panel>
        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="enableTab(excludeTabDiscounts)"
          (closed)="closed(4)"
          (opened)="opened(4)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">
              {{
                'pw.discountConfig.excludeThemeAndItemcodesLabel'
                  | translate
                  | uppercase
              }}</mat-panel-title
            >
          </mat-expansion-panel-header>

          <poss-web-discount-exclude-config-view
            *ngIf="panelStatus[4]"
            [excludeItemCodes]="excludeItemCodes"
            [excludeThemeCodes]="excludeThemeCodes"
            [excludeItemCodesCount]="totalExcludeItemCodes$ | async"
            [pageEvent]="pageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [excludeComplexity]="excludeComplexity"
            [excludeMC]="excludeMC"
            [currencyCode]="currencyCode"
            (excludeType)="loadExcludeConfigList($event)"
            (loadItemCodes)="loadExcludeItemCodes($event)"
          ></poss-web-discount-exclude-config-view>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            enableTab(pgMappingTabDiscounts) &&
            selectedDiscount !== discountTypeEnumRef.CATEGORY_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TSSS_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.ULP_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_ANNIVERSARY
          "
          (closed)="closed(5)"
          (opened)="opened(5)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.prodGroupMappingLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container
            *ngIf="totalProductGroups$ | async as totalProductGroups"
          >
            <ng-container *ngIf="productGroups$ | async as productGroups">
              <poss-web-product-group-mapping-view
                *ngIf="panelStatus[5]"
                [productGroups]="productGroups"
                [productGroupTypes]="productGroupTypes"
                [totalElements]="totalProductGroups"
                [selectedProductGroups]="selectedProductGroups"
                [pageEvent]="productGroupPageEvent"
                [minPageSize]="minPageSize"
                [pageSizeOptions]="pageSizeOptions"
                (loadItems)="loadProductGroupList($event)"
                (productGroupType)="filterProductGroups($event)"
              ></poss-web-product-group-mapping-view>
            </ng-container>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            selectedDiscount === discountTypeEnumRef.CATEGORY_DISCOUNT ||
            selectedDiscount === discountTypeEnumRef.TSSS_DISCOUNT ||
            selectedDiscount === discountTypeEnumRef.EMPLOYEE_DISCOUNT ||
            selectedDiscount === discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT ||
            selectedDiscount === discountTypeEnumRef.ULP_BIRTHDAY ||
            selectedDiscount === discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY ||
            selectedDiscount === discountTypeEnumRef.ULP_ANNIVERSARY
          "
          (closed)="closed(6)"
          (opened)="opened(6)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading"
              >{{
                'pw.discountConfig.prodGroupMappingLabel'
                  | translate
                  | uppercase
              }}
            </mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-category-discount-productgroup-mapping-view
            *ngIf="panelStatus[6]"
            [currencyCode]="currencyCode"
            [pgConfigValuePerWeightType]="pgConfigValuePerWeightType"
            [abCoData]="abCoData"
            [pageSizeOptions]="pageSizeOptions"
            [minPageSize]="minPageSize"
            [configItemList]="categoryDiscountPGConfigItems"
            [isABOfferApplicable]="isABOfferApplicable"
            [isCOOfferApplicable]="isCOOfferApplicable"
            [isPreviewApplicable]="isPreviewApplicable"
            [isRIVAAHOfferApplicable]="isRIVAAHOfferApplicable"
            [selectedProductGroups]="
              discountConfigFacade.getDiscountComponentProductGroups()
            "
            [totalElements]="
              discountConfigFacade.getDiscountComponentPGConfigCount() | async
            "
            (loadConfiguration)="loadPGMappingWithCharges($event)"
            (loadProductGroups)="loadProductGroups($event)"
          ></poss-web-category-discount-productgroup-mapping-view>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            selectedDiscount === discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT
          "
          (closed)="closed(7)"
          (opened)="opened(7)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">
              {{
                'pw.discountConfig.prodGroupMappingLabel'
                  | translate
                  | uppercase
              }}</mat-panel-title
            >
          </mat-expansion-panel-header>
          <ng-container *ngIf="productGroups$ | async as productGroups">
            <ng-container
              *ngIf="totalProductGroups$ | async as totalProductGroups"
            >
              <poss-web-exchange-offer-discount-pgm-view
                *ngIf="panelStatus[7]"
                [productGroupTypes]="productGroupTypes"
                [selectedDiscount]="selectedDiscount"
                [mappedProductGroups]="productGroups"
                [totalElements]="totalProductGroups"
                [pageEvent]="productGroupPageEvent"
                [minPageSize]="minPageSize"
                [pageSizeOptions]="pageSizeOptions"
                [selectedProductGroups]="selectedProductGroups"
                (productGroupType)="filterProductGroups($event)"
                (loadItems)="loadProductGroupList($event)"
                (productGroupType)="filterProductGroups($event)"
              ></poss-web-exchange-offer-discount-pgm-view>
            </ng-container>
          </ng-container>
        </mat-expansion-panel>
        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            enableTab(locationMappingTabDiscounts) &&
            selectedDiscount !== discountTypeEnumRef.EMPOWERMENT_DISCOUNT
          "
          (closed)="closed(8)"
          (opened)="opened(8)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">
              {{
                'pw.discountConfig.locationMappingLabel' | translate | uppercase
              }}</mat-panel-title
            >
          </mat-expansion-panel-header>

          <poss-web-discount-location-mapping-view
            *ngIf="panelStatus[8]"
            [isPreviewApplicable]="isPreviewApplicable"
            [allSelectedLocations]="selectedLocations"
            [mappedLocation]="invalidSearch ? [] : (mappedLocations$ | async)"
            [totalElements]="totalLocations$ | async"
            [pageEvent]="locationPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [levels]="selectedLevels"
            [isApplicableField]="isApplicableField"
            (paginator)="paginateLocation($event)"
            (loadItems)="loadLocationList($event)"
            (clear)="clearLocationList($event)"
          ></poss-web-discount-location-mapping-view>
        </mat-expansion-panel>

        <mat-expansion-panel
          *ngIf="
            enableTab(referBestDealTabDiscounts) && bestDealDiscount$ | async
          "
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(9)"
          (opened)="opened(9)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.referBestDealLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="bestDealDiscount$ | async as bestDealDiscount">
            <ng-container
              *ngIf="totalBestDealDiscount$ | async as totalBestDealDiscount"
            >
              <ng-container
                *ngIf="
                  totalSelectedBestDealDiscount$
                    | async as totalSelectedBestDealDiscount
                "
              >
                <poss-web-refer-best-deal-discount-view
                  *ngIf="panelStatus[9]"
                  [selectedDiscounts]="selectedBestDealDiscount"
                  [allDiscounts]="bestDealDiscount"
                  [totalElements]="totalBestDealDiscount"
                  [pageEvent]="pageEvent"
                  [minPageSize]="minPageSize"
                  [pageSizeOptions]="pageSizeOptions"
                  [totalSelectedElements]="totalSelectedBestDealDiscount"
                  (loadItems)="loadBestDealDiscount($event)"
                ></poss-web-refer-best-deal-discount-view>
              </ng-container>
            </ng-container>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          *ngIf="enableTab(maxConfigTabDiscounts)"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(10)"
          (opened)="opened(10)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.maxAllowedValuesLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-max-allowed-value-view
            *ngIf="panelStatus[10]"
            [config]="maxValueConfig"
            [type]="selectedDiscount"
            [currencyCode]="currencyCode"
          ></poss-web-max-allowed-value-view>
        </mat-expansion-panel>
        <mat-expansion-panel
          *ngIf="enableTab(rivaahMaxConfigTabDiscounts)"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(10)"
          (opened)="opened(10)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.rivaahCardDiscLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-add-max-allowed-value-view
            *ngIf="panelStatus[10]"
            [config]="addMaxValueConfig"
            [type]="selectedDiscount"
            [currencyCode]="currencyCode"
          ></poss-web-add-max-allowed-value-view>
        </mat-expansion-panel>
        <mat-expansion-panel
          *ngIf="enableTab(ageConfigTabDiscounts)"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(11)"
          (opened)="opened(11)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.lotAgeBinAgeConfigLabel'
                | translate
                | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-lot-bin-age-config-view
            *ngIf="panelStatus[11]"
            [type]="selectedTab"
            [config]="lotBinAgeConfig"
          ></poss-web-lot-bin-age-config-view>
        </mat-expansion-panel>

        <mat-expansion-panel
          *ngIf="
            enableTab(applicableThemeTabDiscounts) && discountDetails$ | async
          "
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(12)"
          (opened)="opened(12)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.applicableThemeLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="discountDetails$ | async as discountDetails">
            <poss-web-discount-applicable-theme-view
              *ngIf="panelStatus[12]"
              [config]="discountDetails"
            ></poss-web-discount-applicable-theme-view>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          *ngIf="selectedDiscount === discountTypeEnumRef.EMPOWERMENT_DISCOUNT"
          class="pw-expansion-panel"
          [expanded]="expanded"
          (closed)="closed(13)"
          (opened)="opened(13)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.locationMappingLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="mappedLocations$ | async as mappedLocations">
            <ng-container *ngIf="totalLocations$ | async as totalLocations">
              <poss-web-emp-discount-location-view
                *ngIf="panelStatus[13]"
                [allSelectedLocations]="selectedLocations"
                [mappedLocation]="invalidSearch ? [] : mappedLocations"
                [totalElements]="totalLocations"
                [pageEvent]="locationPageEvent"
                [minPageSize]="minPageSize"
                [pageSizeOptions]="pageSizeOptions"
                [levels]="selectedLevels"
                (paginator)="paginate($event)"
                (loadLocations)="loadLocationList($event)"
                (clear)="loadLocationList($event)"
              ></poss-web-emp-discount-location-view>
            </ng-container>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="enableTab(exchangeOfferTabDiscounts)"
          (closed)="closed(14)"
          (opened)="opened(14)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.exchangeOfferConfigLabel'
                | translate
                | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="discountDetails$ | async as discountDetails">
            <poss-web-discount-exchange-offer-config-view
              *ngIf="panelStatus[14]"
              [discountDetails]="discountDetails"
            ></poss-web-discount-exchange-offer-config-view>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="enableTab(tsssConfigTabDiscounts)"
          (closed)="closed(15)"
          (opened)="opened(15)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.tsssConfigLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <ng-container *ngIf="discountDetails$ | async as discountDetails">
            <poss-web-discount-tss-config-view
              *ngIf="panelStatus[15]"
              [config]="discountDetails"
            ></poss-web-discount-tss-config-view>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="enableTab(slabConfigTabDiscounts)"
          (closed)="closed(16)"
          (opened)="opened(16)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">{{
              'pw.discountConfig.slabConfigLabel' | translate | uppercase
            }}</mat-panel-title>
          </mat-expansion-panel-header>
          <poss-web-discount-slab-config-view
            *ngIf="panelStatus[16]"
            [currencyCode]="currencyCode"
            [slabConfig]="slabConfig"
            [abCoData]="abCoData"
            [slabConfigsItems]="slabConfigItems"
            [isABOfferApplicable]="isABOfferApplicable"
            [isCOOfferApplicable]="isCOOfferApplicable"
            [isPreviewApplicable]="isPreviewApplicable"
            [isRivaah]="isRIVAAHOfferApplicable"
          ></poss-web-discount-slab-config-view>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            enableTab(pgUcpMcMappingTabDiscounts) &&
            !enableTab(pgMappingTabDiscounts) &&
            selectedDiscount !== discountTypeEnumRef.CATEGORY_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TSSS_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.ULP_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_ANNIVERSARY
          "
          (closed)="closed(17)"
          (opened)="opened(17)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">
              {{
                'pw.discountProductGroupMapping.pgmView' | translate
              }}</mat-panel-title
            >
          </mat-expansion-panel-header>
          <ng-container *ngIf="productGroups$ | async">
            <poss-web-rivaah-ashirwaad-pgm-view
              *ngIf="panelStatus[17]"
              [productGroupTypes]="productGroupTypes"
              [selectedDiscount]="selectedDiscount"
              [mappedProductGroups]="productGroups$ | async"
              [totalElements]="totalProductGroups$ | async"
              [pageEvent]="productGroupPageEvent"
              [minPageSize]="minPageSize"
              [pageSizeOptions]="pageSizeOptions"
              [selectedProductGroups]="selectedProductGroups"
              (productGroupType)="filterProductGroups($event)"
              (loadData)="loadProductGroupList($event)"
              (productGroupType)="filterProductGroups($event)"
            ></poss-web-rivaah-ashirwaad-pgm-view>
          </ng-container>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="pw-expansion-panel"
          [expanded]="expanded"
          *ngIf="
            enableTab(pgSchemeMappingTabDiscounts) &&
            !enableTab(pgMappingTabDiscounts) &&
            selectedDiscount !== discountTypeEnumRef.CATEGORY_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TSSS_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT &&
            selectedDiscount !== discountTypeEnumRef.ULP_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY &&
            selectedDiscount !== discountTypeEnumRef.ULP_ANNIVERSARY
          "
          (closed)="closed(18)"
          (opened)="opened(18)"
        >
          <mat-expansion-panel-header class="pw-expansion-panel__header">
            <mat-panel-title class="pw-expansion-panel__heading">
              {{
                'pw.discountExculdeConfig.schemeMappingView' | translate
              }}</mat-panel-title
            >
          </mat-expansion-panel-header>

          <ng-container *ngIf="excludeConfigs$ | async">
            <poss-web-scheme-mapping-view
              *ngIf="panelStatus[18]"
              [excludeSchemeCodes]="excludeSchemeCodes"
              [excludeSchemeCodesCount]="excludeSchemeCodesCount$ | async"
              [pageEvent]="pageEvent"
              [minPageSize]="minPageSize"
              [pageSizeOptions]="pageSizeOptions"
              (loadSchemeCodes)="loadExcludeConfigList($event)"
            ></poss-web-scheme-mapping-view>
          </ng-container>
        </mat-expansion-panel>
      </mat-accordion>
      <poss-web-loader *ngIf="isLoading$ | async"></poss-web-loader>
    </div>
    <div></div>
  </div>
</div>

<ng-template #requestSentSuccessNotificationTemplate>
  <div class="pw-text-center">
    <h3 class="pw-success-color">
      {{ 'pw.discountConfig.DiscoutntWorkflowSuccesssMsg' | translate }}
      {{ succesMsg }}
    </h3>
  </div>
</ng-template>
