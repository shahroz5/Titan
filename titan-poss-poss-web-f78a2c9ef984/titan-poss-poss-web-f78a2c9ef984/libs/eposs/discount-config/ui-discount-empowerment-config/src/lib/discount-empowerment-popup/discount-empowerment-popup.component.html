<div
  class="pw-confirmation-box"
  cdkDragBoundary=".cdk-overlay-container"
  cdkDragRootElement=".cdk-overlay-pane"
  cdkDrag
  cdkDragHandle
>
  <div class="row pw-confirmation-box__header">
    <div class="col-auto" *ngIf="!dialogData.mode">
      {{ 'pw.discEmpowermentConfig.addEmpowermentDetailHeader' | translate }}
    </div>
    <div class="col-auto" *ngIf="dialogData.mode">
      {{ 'pw.discEmpowermentConfig.editEmpowermentDetailHeader' | translate }}
    </div>
    <div class="col pw-text-right">
      <button
        mat-icon-button
        (click)="onClose()"
        class="pw-confirmation-box__icon-button"
      >
        <mat-icon>
          <span class="pw-i-24 pw-close-no-border-icon-24"></span>
        </mat-icon>
      </button>
    </div>
  </div>
  <form
    [formGroup]="empowermentDetailsForm"
    (ngSubmit)="onSubmit()"
    autocomplete="off"
  >
    <div class="pw-confirmation-box__body">
      <div class="pw-header-left-list">
        <div class="row pw-header-left-list__row">
          <div class="col-6 pw-header-left-list__header pt-3">
            {{ 'pw.discEmpowermentConfig.maxDiscLabel' | translate }}
          </div>
          <div class="col-6 pw-header-left-list__item">
            <mat-form-field
              appearance="outline"
              class="pw-full-bordered-input-box pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
            >
              <input
                matInput
                placeholder="0%"
                formControlName="discountPercent"
              />

              <mat-error
                *ngIf="
                  empowermentDetailsForm.get('discountPercent').errors &&
                  empowermentDetailsForm.get('discountPercent').errors
                    .errorArray
                "
              >
                <poss-web-error-info-tooltip
                  [errorMessage]="
                    empowermentDetailsForm.get('discountPercent').errors
                      .errorArray
                  "
                >
                </poss-web-error-info-tooltip>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row pw-header-left-list__row">
          <div class="col-6 pw-header-left-list__header pt-3">
            {{ 'pw.discEmpowermentConfig.minProductValueLabel' | translate }}
          </div>
          <div class="col-6 pw-header-left-list__item">
            <mat-form-field
              appearance="outline"
              class="pw-full-bordered-input-box pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
            >
              <input matInput formControlName="minValue" possWebAmountInput />

              <mat-error
                *ngIf="
                  empowermentDetailsForm.get('minValue').errors &&
                  empowermentDetailsForm.get('minValue').errors.errorArray
                "
              >
                <poss-web-error-info-tooltip
                  [errorMessage]="
                    empowermentDetailsForm.get('minValue').errors.errorArray
                  "
                >
                </poss-web-error-info-tooltip>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row pw-header-left-list__row">
          <div class="col-6 pw-header-left-list__header pt-3">
            {{ 'pw.discEmpowermentConfig.maxProductValueLabel' | translate }}
          </div>
          <div class="col-6 pw-header-left-list__item">
            <mat-form-field
              appearance="outline"
              class="pw-full-bordered-input-box pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
            >
              <input matInput formControlName="maxValue" possWebAmountInput />

              <mat-error
                *ngIf="
                  empowermentDetailsForm.get('maxValue').errors &&
                  empowermentDetailsForm.get('maxValue').errors.errorArray
                "
              >
                <poss-web-error-info-tooltip
                  [errorMessage]="
                    empowermentDetailsForm.get('maxValue').errors.errorArray
                  "
                >
                </poss-web-error-info-tooltip>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="pw-empower-dialog">
          <div class="row pw-header-left-list__row">
            <div class="col-6 pw-header-left-list__header">
              {{ 'pw.discEmpowermentConfig.metalChargesLabel' | translate }}
            </div>
            <div class="col-6 pw-header-left-list__item">
              <mat-checkbox formControlName="is_metal_charges"> </mat-checkbox>
            </div>
          </div>
          <div class="row pw-header-left-list__row">
            <div class="col-6 pw-header-left-list__header">
              {{ 'pw.discEmpowermentConfig.stoneLabel' | translate }}
            </div>
            <div class="col-6 pw-header-left-list__item">
              <mat-checkbox formControlName="is_stone_charges"> </mat-checkbox>
            </div>
          </div>

          <div class="row pw-header-left-list__row">
            <div class="col-6 pw-header-left-list__header">
              {{ 'pw.discEmpowermentConfig.makingChargesLabel' | translate }}
            </div>
            <div class="col-6 pw-header-left-list__item">
              <mat-checkbox formControlName="is_making_charges"> </mat-checkbox>
            </div>
          </div>
          <div class="row pw-header-left-list__row">
            <div class="col-6 pw-header-left-list__header">
              {{ 'pw.discEmpowermentConfig.ucpLabel' | translate }}
            </div>
            <div class="col-6 pw-header-left-list__item">
              <mat-checkbox formControlName="is_ucp_charges"> </mat-checkbox>
            </div>
          </div>
        </div>
      </div>
      <div
        *ngIf="showInvalidValueError"
        class="pw-error-color pw-confirmation-box__body-item mt-3"
      >
        {{ 'pw.discEmpowermentConfig.greaterThanMsg' | translate }}
      </div>
    </div>

    <div class="pw-text-right">
      <div class="row align-items-center">
        <div
          class="col-auto"
          *ngIf="
            !isConfigSelected() &&
            empowermentDetailsForm.get('is_making_charges').touched
          "
        >
          <p class="pw-error-color">
            {{
              'pw.discEmpowermentConfig.selectConfigDetailsLabel' | translate
            }}
          </p>
        </div>
        <div class="col-auto ml-auto">
          <button class="pw-btn pw-accent-btn">
            {{ 'pw.discEmpowermentConfig.save' | translate }}
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
