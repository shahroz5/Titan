<div class="container-fluid">
  <div class="row margin-bottom">
    <div class="col-12 col-lg-10 m-auto">
      <div class="pw-top-heading-container">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto">
            <div class="pw-top-heading-container__main-head">
              <a (click)="back()">
                <span class="pw-i-24 pw-back-arrow-icon-24"></span>
              </a>
              <span class="pw-i-36 pw-location-icon-36"></span>
              <div>
                <h2>
                  {{ 'pw.discountConfig.offerConfigurationLabel' | translate }}
                </h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.discountConfig.configurationLabel' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-auto mt-2">
          <div class="pw-mont-semibold-14">
            {{ 'pw.discountConfig.discConfigLabel' | translate }}
          </div>
        </div>
        <div *ngIf="!discountWorkflow" class="col-lg-6 col-auto ml-auto">
          <div
            class="pw-form-card pw-form-card__padding-10 pw-form-card__margin-bottom"
          >
            <div class="row no-gutters align-items-center">
              <div class="col-auto">
                <span class="pw-i-24 pw-alaram-icon-24"></span>
              </div>
              <div class="col pw-error-color">
                {{ 'pw.discountConfig.publishMsg' | translate }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <poss-web-discount-details-header
        *ngIf="discountDetails$ | async"
        [discountTypes]="discountTypes"
        [discountWorkflow]="discountWorkflow"
        [tabType]="tabType"
        [clubbingDiscountTypes]="clubbingDiscountTypes"
        [approvers]="approvers"
        [applicableLevels]="applicableLevels"
        [subBrands]="subBrandsdropDown"
        [brands]="brandsDropDown"
        [discountDetails]="discountDetails$ | async"
        [disable]="disable"
        [isLocationData]="isLocationData"
        [isCategoryPgData]="isCategoryPgData"
        [isSlabData]="isSlabData"
        [uploadedFaqFileData]="uploadedFaqFileData$ | async"
        [downloadFileResponse]="downloadFileResponse$ | async"
        (brandCode)="loadSubBrands($event)"
        (formOutput)="addDetails($event)"
        (discountSelected)="getSelectedDiscount($event)"
        (isActiveValue)="isActiveValue($event)"
        (formChanged)="checkHeaderChange($event)"
        (faqFileUpload)="faqFileUpload($event)"
        (faqFileDownload)="faqFileDownload($event)"
      ></poss-web-discount-details-header>

      <div
        *ngIf="!saveHeaderData"
        [ngClass]="params === 'new' ? 'pw-disablecontent' : ''"
      >
        <div class="pw-tab mt-4">
          <ul class="pw-tab__list">
            <li class="pw-tab__list-item">
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.DISCOUNT_APPILICABLE)
                "
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.DISCOUNT_APPILICABLE
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.discApplicableLabel' | translate }}
                </h5>
              </a>
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(empowermentConfigTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.EMPOWERMENT_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.EMPOWERMENT_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.empowermentConfigLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(slabConfigTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.SLAB_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.SLAB_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.slabConfigLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(pgMappingTabDiscounts)"
            >
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING)
                "
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.prodGroupMappingLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(pcMappingTabDiscounts)"
            >
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.PRODUCT_CATEGORY_MAPPING)
                "
                [class.pw-is-active-bar]="
                  selectedTab ===
                  discountConfigTabEnumRef.PRODUCT_CATEGORY_MAPPING
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.prodCategoryLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(referBestDealTabDiscounts)"
            >
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.REFER_BEST_DEAL_DISC)
                "
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.REFER_BEST_DEAL_DISC
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.referBestDealLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(excludeTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.EXCLUDE_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.EXCLUDE_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.excludeLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(pgSchemeMappingTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.SCHEME_MAPPING)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.SCHEME_MAPPING
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.schemeMappingLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(locationMappingTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.LOCATION_MAPPING)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.LOCATION_MAPPING
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.locationMappingLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(exchangeOfferTabDiscounts)"
            >
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.EXCHANGE_OFFER_CONFIG)
                "
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.EXCHANGE_OFFER_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.exchangeOfferConfigLabel' | translate }}
                </h5></a
              >
            </li>
            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(tsssConfigTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.TSSS_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.TSSS_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.tsssConfigLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(maxConfigTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.MAX_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.MAX_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.maxAllowedValuesLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(rivaahMaxConfigTabDiscounts) && isRiva === true"
            >
              <a
                (click)="
                  changeTab(discountConfigTabEnumRef.RIVAAH_CARD_DISCOUNT)
                "
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.RIVAAH_CARD_DISCOUNT
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.rivaahCardDiscLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(ageConfigTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.AGE_CONFIG)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.AGE_CONFIG
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.lotAgeBinAgeConfigLabel' | translate }}
                </h5></a
              >
            </li>

            <li
              class="pw-tab__list-item"
              *ngIf="enableTab(applicableThemeTabDiscounts)"
            >
              <a
                (click)="changeTab(discountConfigTabEnumRef.APPLICABLE_THEME)"
                [class.pw-is-active-bar]="
                  selectedTab === discountConfigTabEnumRef.APPLICABLE_THEME
                "
              >
                <h5 class="pw-tab__item">
                  {{ 'pw.discountConfig.applicableThemeLabel' | translate }}
                </h5></a
              >
            </li>
          </ul>
        </div>
        <div>
          <poss-web-discount-empowerment-config
            *ngIf="selectedTab === discountConfigTabEnumRef.EMPOWERMENT_CONFIG"
            [empowerConfigDetailsList]="empowerConfigDetailsList"
            [discountDetails]="discountDetails"
            (add)="saveEmpowermentDetails($event)"
            (delete)="deleteEmpowermentDetails($event)"
            (valueUpdate)="updateEmpowermentDiscountDetails($event)"
          >
          </poss-web-discount-empowerment-config>
          <poss-web-discount-product-category-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.PRODUCT_CATEGORY_MAPPING
            "
            [mappedProductCategory]="productCategories$ | async"
            [allMappedProductCategory]="selectedProductCategories"
            [discountWorkflow]="discountWorkflow"
            [tabType]="tabType"
            [totalElements]="totalProductCategories$ | async"
            [pageEvent]="productCategoryPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [discountDetails]="discountDetails"
            (loadMapperPC)="loadProductCategoryList($event)"
            (add)="mapProductCategories($event)"
            (delete)="deleteProductCategory($event)"
            (activate)="updateProductCategoryStatus($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
          ></poss-web-discount-product-category-mapping>
          <poss-web-discount-exclude-config
            *ngIf="selectedTab === discountConfigTabEnumRef.EXCLUDE_CONFIG"
            [excludeItemCodes]="excludeItemCodes"
            [excludeThemeCodes]="excludeThemeCodes"
            [excludeItemCodesCount]="totalExcludeItemCodes$ | async"
            [pageEvent]="pageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [excludeComplexity]="excludeComplexity"
            [excludeMC]="excludeMC"
            [currencyCode]="currencyCode"
            [discountDetails]="discountDetails"
            (addThemeCode)="mapExcludeThemes($event)"
            (deleteThemeCode)="deleteExcludeThemes($event)"
            (paginator)="paginate($event)"
            (activateThemeCode)="updateThemeCodeStatus($event)"
            (excludeType)="loadExcludeConfigList($event)"
            (loadItemCodes)="loadExcludeItemCodes($event)"
            (downLoadFormat)="downLoadFormatFn()"
            (uploadItemCodes)="uploadItemCodesFn($event)"
            (activateExcludeType)="updateExcludeTypeStatus($event)"
            (deleteExcludeComplexity)="mapExcludeTypes($event)"
            (saveExcludeComplexity)="mapExcludeTypes($event)"
            (deleteExcludeMC)="mapExcludeTypes($event)"
            (saveExcludeMC)="mapExcludeTypes($event)"
          >
          </poss-web-discount-exclude-config>
          <poss-web-discount-scheme-mapping
            *ngIf="selectedTab === discountConfigTabEnumRef.SCHEME_MAPPING"
            [excludeSchemeCodes]="excludeSchemeCodes"
            [excludeSchemeCodesCount]="totalExcludeTypeCount$ | async"
            [pageEvent]="pageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [discountDetails]="discountDetails"
            (addSchemeCode)="mapExcludeThemes($event)"
            (deleteSchemeCode)="deleteExcludeThemes($event)"
            (paginator)="paginate($event)"
            (activateThemeCode)="updateThemeCodeStatus($event)"
            (excludeType)="loadExcludeConfigList($event)"
            (activateSchemeCode)="updateExcludeTypeStatus($event)"
          >
          </poss-web-discount-scheme-mapping>
          <poss-web-discount-applicable
            *ngIf="
              selectedTab === discountConfigTabEnumRef.DISCOUNT_APPILICABLE &&
                discountDetails$ | async
            "
            [params]="params"
            [config]="discountDetails$ | async"
            [selectedDiscount]="selectedDiscount"
            [isRiva]="isRiva"
            [currencyCode]="currencyCode"
            [discountTypes]="discountTypes"
            [discountDetails]="discountDetails"
            [clubbingDiscountTypes]="clubbingDiscountTypes"
            [durations]="durations$"
            [discountDetails]="discountDetails"
            (formDirty)="formDirty($event)"
            (save)="discountApplicableChange($event)"
          ></poss-web-discount-applicable>
          <poss-web-discount-product-group-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING &&
              selectedDiscount !== discountTypeEnumRef.CATEGORY_DISCOUNT &&
              selectedDiscount !==
                discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT &&
              selectedDiscount !== discountTypeEnumRef.TSSS_DISCOUNT &&
              selectedDiscount !== discountTypeEnumRef.EMPLOYEE_DISCOUNT &&
              selectedDiscount !== discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT &&
              selectedDiscount !== discountTypeEnumRef.ULP_BIRTHDAY &&
              selectedDiscount !== discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY &&
              selectedDiscount !== discountTypeEnumRef.ULP_ANNIVERSARY &&
              selectedDiscount !== discountTypeEnumRef.RIVAAH_ASHIRWAAD_DISCOUNT
            "
            [productGroups]="productGroups$ | async"
            [productGroupTypes]="productGroupTypes"
            [totalElements]="totalProductGroups$ | async"
            [selectedProductGroups]="selectedProductGroups"
            [pageEvent]="productGroupPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [discountDetails]="discountDetails"
            [discountWorkflow]="discountWorkflow"
            [tabType]="tabType"
            (loadData)="loadProductGroupList($event)"
            (add)="mapProductGroups($event)"
            (delete)="deleteProductGroup($event)"
            (activate)="updateProductGroupsStatus($event)"
            (productGroupType)="filterProductGroups($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
          ></poss-web-discount-product-group-mapping>
          <poss-web-category-discount-product-group-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING &&
              (selectedDiscount === discountTypeEnumRef.CATEGORY_DISCOUNT ||
                selectedDiscount === discountTypeEnumRef.TSSS_DISCOUNT ||
                selectedDiscount === discountTypeEnumRef.EMPLOYEE_DISCOUNT ||
                selectedDiscount ===
                  discountTypeEnumRef.TATA_EMPLOYEE_DISCOUNT ||
                selectedDiscount === discountTypeEnumRef.ULP_BIRTHDAY ||
                selectedDiscount === discountTypeEnumRef.ULP_SPOUSE_BIRTHDAY ||
                selectedDiscount === discountTypeEnumRef.ULP_ANNIVERSARY)
            "
            [currencyCode]="currencyCode"
            [pgConfigValuePerWeightType]="pgConfigValuePerWeightType"
            [abCoData]="abCoData"
            [pageSizeOptions]="pageSizeOptions"
            [minPageSize]="minPageSize"
            [configItemList]="categoryDiscountPGConfigItems"
            [isRiva]="isRiva"
            [discountWorkflow]="discountWorkflow"
            [mainTabType]="tabType"
            [isABOfferApplicable]="isABOfferApplicable"
            [isCOOfferApplicable]="isCOOfferApplicable"
            [isPreviewApplicable]="isPreviewApplicable"
            [selectedProductGroups]="
              discountConfigFacade.getDiscountComponentProductGroups()
            "
            [totalElements]="
              discountConfigFacade.getDiscountComponentPGConfigCount() | async
            "
            [discountDetails]="discountDetails"
            (update)="updatePGMappingWithCharges($event)"
            (delete)="deletePGMappingWithCharges($event)"
            (activate)="activatePGMappingWithCharges($event)"
            (loadProductGroups)="loadProductGroups($event)"
            (updateProductGroups)="updateProductGroups($event)"
            (abCoUpdate)="pgMappingAbCoValue($event)"
            (loadProducGroup)="loadPGMappingWithCharges($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
            (getProductGroupDetails)="getProductGroupDetails()"
          >
          </poss-web-category-discount-product-group-mapping>
          <poss-web-exchange-offer-discount-product-group-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING &&
              selectedDiscount === discountTypeEnumRef.EXCHANGE_OFFER_DISCOUNT
            "
            [productGroupTypes]="productGroupTypes"
            [selectedDiscount]="selectedDiscount"
            [mappedProductGroups]="productGroups$ | async"
            [totalElements]="totalProductGroups$ | async"
            [discountWorkflow]="discountWorkflow"
            [tabType]="tabType"
            [pageEvent]="productGroupPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [selectedProductGroups]="selectedProductGroups"
            [discountDetails]="discountDetails"
            (productGroupType)="filterProductGroups($event)"
            (activate)="updateProductGroupsStatus($event)"
            (loadData)="loadProductGroupList($event)"
            (add)="mapExchangeOfferProductGroups($event)"
            (update)="updateExchangeOfferProductGroupsKaratage($event)"
            (delete)="deleteProductGroup($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
          >
          </poss-web-exchange-offer-discount-product-group-mapping>
          <poss-web-ui-discount-rivaah-ashirwaad-product-group-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.PRODUCT_GROUP_MAPPING &&
              selectedDiscount === discountTypeEnumRef.RIVAAH_ASHIRWAAD_DISCOUNT
            "
            [productGroupTypes]="productGroupTypes"
            [selectedDiscount]="selectedDiscount"
            [mappedProductGroups]="productGroups$ | async"
            [totalElements]="totalProductGroups$ | async"
            [pageEvent]="productGroupPageEvent"
            [discountWorkflow]="discountWorkflow"
            [tabType]="tabType"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [selectedProductGroups]="selectedProductGroups"
            [discountDetails]="discountDetails"
            (productGroupType)="filterProductGroups($event)"
            (activate)="updateProductGroupsStatus($event)"
            (loadData)="loadProductGroupList($event)"
            (add)="mapExchangeOfferProductGroups($event)"
            (update)="updateExchangeOfferProductGroupsKaratage($event)"
            (delete)="deleteProductGroup($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
          >
          </poss-web-ui-discount-rivaah-ashirwaad-product-group-mapping>
          <poss-web-discount-location-mapping
            *ngIf="
              selectedTab === discountConfigTabEnumRef.LOCATION_MAPPING &&
              selectedDiscount !== discountTypeEnumRef.EMPOWERMENT_DISCOUNT
            "
            [isPreviewApplicable]="isPreviewApplicable"
            [isDateRangeApplicable]="isDateRangeApplicable()"
            [allSelectedLocations]="selectedLocations"
            [mappedLocation]="invalidSearch ? [] : (mappedLocations$ | async)"
            [totalElements]="totalLocations$ | async"
            [pageEvent]="locationPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [levels]="selectedLevels"
            [discountDetails]="discountDetails"
            (paginator)="paginate($event)"
            (loadData)="loadLocationList($event)"
            (clear)="clearLocationList($event)"
            (add)="mapLocations($event)"
            (edit)="updateLocationDateRange($event)"
            (activate)="editLocations($event)"
            (delete)="deleteLocations($event)"
          ></poss-web-discount-location-mapping>

          <poss-web-refer-best-deal-discount
            *ngIf="
              selectedTab === discountConfigTabEnumRef.REFER_BEST_DEAL_DISC &&
                bestDealDiscount$ | async
            "
            [selectedDiscounts]="selectedBestDealDiscount"
            [allDiscounts]="bestDealDiscount$ | async"
            [totalElements]="totalBestDealDiscount$ | async"
            [totalSelectedElements]="totalSelectedBestDealDiscount$ | async"
            [pageEvent]="pageEvent"
            [minPageSize]="minPageSize"
            [discountDetails]="discountDetails"
            [pageSizeOptions]="pageSizeOptions"
            (loadBestDealDiscount)="loadBestDealDiscount($event)"
            (add)="addBestDealDiscount($event)"
            (delete)="deleteBestDealDiscount($event)"
            (activate)="updateBestDealDiscountStatus($event)"
          >
          </poss-web-refer-best-deal-discount>
          <poss-web-lot-bin-age-config
            *ngIf="selectedTab === discountConfigTabEnumRef.AGE_CONFIG"
            [type]="selectedTab"
            [config]="lotBinAgeConfig"
            [discountDetails]="discountDetails"
            (save)="binAgeSave($event)"
          >
          </poss-web-lot-bin-age-config>

          <poss-web-max-allowed-value
            *ngIf="selectedTab === discountConfigTabEnumRef.MAX_CONFIG"
            [config]="maxValueConfig"
            [type]="selectedDiscount"
            [currencyCode]="currencyCode"
            [discountDetails]="discountDetails"
            (save)="maxValConfig($event)"
          >
          </poss-web-max-allowed-value>

          <poss-web-riva-add-max-allowed-value
            *ngIf="
              selectedTab === discountConfigTabEnumRef.RIVAAH_CARD_DISCOUNT
            "
            [config]="addMaxValueConfig"
            [type]="selectedDiscount"
            [currencyCode]="currencyCode"
            [discountDetails]="discountDetails"
            (save)="rivaMaxValConfig($event)"
          >
          </poss-web-riva-add-max-allowed-value>
          <poss-web-discount-applicable-theme
            *ngIf="
              selectedTab === discountConfigTabEnumRef.APPLICABLE_THEME &&
                discountDetails$ | async
            "
            [config]="discountDetails$ | async"
            (save)="discountApplicableThemeChange($event)"
          >
          </poss-web-discount-applicable-theme>
          <poss-web-emp-discount-location
            *ngIf="
              selectedTab === discountConfigTabEnumRef.LOCATION_MAPPING &&
              selectedDiscount === discountTypeEnumRef.EMPOWERMENT_DISCOUNT
            "
            [allSelectedLocations]="selectedLocations"
            [mappedLocation]="invalidSearch ? [] : (mappedLocations$ | async)"
            [totalElements]="totalLocations$ | async"
            [pageEvent]="locationPageEvent"
            [minPageSize]="minPageSize"
            [pageSizeOptions]="pageSizeOptions"
            [levels]="selectedLevels"
            [discountDetails]="discountDetails"
            (paginator)="paginate($event)"
            (loadLocationList)="loadLocationList($event)"
            (clear)="loadLocationList($event)"
            (add)="mapEmpowermentLocations($event)"
            (edit)="updateLocationValue($event)"
            (activate)="editLocations($event)"
            (delete)="deleteLocations($event)"
          ></poss-web-emp-discount-location>

          <poss-web-discount-exchange-offer-config
            *ngIf="
              selectedTab === discountConfigTabEnumRef.EXCHANGE_OFFER_CONFIG
            "
            [discountDetails]="discountDetails$ | async"
            (formOutput)="discountApplicableChange($event)"
            (formDirty)="formDirty($event)"
          ></poss-web-discount-exchange-offer-config>
          <poss-web-discount-tsss-config
            *ngIf="
              selectedTab === discountConfigTabEnumRef.TSSS_CONFIG &&
                discountDetails$ | async
            "
            [config]="discountDetails$ | async"
            [isComputed]="isTsssComputed"
            (save)="tsssConfigChange($event)"
            (computesTsssConfig)="computesTsssConfig($event)"
            (downloadTSSSCoupons)="downloadTSSSCoupons($event)"
          >
          </poss-web-discount-tsss-config>
          <poss-web-discount-slab-config
            *ngIf="selectedTab === discountConfigTabEnumRef.SLAB_CONFIG"
            [currencyCode]="currencyCode"
            [slabConfig]="slabConfig"
            [abCoData]="abCoData"
            [discountWorkflow]="discountWorkflow"
            [mainTabType]="tabType"
            [slabConfigsItems]="slabConfigItems"
            [isABOfferApplicable]="isABOfferApplicable"
            [isCOOfferApplicable]="isCOOfferApplicable"
            [isPreviewApplicable]="isPreviewApplicable"
            [abCoData]="abCoData"
            [discountDetails]="discountDetails"
            [isRivaApplicable]="isRiva"
            (add)="saveSlabDetails($event)"
            (delete)="deleteSlabDetails($event)"
            (save)="saveSlabDiscountDetails($event)"
            (valueUpdate)="updateSlabDiscountDetails($event)"
            (getSlabValues)="getSlabDiscountDetails()"
            (activate)="updateStatus($event)"
            (discountBaseChange)="eventTesting($event)"
            (enableWorkflowNotification)="
              enableWorkflowNotificationevent($event)
            "
          >
          </poss-web-discount-slab-config>
        </div>
        <div *ngIf="saveHeaderData" class="pw-message pw-text-center mg-t-100">
          {{ 'pw.discountConfig.saveHeaderMsg' | translate }}
          <!-- Please save the details to proceed further -->
        </div>
        <div class="row mb-3 mt-4"></div>
      </div>
    </div>

    <poss-web-loader *ngIf="isLoading$ | async"></poss-web-loader>
  </div>
  <ng-template #confirmSuccessNotificationTemplate>
    <div class="pw-text-center">
      <h3 class="pw-success-color">
        {{ 'pw.fileStatus.fileUploadStatusMessage' | translate }}
        <u class="pw-pointer" (click)="fileStatus()">
          {{ 'pw.fileStatus.fileStatus' | translate }}</u
        >
      </h3>
    </div>
  </ng-template>

  <ng-template #requestSentSuccessNotificationTemplate>
    <div class="pw-text-center">
      <h3 class="pw-success-color">
        {{ 'pw.discountConfig.DiscoutntWorkflowSuccesssMsg' | translate }}
        {{ succesMsg }}
      </h3>
    </div>
  </ng-template>
</div>
