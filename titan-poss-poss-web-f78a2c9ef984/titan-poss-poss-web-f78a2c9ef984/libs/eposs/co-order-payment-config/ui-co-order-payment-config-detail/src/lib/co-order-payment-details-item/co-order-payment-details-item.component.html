<div class="pw-form-card">
  <div class="row align-items-center">
    <div class="col-auto">
      <div class="pw-form-card__item mb-0">
        <h4>
          {{
            'pw.coOrderPaymentConfig.orderPaymentPercentageDetails' | translate
          }}
        </h4>
      </div>
    </div>

    <div class="col-auto ml-auto">
      <div class="row align-items-center">
        <div class="col-auto mt-3">
          <a id="sort" (click)="openSortDailog()">
            <p>
              <span class="pw-i-16 pw-sort-icon-16 pw-filter-box__icon"></span>
              {{ 'pw.coOrderPaymentConfig.sortLable' | translate }}
            </p>
          </a>
        </div>

        <mat-form-field
          [formGroup]="searchForm"
          class="col-auto pw-search-bar mt-3"
        >
          <input
            type="text"
            matInput
            #searchBox
            formControlName="searchValue"
            placeholder="Search Product Group"
            class="pw-single-bordered-input"
          />
          <mat-icon matSuffix>
            <span
              class="pw-i-16 pw-search-icon-16"
              *ngIf="!searchForm.value.searchValue"
            ></span>
          </mat-icon>
          <mat-icon matSuffix (click)="clearSearch()">
            <span
              *ngIf="searchForm.value.searchValue"
              class="pw-i-10 pw-close-icon-16"
            ></span
          ></mat-icon>
        </mat-form-field>

        <div class="col-auto">
          <button
            class="pw-btn pw-primary-btn pw-add-button"
            (click)="openProductGroupMapping()"
          >
            <span class="pw-i-24 pw-add-icon-24"></span>
            {{ 'pw.weightTolerance.addProdGroupLabel' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
  <poss-web-top-info-panel
    *ngIf="isFocusing && focusedHeaderName"
    [isFocusing]="isFocusing"
    [focusedHeaderName]="focusedHeaderName"
    [currentRowData]="currentRowInfo"
  >
  </poss-web-top-info-panel>
  <ag-grid-angular
    class="pw-titan-poss-theme pw-ag-grid-table pw-order-payment-grid"
    [columnDefs]="columnDefs"
    domLayout="autoHeight"
    rowSelection="multiple"
    [rowMultiSelectWithClick]="true"
    [enableRangeSelection]="true"
    [suppressRowClickSelection]="true"
    [frameworkComponents]="getComponents()"
    (gridReady)="gridReady($event)"
    [defaultColDef]="defaultColDef"
    (selectionChanged)="onSelectionChanged($event)"
    (gridSizeChanged)="onGridSizeChanged()"
    (cellFocused)="onCellFocused($event)"
    (focusout)="focusOut($event)"
  >
  </ag-grid-angular>
  <mat-paginator
    class="pw-paginator"
    *ngIf="
      totalCount > minPageSize &&
      coOrderPaymentConfigDetails.length > 0 &&
      totalCount != 1
    "
    [length]="totalCount"
    [pageSize]="pageEvent.pageSize"
    [pageIndex]="pageEvent.pageIndex"
    showFirstLastButtons
    [pageSizeOptions]="pageSizeOptions"
    (page)="paginator.emit($event)"
  >
  </mat-paginator>
</div>

<div class="row mb-3">
  <div class="col-auto">
    <button
      [disabled]="disableEdit"
      (click)="onEdit()"
      class="pw-btn pw-accent-btn"
    >
      {{ 'pw.coOrderPaymentConfig.editPercentage' | translate }}
    </button>
  </div>
  <div class="col-auto ml-auto">
    <button
      (click)="openLocationMapping()"
      [disabled]="configId === 'new'"
      class="pw-btn pw-primary-btn"
    >
      {{ 'pw.coOrderPaymentConfig.locationMapping' | translate }}
    </button>
  </div>
  <div class="col-auto">
    <button
      [disabled]="
        parentForm.value.length
          ? !(parentForm.valid && formData && !parentForm.pristine)
          : true
      "
      (click)="onSave()"
      class="pw-btn pw-accent-btn"
    >
      {{ 'pw.coOrderPaymentConfig.saveLable' | translate }}
    </button>
  </div>
</div>
