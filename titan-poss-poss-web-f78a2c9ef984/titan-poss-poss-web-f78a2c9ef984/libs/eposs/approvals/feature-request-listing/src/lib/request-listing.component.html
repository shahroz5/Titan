<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-lg-10 m-auto">
      <div class="pw-top-heading-container">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto pr-0">
            <a (click)="back()">
              <span class="pw-i-24 pw-back-arrow-icon-24"></span>
            </a>
          </div>
          <div class="col-auto pl-0">
            <div class="pw-top-heading-container__main-head">
              <span class="pw-i-36 pw-location-icon-36"></span>
              <div>
                <h2>
                  {{ 'pw.approvals.requestsTitle' | translate }}
                </h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.approvals.approval' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>
      </div>

      <ng-container>
        <div class="row align-items-center">
          <div class="col-auto ml-auto">
            <button
              *ngIf="!selectedLocation"
              mat-flat-button
              class="pw-btn pw-cta-btn"
              (click)="openLocationPopup()"
            >
              <div class="row">
                <div class="col-auto">
                  <p>
                    {{ 'pw.approvals.selectLocationCode' | translate }}
                  </p>
                </div>
                <div class="col-auto ml-auto">
                  <span class="pw-i-16 pw-location-icon-16"></span>
                </div>
              </div>
            </button>

            <button
              *ngIf="selectedLocation"
              mat-flat-button
              class="pw-btn pw-cta-btn"
            >
              <div class="row">
                <div class="col-auto">
                  <p>
                    {{ selectedLocation.description }}
                  </p>
                </div>
                <div class="col-auto ml-auto">
                  <a>
                    <span
                      class="pw-i-10 pw-close-icon-16"
                      (click)="clearPopup()"
                    ></span>
                  </a>
                </div>
              </div>
            </button>
          </div>

          <mat-form-field
            class="col-lg-3 col-sm-4 pw-search-bar"
            floatLabel="never"
          >
            <input
              matInput
              class="pw-input-box"
              placeholder="{{
                'pw.roleCountList.reqSearchPlaceholder' | translate
              }}"
              [formControl]="searchFormControl"
            />
            <mat-icon matSuffix>
              <span
                *ngIf="!searchFormControl.value"
                class="pw-i-16 pw-search-icon-16"
              ></span>
              <span
                (click)="searchFormControl.patchValue('')"
                *ngIf="searchFormControl.value"
                class="pw-i-10 pw-close-icon-16"
              ></span
            ></mat-icon>
          </mat-form-field>
        </div>

        <poss-web-request-list
          [roleCountRequestList]="roleCountRequestList$ | async"
          [roleCountRequestListLength]="roleCountRequestListLength$ | async"
          [isBTQuser]="false"
          (loadMoreRequests)="
            loadRoleCountRequestList($event.pageNumber, $event.pageSize)
          "
          [permissions$]="permissions$"
        ></poss-web-request-list>
        <poss-web-loader *ngIf="isLoading$ | async"></poss-web-loader>
      </ng-container>
    </div>
  </div>
</div>
