<div
  class="container-fluid"
  [class.pw-overlay-notification-gutter]="hasNotification"
>
  <div class="row">
    <div class="col-lg-1 col-12"></div>
    <div class="col-lg-10 col-12 m-auto">
      <div class="pw-top-heading-container">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto">
            <div class="pw-top-heading-container__main-head">
              <a (click)="inStockUrl()">
                <span class="pw-i-24 pw-back-arrow-icon-24"></span>
              </a>
              <span class="pw-i-36 pw-instock-icon-36"></span>
              <div>
                <h2>{{ 'pw.instock.title' | translate }}</h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.instock.titlehead' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>
      </div>
      <h3 class="mb-3">Bin Details</h3>

      <div class="pw-tab">
        <ul class="pw-tab__list">
          <li class="pw-tab__list-item">
            <a
              [class.pw-is-active-bar]="
                binDetailsRequestType === binDetailsTypesEnumRef.HISTORY
              "
              (click)="
                changeBinDetailsRequestType(binDetailsTypesEnumRef.HISTORY)
              "
            >
              <h5 class="pw-tab__item">
                History
                <span class="pw-fourth-color"
                  >({{ historyTotalCount$ | async }})</span
                >
              </h5></a
            >
          </li>
        </ul>
      </div>

      <div
        [ngClass]="
          binDetailsRequestType === binDetailsTypesEnumRef.HISTORY
            ? ''
            : 'hidden'
        "
        class="row mt-3 align-items-center"
      >
        <div class="col-auto ml-auto">
          <a (click)="advancedFilter($event)">
            <p>
              <span
                class="pw-i-24 pw-filter-icon-24 pw-filter-box__icon"
                [ngClass]="
                  !(
                    (historyFormData?.startDate == null ||
                      historyFormData?.startDate == '') &&
                    (historyFormData?.endDate == null ||
                      historyFormData?.endDate == '') &&
                    (historyFormData?.reqFiscalYear == null ||
                      historyFormData?.reqFiscalYear == '') &&
                    (historyFormData?.statuses == null ||
                      historyFormData?.statuses == '')
                  )
                    ? 'pw-filter-icon-color-24'
                    : ''
                "
              ></span>
              Filter
            </p>
          </a>
        </div>
        <div class="col-lg-3 col-4">
          <mat-form-field class="pw-search-bar" floatLabel="never">
            <input
              #searchBox
              matInput
              class="pw-input-box"
              placeholder="
              search by Bin name
            "
              [formControl]="searchFormControl"
            />
            <mat-icon matSuffix>
              <span
                *ngIf="!searchFormControl.value"
                class="pw-i-16 pw-search-icon-16"
              ></span
            ></mat-icon>
            <mat-icon matSuffix (click)="clearSearch()">
              <span
                *ngIf="searchFormControl.value"
                class="pw-i-10 pw-close-icon-16"
              ></span
            ></mat-icon>
          </mat-form-field>
        </div>
      </div>

      <div *ngIf="binDetailsRequestType === binDetailsTypesEnumRef.HISTORY">
        <poss-web-card-list
          *ngIf="binDetailsRequestType === binDetailsTypesEnumRef.HISTORY"
          [count]="historyTotalCount$ | async"
          [dataList]="history$ | async"
          [pageSize]="pageSize"
          (loadMore)="loadRequests($event)"
          (selected)="selected($event)"
        >
          <ng-template let-item="data">
            <poss-web-card-title>
              <h4>Doc No: {{ item?.reqDocNo }}</h4>
            </poss-web-card-title>
            <poss-web-card-subtitle
              >Bin: {{ item?.binName }}
            </poss-web-card-subtitle>

            <poss-web-card-content>
              <p [ngClass]="getStatus(item.status ? item.status : '')">
                {{ 'pw.stockIssue.status' | translate }}:{{
                  status | titlecase
                }}
              </p>
              <p>Requested Date:{{ item?.reqDocDate | dateFormatter }}</p>
            </poss-web-card-content>
          </ng-template>
        </poss-web-card-list>
        <h3
          class="pw-text-center m-5"
          *ngIf="
            isLoadingHistory === false &&
            isLoading === false &&
            (historyTotalCount$ | async) == 0 &&
            binDetailsRequestType === binDetailsTypesEnumRef.HISTORY
          "
        >
        {{ noDataFoundMessage }}
        </h3>
      </div>

      <poss-web-loader *ngIf="isLoading || isLoadingHistory"> </poss-web-loader>
    </div>

    <div class="mb-5"></div>

    <div class="col-lg-1 col-12"></div>
  </div>
</div>
