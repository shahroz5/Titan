<form class="pw-confirmation-box" autocomplete="off">
  <div
    class="row pw-confirmation-box__header"
    cdkDragBoundary=".cdk-overlay-container"
    cdkDragRootElement=".cdk-overlay-pane"
    cdkDrag
    cdkDragHandle
  >
    <div class="col-auto">
      {{ formHeadingKey | translate }}
    </div>
    <div class="col pw-text-right">
      <button
        class="pw-confirmation-box__icon-button"
        mat-icon-button
        (click)="close()"
      >
        <mat-icon>
          <span class="pw-i-24 pw-close-no-border-icon-24"></span>
        </mat-icon>
      </button>
    </div>
  </div>
  <div class="pw-confirmation-box__body" [formGroup]="gstMappingForm">
    <div class="row">
      <poss-web-select-dropdown
        class="col-12"
        placeholder="   {{ 'pw.gstMapping.transactionTypeLabel' | translate }}"
        [control]="gstMappingForm.get('txnType')"
        [options]="txnTypes"
        [required]="!isFilter"
      >
      </poss-web-select-dropdown>
    </div>

    <div class="row" *ngIf="!isFilter">
      <mat-form-field class="col-12">
        <mat-label>
          {{ 'pw.gstMapping.applicableTaxLabel' | translate }}</mat-label
        >
        <mat-select formControlName="applicableTax" required multiple>
          <mat-option *ngFor="let tax of data.taxes" [value]="tax.taxCode">
            {{ tax.taxCode }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="
            gstMappingForm.get('applicableTax').errors &&
            gstMappingForm.get('applicableTax').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="
              gstMappingForm.get('applicableTax').errors.errorArray
            "
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row">
      <poss-web-select-dropdown
        class="col-12"
        placeholder="   {{
          'pw.gstMapping.sourceLocationTypeFormLabel' | translate
        }}"
        [control]="gstMappingForm.get('srcLocationType')"
        [options]="srcLocationTypes"
        [required]="!isFilter"
      >
      </poss-web-select-dropdown>
    </div>

    <div class="row">
      <poss-web-select-dropdown
        class="col-12"
        placeholder="   {{
          'pw.gstMapping.destinationLocationTypeFormLabel' | translate
        }}"
        [control]="gstMappingForm.get('destLocationType')"
        [options]="destLocationTypes"
      >
      </poss-web-select-dropdown>
    </div>

    <div class="row">
      <poss-web-select-dropdown
        class="col-12"
        placeholder="   {{ 'pw.gstMapping.customerTypeFormLabel' | translate }}"
        [control]="gstMappingForm.get('customerType')"
        [options]="customerTypes"
        [required]=false
      >
      </poss-web-select-dropdown>
    </div>

    <div class="row" *ngIf="!isFilter">
      <mat-form-field class="col-12">
        <mat-label>
          {{ 'pw.gstMapping.sourceLocationApplicableTaxFormLabel' | translate }}
        </mat-label>

        <mat-select formControlName="srcLocationApplicableTax" multiple>
          <mat-option *ngFor="let tax of data.taxes" [value]="tax.taxCode">
            {{ tax.taxCode }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="
            gstMappingForm.get('srcLocationApplicableTax').errors &&
            gstMappingForm.get('srcLocationApplicableTax').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="
              gstMappingForm.get('srcLocationApplicableTax').errors.errorArray
            "
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row" *ngIf="!isFilter">
      <mat-form-field class="col-12">
        <mat-label>
          {{ 'pw.gstMapping.destLocApplicableTaxFormLabel' | translate }}
        </mat-label>

        <mat-select formControlName="destLocationApplicableTax" multiple>
          <mat-option *ngFor="let tax of data.taxes" [value]="tax.taxCode">
            {{ tax.taxCode }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="
            gstMappingForm.get('destLocationApplicableTax').errors &&
            gstMappingForm.get('destLocationApplicableTax').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="
              gstMappingForm.get('destLocationApplicableTax').errors.errorArray
            "
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
    </div>

    <div class="row" *ngIf="isFilter">
      <poss-web-select-dropdown
        class="col-12"
        placeholder="   {{ 'pw.gstMapping.activeLabel' | translate }}"
        [control]="gstMappingForm.get('isActive')"
        [options]="isActiveValues"
      >
      </poss-web-select-dropdown>
    </div>

    <div class="row px-4" *ngIf="!isFilter">
      <mat-checkbox formControlName="isSameState">
        {{ 'pw.gstMapping.isSameStateLabel' | translate }}
      </mat-checkbox>
    </div>

    <div class="row px-4" *ngIf="!isFilter">
      <mat-checkbox formControlName="srcTaxApplicable">
        {{ 'pw.gstMapping.isSourceTaxApplicableFormLabel' | translate }}
      </mat-checkbox>
    </div>
    <div class="row px-4" *ngIf="!isFilter">
      <poss-web-toggle-button
        [isActive]="isActive"
        (changeEvent)="isActive = $event.checked"
      >
      </poss-web-toggle-button>
    </div>
  </div>
  <div class="pw-confirmation-box__footer mt-0">
    <div class="row pw-confirmation-box__footer-border no-gutters">
      <div class="col-auto pw-confirmation-box__footer-item">
        <button class="pw-btn pw-primary-btn" (click)="clear()">
          {{ 'pw.gstMapping.clearButton' | translate }}
        </button>
      </div>

      <div class="col-auto pw-confirmation-box__footer-item">
        <button
          class="pw-btn pw-accent-btn"
          [disabled]="!gstMappingForm.valid"
          (click)="submit()"
        >
          {{ buttonTextKey | translate }}
        </button>
      </div>
    </div>
  </div>
</form>
