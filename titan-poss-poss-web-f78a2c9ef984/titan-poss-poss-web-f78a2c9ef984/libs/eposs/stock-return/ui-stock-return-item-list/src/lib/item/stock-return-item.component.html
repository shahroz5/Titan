<div [formGroup]="itemForm" class="row no-gutters">
  <div class="col-auto pw-list-card__checkbox" *ngIf="cart == true">
    <mat-checkbox formControlName="isItemSelected" (change)="selectItem()">
    </mat-checkbox>
  </div>
  <poss-web-item-details
    [item]="itemData"
    [toLoadImageUrlFromAPI]="true"
    [showHallmarkDetails]="true"
    (loadImageEvent)="loadImage()"
  >
  </poss-web-item-details>
  <div class="col-auto pw-list-card__item">
    <div class="row no-gutters pw-input-group">
      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.returnInvoiceCFA.itemQuantityLableText' | translate }}
        </div>
        <input
          type="number"
          class="pw-bg-input-box pw-input-group__item-border-right"
          formControlName="measuredQuantity"
          readonly
        />
      </div>
      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          <span
            >{{ 'pw.returnInvoiceCFA.itemWeightLableText' | translate }} ({{
              item.weightUnit
            }})</span
          >
        </div>
        <div class="pw-input-group__item-label"></div>
        <input
          possWebWeightInput
          class="pw-bg-input-box"
          formControlName="measuredWeight"
          readonly
        />
      </div>

      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.returnInvoiceCFA.binPlaceHolderText' | translate }}
        </div>
        <input
          type="text"
          class="pw-bg-input-box pw-input-group__item-border-left"
          value="{{ item.binCode }}"
          readonly
        />
      </div>
      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label pw-input-box">
          {{ 'pw.stockIssueTepGep.finalValueLabel' | translate }}({{
            item?.currencyCode | currencySymbol
          }})
          <span
            class="pw-i-14 pw-info-icon-14"
            [matMenuTriggerFor]="priceDetailsInfoMenu"
          ></span>
        </div>
        <input
          type="text"
          class="pw-bg-input-box pw-input-group__item-border-left"
          value="{{ item?.finalValue | currencyFormatter: currencyCode:false }}"
          placeholder="{{ 'pw.stockIssueTepGep.finalValueLabel' | translate }}"
          readonly
        />
        <mat-menu
          #priceDetailsInfoMenu="matMenu"
          class="pw-overlay-notification-band__menu"
        >
          <div class="d-flex pw-menu-item__margin">
            <div class="d-flex flex-column pw-tertiary-color">
              <div
                *ngIf="item?.pricePerUnit && item?.pricePerUnit !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ 'pw.stockReceive.pricePerUnitLabel' | translate }}
              </div>
              <div
                *ngIf="item?.preTaxValue && item?.preTaxValue !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ 'pw.stockReceive.preTaxValueLabel' | translate }}
              </div>
              <div
                *ngIf="item?.totalTax && item?.totalTax !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ 'pw.stockReceive.totalTaxLabel' | translate }}
              </div>
            </div>
            <div class="d-flex flex-column mx-2 pw-tertiary-color">
              <div
                *ngIf="item?.pricePerUnit && item?.pricePerUnit !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                :
              </div>
              <div
                *ngIf="item?.preTaxValue && item?.preTaxValue !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                :
              </div>
              <div
                *ngIf="item?.totalTax && item?.totalTax !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                :
              </div>
            </div>
            <div class="d-flex flex-column pw-font-weight-bold pw-text-right">
              <div
                *ngIf="item?.pricePerUnit && item?.pricePerUnit !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ item?.pricePerUnit | currencyFormatter }}
              </div>
              <div
                *ngIf="item?.preTaxValue && item?.preTaxValue !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ item?.preTaxValue | currencyFormatter }}
              </div>
              <div
                *ngIf="item?.totalTax && item?.totalTax !== 0"
                class="pw-overlay-notification-band__menu-item"
              >
                {{ item?.totalTax | currencyFormatter }}
              </div>
            </div>
          </div>
        </mat-menu>
      </div>

      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.stockIssueTepGep.totalDiscountLabel' | translate }} ({{
            item?.currencyCode | currencySymbol
          }})
        </div>
        <input
          type="text"
          class="pw-bg-input-box pw-input-group__item-border-left"
          value="{{
            item?.itemLevelDiscount | currencyFormatter: currencyCode:false
          }}"
          placeholder="{{
            'pw.stockIssueTepGep.totalDiscountLabel' | translate
          }}"
          readonly
        />
      </div>
    </div>
  </div>

  <div *ngIf="cart" class="col-auto pw-list-card__right-container">
    <button mat-icon-button (click)="removeItem()">
      <mat-icon> <span class="pw-i-24 pw-close-icon-24"></span> </mat-icon>
    </button>
  </div>
</div>
<div class="row">
  <div class="col-auto ml-auto">
    <span *ngIf="item.availableQuantity == 0" class="pw-list-card__error-label">
      <span class="pw-i-16 pw-warning-icon-16"></span>
      {{ 'pw.returnInvoiceCFA.outOfStockText' | translate }}
    </span>
  </div>
</div>
