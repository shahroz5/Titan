<div class="row mb-4">
  <div class="col-auto ml-auto">
    <a (click)="fileInput.click()">
      <input
        [hidden]="true"
        #fileInput
        class="pw-hidden"
        type="file"
        (change)="uploadCn($event)"
      />
      <button class="pw-btn pw-primary-btn pw-form-card__upload-btn">
        <span class="pw-i-24 pw-upload-icon-24"> </span>
        UPLOAD CN SEARCH FILE
      </button>
    </a>
  </div>

  <div class="col-auto">
    <button
      (click)="downloadFile()"
      class="pw-btn pw-primary-btn pw-form-card__upload-btn"
    >
      <span class="pw-i-24 pw-download-icon-24"></span>DOWNLOAD CN SEARCH FILE
      FORMAT
    </button>
  </div>
</div>

<div class="pw-form-card" [formGroup]="CNSearchFormGroup">
  <div class="row">
    <mat-form-field class="col-lg-2 col-3">
      <mat-label> {{ 'pw.creditNote.cnNumberLabel' | translate }}</mat-label>
      <input
        matInput
        formControlName="cnNumber"
        class="pw-single-bordered-input"
        autocomplete="off"
      />
      <mat-error
        *ngIf="
          CNSearchFormGroup.get('cnNumber').errors &&
          CNSearchFormGroup.get('cnNumber').errors.errorArray
        "
      >
        <span
          *ngFor="
            let errorMesage of CNSearchFormGroup.get('cnNumber').errors
              .errorArray;
            let i = index
          "
        >
          <span *ngIf="i === 0"> {{ errorMesage }}</span>
          <poss-web-error-info-tooltip
            *ngIf="i > 0"
            [errorMessage]="errorMesage"
          ></poss-web-error-info-tooltip>
        </span>
      </mat-error>
      <mat-error
        class="pw-error-color"
        *ngIf="CNSearchFormGroup.get('cnNumber').hasError('required')"
        class="pw-error-color"
      >
        {{ 'pw.creditNote.mandatoryFieldLabel' | translate }}
      </mat-error>
    </mat-form-field>

    <poss-web-fiscal-year
      class="col-lg-2 col-3"
      [control]="CNSearchFormGroup.get('fiscalYear')"
      [currentFiscalYear]="currentFiscalYear"
      [placeHolder]="'pw.creditNote.searchByFiscalYearLabel' | translate"
      [disabled]="false"
    ></poss-web-fiscal-year>
    <mat-form-field class="col-lg-3 col-3">
      <mat-label> {{ 'pw.creditNoteDirect.location' | translate }}</mat-label>
      <input
        matInput
        formControlName="location"
        class="pw-single-bordered-input"
        autocomplete="off"
        possWebMaxLengthValidator
        name="locationField"
      />
      <mat-error
        *ngIf="
          CNSearchFormGroup.get('location').errors &&
          CNSearchFormGroup.get('location').errors.errorArray
        "
      >
        <span
          *ngFor="
            let errorMesage of CNSearchFormGroup.get('location').errors
              .errorArray;
            let i = index
          "
        >
          <span *ngIf="i === 0"> {{ errorMesage }}</span>
          <poss-web-error-info-tooltip
            *ngIf="i > 0"
            [errorMessage]="errorMesage"
          ></poss-web-error-info-tooltip>
        </span>
      </mat-error>
    </mat-form-field>

    <div class="col-auto ml-auto">
      <button
        class="pw-btn pw-accent-btn mt-2"
        [disabled]="CNSearchFormGroup.invalid"
        (click)="searchFn()"
      >
        {{ 'pw.creditNote.searchLabel' | translate }}
      </button>
    </div>
  </div>
</div>
