<form [formGroup]="tepProductGroupConfigDetailsForm" (ngSubmit)="onSubmit()">
  <div class="pw-form-card pw-form-card__margin-top">
    <div class="row">
      <div class="col-lg-3 col-3">
        <mat-form-field>
          <mat-label>{{
            'pw.tepProductGroupConfig.configName' | translate
          }}</mat-label>
          <input required matInput formControlName="configName" />
          <mat-error
            *ngIf="
              tepProductGroupConfigDetailsForm.get('configName').errors &&
              tepProductGroupConfigDetailsForm.get('configName').errors
                .errorArray
            "
          >
            <poss-web-error-info-tooltip
              [errorMessage]="
                tepProductGroupConfigDetailsForm.get('configName').errors
                  .errorArray
              "
            >
            </poss-web-error-info-tooltip>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-auto pw-detail-card__item pw-form-card__right-container">
        <poss-web-toggle-button
          [isActive]="checked"
          (changeEvent)="changeEvent($event)"
        ></poss-web-toggle-button>
      </div>
    </div>
  </div>
  <div class="pw-form-card">
    <div class="row align-items-center">
      <div class="col-auto mt-3">
        <div class="pw-font-weight-bold">
          {{ 'pw.tepProductGroupConfig.details' | translate }}
        </div>
      </div>
      <div class="col-auto ml-auto">
        <a id="sort" (click)="openSortDailog()" *ngIf="totalElements > 0">
          <p>
            <span class="pw-i-16 pw-sort-icon-16 pw-filter-box__icon"></span>
            {{ 'pw.tepProductGroupConfig.sortLable' | translate }}
          </p>
        </a>
      </div>
      <div class="col-lg-auto col-auto">
        <div class="pw-search-bar">
          <mat-form-field [formGroup]="searchForm">
            <input
              #searchBox
              matInput
              type="text"
              placeholder="Search Product Group"
              formControlName="searchValue"
            />
            <mat-icon matSuffix>
              <span
                class="pw-i-16 pw-search-icon-16"
                *ngIf="!searchForm.value.searchValue"
              ></span>
            </mat-icon>
            <mat-icon matSuffix (click)="clearSearch()">
              <span
                *ngIf="searchForm.value.searchValue"
                class="pw-i-10 pw-close-icon-16"
              ></span
            ></mat-icon>
          </mat-form-field>
        </div>
      </div>
      <div class="col-auto ml-2">
        <button
          type="button"
          mat-button
          (click)="emitProductGroupMapping()"
          class="pw-btn pw-primary-btn"
        >
          {{ 'pw.tepProductGroupConfig.addProductGroups' | translate }}
        </button>
      </div>
    </div>
    <poss-web-top-info-panel
      *ngIf="isFocusing && focusedHeaderName"
      [isFocusing]="isFocusing"
      [focusedHeaderName]="focusedHeaderName"
      [currentRowData]="
        tepProductGroupMappingGridData[currentRowIndex][currentRowField]
      "
    >
    </poss-web-top-info-panel>

    <div class="row">
      <ag-grid-angular
        class="pw-titan-poss-theme pw-ag-grid-table"
        [defaultColDef]="defaultColDef"
        [columnDefs]="themeCodesColumnDefs"
        [rowData]="tepProductGroupMappingGridData"
        [context]="getContext()"
        [domLayout]="domLayout"
        [paginationPageSize]="pageSize"
        [pagination]="true"
        [suppressPaginationPanel]="true"
        [rowHeight]="rowHeight"
        [animateRows]="animateRows"
        [frameworkComponents]="getComponents()"
        (cellKeyPress)="onCellKeyPress($event)"
        (gridReady)="gridReady($event)"
        (gridSizeChanged)="onGridSizeChanged($event)"
        (selectionChanged)="selectionChanged($event)"
        (cellFocused)="onCellFocused($event)"
        (focusout)="focusOut($event)"
      >
      </ag-grid-angular>
    </div>
    <div class="row no-gutters d-flex justify-content-between">
      <div class="mt-2">
        <button
          type="button"
          class="pw-btn pw-accent-btn"
          (click)="editValue()"
          [disabled]="!hasSelectedRow || disabled"
        >
          {{ 'pw.tepStoneConfig.editValue' | translate }}
        </button>
      </div>
      <div class="col-auto ml-auto">
        <mat-paginator
          class="pw-paginator"
          *ngIf="
            tepProductGroupMappingGridData.length > minPageSize
          "
          [length]="tepProductGroupMappingGridData.length"
          [pageSize]="pageSize"
          showFirstLastButtons
          [pageSizeOptions]="pageSizeOptions"
          (page)="paginator($event)"
        >
        </mat-paginator>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-auto ml-auto">
      <button
        class="pw-btn pw-primary-btn"
        type="button"
        [disabled]="disabled"
        (click)="openLocationMapping()"
      >
        {{ 'pw.tepProductGroupConfig.locationMapping' | translate }}
      </button>
    </div>
    <div class="col-auto">
      <button class="pw-btn pw-accent-btn" type="submit">
        {{ 'pw.tepProductGroupConfig.save' | translate }}
      </button>
    </div>
  </div>
</form>
