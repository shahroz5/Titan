<div
  class="container-fluid"
  [class.pw-overlay-notification-gutter]="hasNotification"
>
  <div class="row">
    <div class="col-12 col-lg-10 m-auto">
      <div class="pw-top-heading-container">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto">
            <div class="pw-top-heading-container__main-head">
              <a (click)="back()">
                <span class="pw-i-24 pw-back-arrow-icon-24"></span>
              </a>
              <span class="pw-i-36 pw-instock-icon-36"></span>
              <div>
                <h2>{{ 'pw.conversion.inStock' | translate }}</h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.conversion.management' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3 class="mb-3">{{ 'pw.conversion.title' | translate }}</h3>
      <div class="pw-grid-card">
        <div class="row">
          <div class="col-lg-3 col-md-4 col-6">
            <div class="pw-grid-card__item pw-is-active-bar">
              <h4>
                {{
                  requestType === InStockConversionTypesEnumRef.REQUEST_SENT
                    ? ('pw.conversion.requestDocNo' | translate)
                    : ('pw.conversion.docNo' | translate)
                }}:
                {{
                  requestType === InStockConversionTypesEnumRef.REQUEST_SENT
                    ? selectedRequest?.reqDocNo
                    : selectedRequest?.srcDocNo
                }}
              </h4>
              <div class="mt-3">
                <p>
                  {{ 'pw.conversion.statusText' | translate }}:
                  {{ selectedRequest?.status }}
                </p>

                <p>
                  {{
                    requestType === InStockConversionTypesEnumRef.REQUEST_SENT
                      ? (selectedRequest?.reqDocDate | dateFormatter)
                      : (selectedRequest?.srcDocDate | dateFormatter)
                  }}
                </p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="pw-remarks">
              <h5>{{ 'pw.conversion.remarksText' | translate }}</h5>
              <p>
                {{ selectedRequest?.remarks ? selectedRequest?.remarks : '' }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <ng-container *ngIf="parentItem !== null">
        <div>
          <span class="pw-font-weight-bold">{{
            'pw.conversion.requestedSplitOptionForText' | translate
          }}</span>
        </div>

        <poss-web-conversion-item
          [item]="parentItem"
          [tab]="1"
          [hasForm]="0"
          class="pw-list-card d-block"
          (loadImageEvent)="loadImageUrl($event)"
        >
        </poss-web-conversion-item>

        <ng-container *ngIf="childItems !== []">
          <div class="pt-4">
            <span class="pw-font-weight-bold">{{
              'pw.conversion.childProductsText' | translate
            }}</span>
          </div>
          <ng-container *ngFor="let item of childItems; trackBy: trackBy">
            <poss-web-conversion-history-item
              [item]="item"
              [parentForm]="parentForm"
              class="pw-list-card d-block"
              [requestType]="requestType"
              (loadImageEvent)="loadImageUrl($event)"
            >
            </poss-web-conversion-history-item>
          </ng-container>
          <div *ngIf="selectedRequest?.rsoName" class="row">
            <mat-form-field class="col-4">
              <input
                matInput
                [placeholder]="'pw.conversion.RSOText' | translate"
                class="col-4"
                value="{{ selectedRequest?.rsoName }}"
                readonly
              />
            </mat-form-field>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
  <poss-web-loader *ngIf="
    (isHistoryLoading$ | async) ||
    (isLoadingImage$ | async)
  "> </poss-web-loader>
</div>
