<div *ngIf="hasForm === 0">
  <div *ngIf="tab !== 1">
    <div class="row no-gutters">
      <poss-web-item-details
        [item]="itemData"
        [toLoadImageUrlFromAPI]="true"
        (loadImageEvent)="loadImage()"
      >
      </poss-web-item-details>
      <div class="col-auto pw-list-card__item">
        <div class="row no-gutters pw-input-group">
          <div class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label" *ngIf="!isSearching">
              {{ 'pw.conversion.itemQuantityText' | translate }}
            </div>
            <div *ngIf="!isSearching">
              <input
                type="text"
                class="pw-bg-input-box pw-input-group__item-border-right"
                placeholder="{{ 'pw.conversion.itemQuantityText' | translate }}"
                value="1"
                readonly
              />
            </div>
          </div>
          <div class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label">
              <span *ngIf="item.studded">{{
                'pw.conversion.grossItemWeightText' | translate
              }}</span>
              <span *ngIf="!item.studded">{{
                'pw.conversion.itemWeightText' | translate
              }}</span>
              ({{ item?.weightUnit ? item.weightUnit : 'gms' }})
            </div>
            <input
              type="text"
              class="pw-bg-input-box"
              placeholder="{{ 'pw.conversion.itemWeightText' | translate }}"
              value="{{ item.stdWeight | weightFormatter }}"
              readonly
            />
          </div>

          <div *ngIf="item?.binCode" class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label">
              {{ 'pw.conversion.binText' | translate }}
            </div>
            <input
              type="text"
              class="pw-bg-input-box pw-input-group__item-border-left"
              placeholder="{{ 'pw.conversion.binText' | translate }}"
              value="{{ item.binCode }}"
              readonly
            />
          </div>

          <div
            *ngIf="
              item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_Y ||
              item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_N
            "
            class="col-auto pw-input-group__item"
          >
            <div class="pw-input-group__item-label">
              {{ 'pw.conversion.soldText' | translate }}
            </div>
            <input
              type="text"
              class="pw-bg-input-box pw-input-group__item-border-left"
              placeholder="{{ 'pw.conversion.soldText' | translate }}"
              value="{{
                item.itemDetails.sold === conversionItemDetailsEnum.SOLD_Y
                  ? conversionItemDetailsEnum.SOLD_Yes
                  : conversionItemDetailsEnum.SOLD_No
              }}"
              readonly
            />
          </div>
        </div>
      </div>
      <div
      class="col-auto pw-width-150 pw-list-card__item"
      *ngIf="priceDetails && priceDetails?.finalValue"
    >
      <div class="pw-sub-heading">
        {{ 'pw.conversion.finalValueLabel' | translate }}
      </div>
      <div
        class="pw-bg-input-box pw-input-group__item-border pw-align-items-center"
      >
        <a
          class="pw-anchor-underline"
          (click)="openPriceDetailsPopup()"
          >{{ priceDetails?.finalValue }}</a
        >
      </div>
    </div>
      <div
        class="col-auto pw-list-card__right-container"
        *ngIf="showButton == true"
      >
        <button class="pw-btn pw-primary-btn" (click)="checkIsSplitAvailable()">
          {{ 'pw.conversion.checkSplitOption' | translate }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="tab == '1'">
    <div class="row no-gutters">
      <poss-web-item-details
        [item]="itemData"
        [toLoadImageUrlFromAPI]="true"
        (loadImageEvent)="loadImage()"
      >
      </poss-web-item-details>
      <div class="col-auto pw-list-card__item">
        <div class="row no-gutters pw-input-group">
          <div class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label">
              {{ 'pw.conversion.itemQuantityText' | translate }}
            </div>
            <input
              type="text"
              class="pw-bg-input-box pw-input-group__item-border-right"
              placeholder="{{ 'pw.conversion.itemQuantityText' | translate }}"
              value="1"
              readonly
            />
          </div>
          <div class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label">
              <span *ngIf="item.studded">{{
                'pw.conversion.grossItemWeightText' | translate
              }}</span>
              <span *ngIf="!item.studded">{{
                'pw.conversion.itemWeightText' | translate
              }}</span>
              ({{ item?.weightUnit ? item.weightUnit : 'gms' }})
            </div>
            <input
              type="text"
              class="pw-bg-input-box"
              placeholder="{{ 'pw.conversion.itemWeightText' | translate }}"
              value="{{ item.stdWeight | weightFormatter }}"
              readonly
            />
          </div>

          <div *ngIf="item?.binCode" class="col-auto pw-input-group__item">
            <div class="pw-input-group__item-label">
              {{ 'pw.conversion.binText' | translate }}
            </div>
            <input
              type="text"
              class="pw-bg-input-box pw-input-group__item-border-left"
              placeholder="{{ 'pw.conversion.binText' | translate }}"
              value="{{ item.binCode }}"
              readonly
            />
          </div>

          <div
            *ngIf="
              item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_Y ||
              item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_N
            "
            class="col-auto pw-input-group__item"
          >
            <div class="pw-input-group__item-label">
              {{ 'pw.conversion.soldText' | translate }}
            </div>
            <input
              type="text"
              class="pw-bg-input-box pw-input-group__item-border-left"
              placeholder="{{ 'pw.conversion.soldText' | translate }}"
              value="{{
                item.itemDetails.sold === conversionItemDetailsEnum.SOLD_Y
                  ? conversionItemDetailsEnum.SOLD_Yes
                  : conversionItemDetailsEnum.SOLD_No
              }}"
              readonly
            />
          </div>
        </div>
      </div>
      <div
        class="col-auto pw-width-150 pw-list-card__item"
        *ngIf="priceDetails && priceDetails?.finalValue"
      >
        <div class="pw-sub-heading">
          {{ 'pw.conversion.finalValueLabel' | translate }}
        </div>
        <div
          class="pw-bg-input-box pw-input-group__item-border pw-align-items-center"
        >
          <a
            class="pw-anchor-underline"
            (click)="openPriceDetailsPopup()"
            >{{ priceDetails?.finalValue }}</a
          >
      </div>
    </div>
    </div>
  </div>
</div>

<div *ngIf="hasForm === 1">
  <div [formGroup]="itemForm" class="row no-gutters">
    <poss-web-item-details
      [item]="itemData"
      [toLoadImageUrlFromAPI]="true"
      (loadImageEvent)="loadImage()"
      [hidePrice]="true"
      [hideWeight]="true"
      [hideLotNumber]="true"
    >
    </poss-web-item-details>

    <div class="col-auto pw-list-card__item">
      <div class="row no-gutters pw-input-group">
        <div class="col-auto pw-input-group__item">
          <div class="pw-input-group__item-label">
            {{ 'pw.conversion.itemQuantityText' | translate }}
          </div>
          <input
            type="text"
            class="pw-bg-input-box pw-input-group__item-border-right"
            placeholder="{{ 'pw.conversion.itemQuantityText' | translate }}"
            formControlName="quantity"
            readonly
          />
        </div>
        <div class="col-auto pw-input-group__item">
          <div class="pw-input-group__item-label">
            <span *ngIf="item.studded">{{
              'pw.conversion.grossItemWeightText' | translate
            }}</span>
            <span *ngIf="!item.studded">{{
              'pw.conversion.itemWeightText' | translate
            }}</span>
            ({{ item?.weightUnit ? item.weightUnit : 'gms' }})
          </div>
          <input
            possWebWeightInput
            class="pw-bg-input-box pw-input-group__item-border-left"
            placeholder="{{ 'pw.conversion.itemWeightText' | translate }}"
            formControlName="weight"
            [readonly]="!isWeightEditable"
            required
          />
        </div>

        <div
          *ngIf="
            item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_Y ||
            item?.itemDetails?.sold === conversionItemDetailsEnum.SOLD_N
          "
          class="col-auto pw-input-group__item"
        >
          <div class="pw-input-group__item-label">
            {{ 'pw.conversion.soldText' | translate }}
          </div>
          <input
            type="text"
            class="pw-bg-input-box pw-input-group__item-border-left"
            placeholder="{{ 'pw.conversion.soldText' | translate }}"
            value="{{
              item.itemDetails.sold === conversionItemDetailsEnum.SOLD_Y
                ? conversionItemDetailsEnum.SOLD_Yes
                : conversionItemDetailsEnum.SOLD_No
            }}"
            readonly
          />
        </div>
      </div>
    </div>

    <div class="col-auto pw-width-150 pw-list-card__item">
      <div class="pw-sub-heading">
        {{ 'pw.conversion.assignBinCode' | translate }}
      </div>

      <button
        mat-flat-button
        class="pw-btn pw-accent-btn pw-w-100"
        (click)="openBinSelectionPopup()"
      >
        <div class="row no-gutters pw-text-left col">
          <div class="col pw-text-overflow-ellipisis">
            <p class="pw-text-overflow-ellipisis">
              <ng-container *ngIf="selectedBinCode; else showSelectBin">
                {{ selectedBinCode }}
              </ng-container>
              <ng-template #showSelectBin>
                {{ 'pw.stockReceive.selectBinCodeLable' | translate }}
              </ng-template>
            </p>
          </div>

          <div class="col-auto ml-auto">
            <span class="pw-i-16 pw-bin-icon-16"></span>
          </div>
        </div>
      </button>
    </div>
    <div
      class="col-auto pw-width-150 pw-list-card__item"
      *ngIf="priceDetails && priceDetails?.finalValue"
      >
      <div class="pw-sub-heading">
        {{ 'pw.conversion.finalValueLabel' | translate }}
      </div>
      <div
        class="pw-bg-input-box pw-input-group__item-border pw-align-items-center"
      >
        <a
          class="pw-anchor-underline"
          (click)="openPriceDetailsPopup()"
          >{{ priceDetails?.finalValue }}</a
        >
      </div>
    </div>

    <div class="col-auto pw-list-card__error-label">
      <span
        *ngIf="
          (itemForm.get('weight').dirty || itemForm.get('weight').touched) &&
          (itemForm.get('weight').hasError('min') ||
            itemForm.get('weight').invalid)
        "
        class="pw-error-color"
      >
        {{ itemForm.get('weight').errors.errorArray[0] }}
      </span>
    </div>
  </div>
</div>
