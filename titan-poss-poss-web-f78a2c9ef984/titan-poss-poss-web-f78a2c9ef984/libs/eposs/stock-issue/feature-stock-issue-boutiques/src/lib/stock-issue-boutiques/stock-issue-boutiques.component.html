<div class="row">
  <mat-form-field
    class="col-lg-3 col-sm-4 ml-auto pw-search-bar"
    floatLabel="never"
  >
    <input
      #searchBox
      matInput
      class="pw-input-box"
      [placeholder]="'Search with Request No.'"
      [formControl]="searchFormControl"
      (keypress)="numberCheck($event)"
    />
    <mat-icon matSuffix>
      <span
        *ngIf="!searchFormControl.value"
        class="pw-i-16 pw-search-icon-16"
      ></span
    ></mat-icon>
    <mat-icon matSuffix (click)="clearSearch($event)">
      <span
        *ngIf="searchFormControl.value"
        class="pw-i-10 pw-close-icon-16"
      ></span
    ></mat-icon>
  </mat-form-field>
</div>

<div class="pw-scrollable">
  <ng-container *ngIf="!showNoResultsFoundNaN && isL1L2Store">
    <poss-web-card-list
      [count]="
        (isSearchingIssues$ | async) === false &&
        (hasSearchIssueResults$ | async) === false
          ? (BTQ_BTQ_IssuePendingSTNCount$ | async)
          : 0
      "
      [dataList]="
        (isSearchingIssues$ | async) === false &&
        (hasSearchIssueResults$ | async) === false
          ? (BTQ_BTQ_PendingSTN$ | async)
          : (searchIssueSTNResult$ | async)
      "
      [pageSize]="pageSize"
      (loadMore)="loadStocks($event)"
      (selected)="onSelected($event)"
    >
      <ng-template let-item="data">
        <poss-web-card-title
          >Request No: {{ item.reqDocNo }}</poss-web-card-title
        >
        <poss-web-card-subtitle
          >{{ item.destLocationCode }} |
          {{ item.destLocationDescription }}</poss-web-card-subtitle
        >
        <poss-web-card-content>
          <p>
            {{ item.totalAvailableQuantity }}
            Qty. |
            {{
              item.totalAvailableValue | currencyFormatter: item.currencyCode
            }}
          </p>
          <p>
            Total Weight:
            {{ item.totalAvailableWeight | weightFormatter }}
            {{ item.weightUnit }}
          </p>
          <div class="row">
            <div class="col">
              <p>
                {{ item.reqDocDate | dateFormatter }}
              </p>
            </div>
          </div>
        </poss-web-card-content>
      </ng-template>
    </poss-web-card-list>

    <h3
      class="pw-text-center m-5"
      *ngIf="
        !(isLoadingBTQ_BTQ_STN || (isLoadingCount$ | async)) &&
        (isSearchingIssues$ | async) === false &&
        ((type == 'boutique' &&
          (hasSearchIssueResults$ | async) === false &&
          (BTQ_BTQ_PendingSTN$ | async) &&
          (BTQ_BTQ_PendingSTN$ | async).length === 0) ||
          ((hasSearchIssueResults$ | async) &&
            (searchIssueSTNResult$ | async) &&
            (searchIssueSTNResult$ | async).length === 0))
      "
    >
      {{ noDataFoundMessage }}
    </h3>
    <h3
      class="pw-success-color pw-message pw-text-center mg-t-100"
      *ngIf="
        type == 'history' &&
        isLoadingHistory == false &&
        (issueHistory$ | async) &&
        (issueHistory$ | async).length === 0 &&
        (advanceFilter?.docFromDate === null ||
          advanceFilter?.docFromDate == '') &&
        (advanceFilter?.docToDate === null || advanceFilter?.docToDate == '') &&
        (advanceFilter?.locationCode == null ||
          advanceFilter?.locationCode == '') &&
        (advanceFilter?.fiscalYear == null || advanceFilter?.fiscalYear == '')
      "
    >
      {{ noDataFoundMessage }}
    </h3>
  </ng-container>

  <h3 *ngIf="showNoResultsFoundNaN" class="pw-text-center m-5">
    {{ noDataFoundMessage }}
  </h3>

  <poss-web-loader *ngIf="isLoadingBTQ_BTQ_STN || (isLoadingCount$ | async)">
  </poss-web-loader>
  <poss-web-loader *ngIf="isSearchingIssues$ | async"></poss-web-loader>
</div>
