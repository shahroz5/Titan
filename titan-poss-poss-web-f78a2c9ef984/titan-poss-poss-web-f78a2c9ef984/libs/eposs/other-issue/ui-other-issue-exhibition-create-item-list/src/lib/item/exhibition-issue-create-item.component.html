<div class="row no-gutters" [formGroup]="itemForm">
  <div class="col-auto pw-list-card__checkbox">
    <mat-checkbox (change)="selectionEmit()" formControlName="isItemSelected">
    </mat-checkbox>
  </div>
  <poss-web-item-details [item]="itemData"> </poss-web-item-details>
  <div class="col-auto pw-list-card__item">
    <div class="row no-gutters pw-input-group">
      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.otherReceiptsIssues.availableQuantityLabelText' | translate }}
        </div>

        <input
          type="number"
          class="pw-bg-input-box pw-input-group__item-border-right"
          placeholder="Qty."
          formControlName="issueQuantity"
          readonly
          name="quantityField"
          possWebMaxLengthValidator
        />
      </div>
      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.otherReceiptsIssues.RequestedQuantityLabelText' | translate }}
        </div>
        <input
          type="number"
          class="pw-bg-input-box pw-input-group__item-border-right"
          placeholder="Qty."
          min="1"
          max="item.availableQuantity"
          possWebInput
          formControlName="issueQuantity"
          [readonly]="isReadOnly"
          (change)="onRequestedQuantityChange()"
          (keypress)="numberOnly($event)"
          name="quantityField"
          possWebMaxLengthValidator
        />
        <ng-template #nonEditable>
          <input
            type="number"
            class="pw-bg-input-box pw-input-group__item-border-right"
            placeholder="Qty."
            formControlName="issueQuantity"
            readonly
            name="quantityField"
            possWebMaxLengthValidator
          />
        </ng-template>
      </div>

      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.otherReceiptsIssues.grossWeightText' | translate }}:
        </div>
        <div class="pw-input-group__item-label">
          {{ item.availableWeight | weightFormatter }} ({{ item.weightUnit }})
        </div>
        <input
          type="text"
          class="pw-bg-input-box pw-input-group__item-border-left"
          placeholder="Total Wt."
          formControlName="weight"
          readonly
          name="weightField"
          possWebMaxLengthValidator
        />
      </div>

      <div class="col-auto pw-input-group__item">
        <div class="pw-input-group__item-label">
          {{ 'pw.otherReceiptsIssues.BinLabelText' | translate }}
        </div>
        <input
          type="text"
          class="pw-bg-input-box pw-input-group__item-border-left"
          value="{{ item.binCode }}"
          readonly
        />
      </div>
    </div>
  </div>

  <div class="row">
    <div class="flex-fill"></div>
    <div class="col-auto">
      <mat-error
        *ngIf="
          itemForm.get('issueQuantity').errors &&
          itemForm.get('issueQuantity').errors.errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="itemForm.get('issueQuantity').errors.errorArray"
        ></poss-web-error-info-tooltip>
      </mat-error>

      <ng-container *ngIf="showUpdateStatus">
        <span
          class="pw-list-card__error-label"
          *ngIf="item.isUpdatingSuccess == false"
        >
          {{ 'pw.otherReceiptsIssues.saveFailedText' | translate }}
        </span>
        <span class="pw-list-card__success-label" *ngIf="item.isUpdating">
          {{ 'pw.otherReceiptsIssues.savingText' | translate }}...
        </span>
      </ng-container>
    </div>
  </div>
</div>
