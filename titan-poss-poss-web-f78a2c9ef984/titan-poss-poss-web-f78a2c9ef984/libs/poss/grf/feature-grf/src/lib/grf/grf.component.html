<div class="pw-detail-card" *ngIf="isGrfAllowed">
  <div class="row pw-detail-card__flex-end">
    <div class="col-auto">
      <mat-form-field
        class="pw-form-field-position"
        [floatLabel]="'auto'"
        [formGroup]="ctGrfFormGroup"
      >
        <mat-label
          >{{ 'pw.grf.enterAmount' | translate }}({{
            currencySymbolService.get(baseCurrencyCode)
          }})
        </mat-label>
        <input
          type="text"
          (focusout)="onFocusOut()"
          matInput
          autoComplete="off"
          formControlName="amount"
          required
          possWebAmountInput
        />
        <mat-error
          *ngIf="
            ctGrfFormGroup.get('amount').errors &&
            ctGrfFormGroup.get('amount').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="ctGrfFormGroup.get('amount').errors.errorArray"
          >
          </poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-auto">
      <poss-web-rso-names-list
        [rsoNamesList]="rsoNamesList"
        [selectedRso]="selectedRso"
        (selectedRSOName)="setSelectedRSOName($event)"
        [clearSelectedRsoName]="clearSelectedRsoName"
      >
      </poss-web-rso-names-list>
    </div>
  </div>
</div>

<ng-template #grfSuccessNotificationTemplate>
  <div class="pw-text-center">
    <h3 class="pw-success-color">
      {{ 'pw.grf.grfCreationSuccessMessage' | translate }}
    </h3>
    <br />
    <div class="pw-black-popup-box__margin-top-10">
      {{ 'pw.grf.grfDocNo' | translate }}: {{ grfDocNo }}
    </div>
    <br />
    <div class="pw-black-popup-box__margin-top-10">
      {{ 'pw.grf.cnNo' | translate }}: {{ creditNoteNumber }}
    </div>
    <br />
    <div class="pw-black-popup-box__margin-top-10">
      <button
        matButton
        class="pw-white-btn"
        (click)="
          printGrfConfirmedTransaction(
            transactionId,
            transactionTypeEnum?.ADV,
            subTransactionTypeEnum?.FROZEN_RATES
          )
        "
      >
        {{ 'pw.grf.print' | translate }}
      </button>
    </div>
  </div>
</ng-template>

<poss-web-loader
  *ngIf="
    (isLoading$ | async) ||
    (isOrderConfirmationLoading$ | async) ||
    (printingService.getPrinterIsLoading() | async)
  "
></poss-web-loader>
