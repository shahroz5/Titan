<mat-accordion multi>
  <poss-web-freeze-advance-booking
    [advanceBookingDetailsResponse]="currentAdvanceBookingDetailsResponse"
    [enableFreeze]="enableFreeze"
    [bgrAllowed]="bgrAllowed"
    [currencyCode]="currencyCode"
    [isCnRedeemed]="isCnRedeemed"
    [selectedFOCSchemesCount]="selectedFOCSchemesCount"
    (freeze)="freezeRate($event)"
    (bestRate)="bestRate($event)"
    (prodToBeCollectedByEvent)="prodToBeCollectedBy($event)"
  ></poss-web-freeze-advance-booking>
</mat-accordion>

<ng-template #confirmSuccessNotificationTemplate>
  <div class="pw-black-popup-box px-3">
    <div class="pw-text-center">
      <h3 class="pw-success-color">
        {{ 'pw.advanceBooking.advanceBookingConfirmMsg' | translate }}
      </h3>
      <div class="pw-black-popup-box__margin-top-10">
        {{ 'pw.advanceBooking.advanceBookingDocNo' | translate }} :
        {{ confirmedCashmemoDoc }}
      </div>
      <h4 *ngIf="newlyGeneratedCn.length > 0">
        Generated Partial CN Amount of :
        {{ newlyGeneratedCn[0].otherDetails.data.remainingAmount }} ,&nbsp;
        {{ 'pw.regularCashMemo.newCnLabel' | translate }}:
        {{ newlyGeneratedCn[0].otherDetails.data.newCNNumber }}
      </h4>
      <div
        *ngIf="creditnote && creditnote.length > 0"
        class="pw-black-popup-box__margin-top-10"
      >
        {{ 'pw.advanceBooking.CNNO' | translate }} : {{ creditnote }}
      </div>
      <h4 *ngIf="refundAmountAsCash !== 0">
        {{ 'pw.advanceBooking.refundAmountMsg' | translate }} :
        {{ refundAmountAsCash | currencyFormatter: currencyCode }}
      </h4>
      <div class="pw-black-popup-box__margin-top-10">
        <h4 class="pw-success-color pw-pointer" (click)="print()">
          <span class="pw-i-16 pw-download-icon-16 pw-print"></span>
          {{ 'pw.advanceBooking.print' | translate }}
        </h4>
      </div>
    </div>
  </div>
</ng-template>

<poss-web-loader
  *ngIf="
    (isLoading$ | async) ||
    (isLoadingOrder$ | async) ||
    (printingService.getPrinterIsLoading() | async)
  "
>
</poss-web-loader>
