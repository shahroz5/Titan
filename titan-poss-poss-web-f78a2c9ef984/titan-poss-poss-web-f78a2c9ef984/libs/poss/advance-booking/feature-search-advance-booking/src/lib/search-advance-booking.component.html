<div class="pw-detail-card">
  <div class="row pw-detail-card__flex-end">
    <ng-container [formGroup]="searchABForm">
      <poss-web-select-dropdown
        placeholder=" {{ 'pw.advanceBooking.selectABFunction' | translate }}"
        [control]="searchABForm.get('ABFunction')"
        [options]="dropDownvalues"
        [required]="true"
        (selectionChange)="valueChanged($event)"
        class="col-lg-2 col-4"
      >
      </poss-web-select-dropdown>

      <mat-form-field class="col-lg-2 col-4">
        <mat-label>{{ 'pw.advanceBooking.ABDocNumber' | translate }}</mat-label>
        <input
          matInput
          class="pw-single-bordered-input col-auto"
          name="numbersField"
          formControlName="docNumber"
          possWebMaxLengthValidator
        />
        <mat-error
          *ngIf="
            searchABForm.get('docNumber').errors &&
            searchABForm.get('docNumber').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="searchABForm.get('docNumber').errors.errorArray"
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
      <poss-web-fiscal-year
        class="col-lg-2 col-4"
        [control]="searchABForm.get('fiscalYear')"
        [required]="false"
        [currentFiscalYear]="currentFiscalYear"
        [data]="data?.fiscalYear"
        [disabled]="false"
      ></poss-web-fiscal-year>

      <mat-form-field class="col-lg-2 col-4">
        <mat-label>{{ 'pw.advanceBooking.mobileNo' | translate }}</mat-label>
        <input
          matInput
          class="pw-single-bordered-input col-auto"
          name="mobileField"
          formControlName="mobileNumber"
          possWebMaxLengthValidator
        />
        <mat-error
          *ngIf="
            searchABForm.get('mobileNumber').errors &&
            searchABForm.get('mobileNumber').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="searchABForm.get('mobileNumber').errors.errorArray"
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>

      <div class="col-auto ml-auto align-self-baseline">
        <button
          class="pw-btn pw-accent-btn"
          [disabled]="this.searchABForm.invalid"
          (click)="SearchAB(true)"
        >
          {{ 'pw.advanceBooking.SearchButtonTest' | translate }}
        </button>
      </div>
    </ng-container>
  </div>
</div>

<poss-web-search-list-advance-booking
  [advanceBooking]="advanceBookingList"
  [disable]="advanceBookingList.length == 0"
  [count]="this.advanceBookingListCount$ | async"
  [pageEvent]="configPageEvent"
  (paginator)="paginate($event)"
  [pageSizeOptions]="pageSizeOptions"
  [minPageSize]="minPageSize"
  (onselected)="onSelected($event)"
></poss-web-search-list-advance-booking>

<poss-web-loader *ngIf="isLoading$ | async"> </poss-web-loader>
