<div class="pw-detail-card">
  <div class="row" [formGroup]="giftCardBalanceInquiryFormGroup">
    <div class="col-auto">
      <div>
        <div class="pw-detail-card__label">
          {{ 'pw.giftCards.selectTypeOfCard' | translate }}
        </div>
        <div class="row">
          <mat-radio-group
            class="col-auto"
            aria-labelledby="example-radio-group-label"
            aria-label="Select an option"
            formControlName="selectRadioButton"
          >
            <mat-radio-button
              class="pw-radio-btn mr-3"
              [value]="giftCardTypeValueEnum?.QUIKCILVER"
            >
              {{ 'pw.giftCards.quikCilver' | translate }}
            </mat-radio-button>
            <mat-radio-button
              class="pw-radio-btn"
              [disabled]="true"
              [value]="giftCardTypeValueEnum?.VALUEACCESS"
            >
              {{ 'pw.giftCards.valueAccess' | translate }}
            </mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
    </div>
    <mat-checkbox
      class="col-auto pw-list-card__checkbox pw_gc_scan_checkbox"
      (change)="setScan($event.checked)"
    >
      {{ 'pw.giftCards.scan' | translate }}
    </mat-checkbox>
    <poss-web-ui-gc-bar-code
      class="col-lg-3 col-3"
      *ngIf="isScan"
      [clearCardNumberField]="clearCardNumberField"
      [tabType]="'balanceInquiry'"
      (cardNumberEmit)="getCardNumber($event)"
    ></poss-web-ui-gc-bar-code>
    <poss-web-ui-gc-number-manual-entry
      class="col-lg-3 col-3"
      *ngIf="!isScan"
      [clearCardNumberField]="clearCardNumberField"
      (gcNumberManualEmit)="getCardNumber($event)"
    >
    </poss-web-ui-gc-number-manual-entry>
    <mat-form-field class="col-lg-2 col-3" [floatLabel]="'auto'">
      <mat-label>{{ 'pw.giftCards.enterGiftCardPin' | translate }}</mat-label>
      <input
        #focusPin
        matInput
        formControlName="cardPin"
        name="giftCardPinField"
        type="password"
        possWebMaxLengthValidator
      />
      <mat-error
        *ngIf="
          giftCardBalanceInquiryFormGroup.get('cardPin').errors &&
          giftCardBalanceInquiryFormGroup.get('cardPin').errors.errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="
            giftCardBalanceInquiryFormGroup.get('cardPin').errors.errorArray
          "
        >
        </poss-web-error-info-tooltip>
      </mat-error>
    </mat-form-field>
    <div class="col-auto pw-detail-card__right-in-tablet">
      <!-- giftCardBalanceInquiryFormGroup.get('cardPin').value.length < 6 -->
      <button
        (click)="
          getQCGCBalance(
            giftCardBalanceInquiryFormGroup.get('cardNumber').value
          )
        "
        [disabled]="
          giftCardBalanceInquiryFormGroup.invalid ||
          giftCardBalanceInquiryFormGroup.get('selectRadioButton').value ===
            giftCardTypeValueEnum?.VALUEACCESS
        "
        mat-flat-button
        class="pw-btn pw-accent-btn"
      >
        {{ 'pw.giftCards.getBalance' | translate }}
      </button>
    </div>
  </div>
  <div
    class="pw-detail-card__secondary-section"
    *ngIf="cardBalanceAmount || cardExpiryDate || cpgGroupDescription"
  >
    <div class="row">
      <div class="col-auto">
        <div class="pw-detail-card__label">
          {{ 'pw.giftCards.cardNumberLabel' | translate }}
        </div>
        <div class="pw-font-weight-bold">
          {{ cardNumber ? cardNumber : '-' }}
        </div>
      </div>
      <div class="col-auto">
        <div class="pw-detail-card__label">
          {{ 'pw.giftCards.availableBalance' | translate }}
        </div>
        <div class="pw-font-weight-bold">
          {{ currencySymbolService.get(currencyCode) }}
          {{ cardBalanceAmount | number: '1.2-2' }}
        </div>
      </div>
      <div class="col-auto"></div>
      <div class="col-auto">
        <div class="pw-detail-card__label">
          {{ 'pw.giftCards.validTill' | translate }}
        </div>
        <div class="pw-font-weight-bold" *ngIf="cardExpiryDate">
          {{ cardExpiryDate | dateFormatter }}
        </div>
        <div class="pw-font-weight-bold" *ngIf="!cardExpiryDate">-</div>
      </div>
      <div class="col-auto"></div>
      <div class="col-auto">
        <div class="pw-detail-card__label">
          {{ 'pw.giftCards.cpgGroupDescription' | translate }}
        </div>
        <div class="pw-font-weight-bold">
          {{ cpgGroupDescription ? cpgGroupDescription : '-' }}
        </div>
      </div>
    </div>
  </div>
</div>

<poss-web-loader *ngIf="isPaymentLoading$ | async"></poss-web-loader>
