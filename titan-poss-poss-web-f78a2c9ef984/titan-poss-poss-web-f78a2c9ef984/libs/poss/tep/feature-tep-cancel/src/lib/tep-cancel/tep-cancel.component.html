<div class="pw-detail-card">
  <div class="row pw-detail-card__flex-end">
    <ng-container [formGroup]="SearchTepForm">
      <mat-form-field class="col-lg-2 col-4">
        <mat-label>{{ 'pw.tep.tepDocNo' | translate }}</mat-label>
        <input
          matInput
          class="pw-single-bordered-input col-auto"
          name="numbersField"
          formControlName="docNumber"
          possWebMaxLengthValidator
        />
        <mat-error
          *ngIf="
            SearchTepForm.get('docNumber').errors &&
            SearchTepForm.get('docNumber').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="SearchTepForm.get('docNumber').errors.errorArray"
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>
      <poss-web-fiscal-year
        class="col-lg-2 col-4"
        [control]="SearchTepForm.get('fiscalYear')"
        [required]="true"
        [currentFiscalYear]="currentFiscalYear"
        [data]="data?.fiscalYear"
        [placeHolder]="'pw.creditNote.searchByFiscalYearLabel' | translate"
        [disabled]="false"
      ></poss-web-fiscal-year>

      <mat-form-field class="col-lg-2 col-4">
        <mat-label>{{ 'pw.tep.mobileNo' | translate }}</mat-label>
        <input
          matInput
          class="pw-single-bordered-input col-auto"
          name="mobileField"
          formControlName="mobileNumber"
          possWebMaxLengthValidator
        />
        <mat-error
          *ngIf="
            SearchTepForm.get('mobileNumber').errors &&
            SearchTepForm.get('mobileNumber').errors.errorArray
          "
        >
          <poss-web-error-info-tooltip
            [errorMessage]="SearchTepForm.get('mobileNumber').errors.errorArray"
          ></poss-web-error-info-tooltip>
        </mat-error>
      </mat-form-field>

      <div class="col-auto ml-auto align-self-baseline">
        <button
          class="pw-btn pw-accent-btn"
          [disabled]="this.SearchTepForm.invalid"
          (click)="SearchTEP(true)"
        >
          {{ 'pw.tep.SearchButtonTest' | translate }}
        </button>
      </div>
    </ng-container>
  </div>
</div>

<poss-web-tep-search-list
  [tep]="TEPList"
  [disable]="TEPList.length == 0"
  [count]="this.TEPListCount$ | async"
  [pageEvent]="configPageEvent"
  [currencyCode]="currencyCode"
  (paginator)="paginate($event)"
  [pageSizeOptions]="pageSizeOptions"
  [minPageSize]="minPageSize"
  (onselected)="onSelected($event)"
></poss-web-tep-search-list>

<poss-web-loader *ngIf="isLoading$ | async"> </poss-web-loader>
