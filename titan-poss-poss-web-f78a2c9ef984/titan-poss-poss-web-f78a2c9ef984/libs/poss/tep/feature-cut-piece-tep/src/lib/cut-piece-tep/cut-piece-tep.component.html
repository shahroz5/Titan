<form [formGroup]="cutPieceTepFormGroup">
  <div class="pw-detail-card">
    <div class="row pw-detail-card__flex-end">
      <div class="col-auto pw-detail-card__margin-top">
        <poss-web-rso-names-list
          [rsoNamesList]="rsoNamesList"
          [selectedRso]="selectedRso"
          (selectedRSOName)="onSelectedRSONameChanged($event)"
          [clearSelectedRsoName]="clearSelectedRsoName"
        >
        </poss-web-rso-names-list>
      </div>
    </div>
  </div>

  <div class="pw-detail-card">
    <div class="row">
      <div class="col-auto">
        <div class="pw-detail-card__heading">
          {{ 'pw.tep.productDetails' | translate }}
        </div>
      </div>
    </div>
    <div class="row">
      <!-- <ng-container *possWebPermission="loadPermission(TEP_ADD_EDIT_SUBMENU)"> -->
        <poss-web-product-search-autocomplete
          class="col-lg-3 col-6"
          (search)="searchByItemcode($event)"
          (selectedData)="selectedItemcode($event)"
          (exactSearch)="exactSearchByItemcode($event)"
          [searchData]="searchProductList$ | async"
          [searchEnableEvent]="searchEnableFlag$"
        ></poss-web-product-search-autocomplete>
      <!-- </ng-container> -->
    </div>

    <poss-web-cut-piece-tep-item-grid
      [tepItemList]="cutPieceItemList"
      [isEditMode]="true"
      [deleteId]="deleteIdForSoftDelete"
      (deleteTepItem)="deleteTepItemById($event)"
      (calculatedValueEmit)="setTotalValueOfGridItems($event)"
      [metalRate]="metalRate"
      (cutPieceDetails)="getCutPieceDetails($event)"
    ></poss-web-cut-piece-tep-item-grid>
  </div>
</form>

<ng-template #cutPieceTepSuccessNotificationTemplate>
  <div class="pw-text-center">
    <h3 class="pw-success-color">
      {{ 'pw.tep.cutPieceTepSuccessMsg' | translate }}
    </h3>

    <br />
    <div class="pw-black-popup-box__margin-top-10" *ngIf="docNo">
      {{ 'pw.tep.tepDocNo' | translate }}: {{ docNo }}
    </div>
  </div>
</ng-template>
<poss-web-loader
  *ngIf="
    (isLoading$ | async) ||
    (isProductSearchLoading$ | async) ||
    (isOpenTaskLoading$ | async)
  "
></poss-web-loader>
