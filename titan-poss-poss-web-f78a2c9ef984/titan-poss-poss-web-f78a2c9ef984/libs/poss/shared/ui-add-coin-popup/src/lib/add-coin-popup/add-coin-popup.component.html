<div class="pw-white-overlay-box">
  <div class="pw-confirmation-box">
    <div class="row pw-confirmation-box__header">
      <div class="col-auto">
        {{ 'pw.coinPopup.addGoldCoinHeaderLabel' | translate }}
      </div>
      <div class="col pw-text-right">
        <a class="sub-heading" (click)="closePopup()">
          <span class="pw-i-24 pw-close-no-border-icon-24"></span>
        </a>
      </div>
    </div>
    <div class="pw-confirmation-box__body">
      <poss-web-material-price
        [metalPrice]="metalPrice | async"
        [currencyCode]="currencyCode"
      ></poss-web-material-price>
      <div [formGroup]="coinForm" class="pw-confirmation-box__item">
        <div class="row">
          <poss-web-select-dropdown
            class="col-3"
            [placeholder]="'pw.coinPopup.karatagePlaceHolder' | translate"
            [control]="coinForm.get('karatage')"
            [options]="karatageArray"
            [required]="true"
            (selectionChange)="onKaratageChange($event)"
          >
          </poss-web-select-dropdown>

          <poss-web-select-dropdown
            class="col-3"
            [placeholder]="weightLabel"
            [control]="coinForm.get('weight')"
            [options]="weightArray"
            [required]="true"
            [disabled]="coinForm.get('karatage').value === null"
            (selectionChange)="onWeightChange($event)"
          >
          </poss-web-select-dropdown>

          <poss-web-select-dropdown
            class="col-3"
            [placeholder]="'pw.coinPopup.themePlaceHolder' | translate"
            [control]="coinForm.get('theme')"
            [options]="themeArray"
            [required]="true"
            [disabled]="coinForm.get('karatage').value === null"
            (selectionChange)="onThemeChange($event)"
          >
          </poss-web-select-dropdown>
        </div>
        <div class="row">
          <poss-web-select-dropdown
            class="col-3"
            [placeholder]="'pw.coinPopup.variantCodePlaceHolder' | translate"
            [control]="coinForm.get('itemCode')"
            [options]="itemCodeOptions"
            [required]="true"
            [disabled]="coinForm.get('karatage').value === null"
            (selectionChange)="onItemCodeChange($event)"
          >
          </poss-web-select-dropdown>

          <div class="col-3">
            <ng-container *ngIf="selectedQuantity && selectedQuantity !== 0">
              <p class="pw-fourth-color">
                {{ 'pw.coinPopup.availableQtyPlaceHolder' | translate }}
              </p>
              <div>
                {{ selectedQuantity }}
              </div>
            </ng-container>
          </div>

          <div class="col-3">
            <button
              [disabled]="!coinForm.valid || !isAddEnable"
              (click)="onAddButtonClick()"
              mat-button
              class="pw-btn pw-primary-btn"
            >
              {{ 'pw.coinPopup.addButtonTxt' | translate }}
            </button>
          </div>
        </div>
      </div>
      <div class="pw-confirmation-box__item">
        <poss-web-add-coin-popup-item
          [item$]="item$.asObservable()"
          [tax$]="tax$.asObservable()"
          (formData)="formDataChange($event)"
          (quantity)="quantityChange($event)"
        ></poss-web-add-coin-popup-item>
      </div>
    </div>
    <div class="pw-confirmation-box__footer">
      <div class="row pw-confirmation-box__footer-border no-gutters">
        <div class="col-auto pw-confirmation-box__footer-item">
          <button
            (click)="resetData()"
            mat-button
            class="pw-btn pw-primary-btn"
          >
            {{ 'pw.coinPopup.resetButtonTxt' | translate }}
          </button>
        </div>

        <div class="col-auto pw-confirmation-box__footer-item">
          <button
            [disabled]="selectedCoinItems.length === 0 || !isFormValid"
            (click)="addToOrder()"
            mat-button
            class="pw-btn pw-accent-btn"
          >
            {{ 'pw.coinPopup.addToOrderButtonTxt' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
