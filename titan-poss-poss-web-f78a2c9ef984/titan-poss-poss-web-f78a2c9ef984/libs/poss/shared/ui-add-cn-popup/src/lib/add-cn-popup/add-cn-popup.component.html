<div class="pw-white-overlay-box">
  <div class="pw-confirmation-box">
    <div class="row pw-confirmation-box__header">
      <div class="col-auto">
        {{ 'pw.cnPopup.addCNHeaderLabel' | translate }}
      </div>
      <div class="col pw-text-right">
        <a class="sub-heading" (click)="closePopup()">
          <span class="pw-i-24 pw-close-no-border-icon-24"></span>
        </a>
      </div>
    </div>
    <div class="pw-confirmation-box__body" *ngIf="cnForm">
      <div [formGroup]="cnForm" class="pw-confirmation-box__item">
        <div class="row">
          <poss-web-select-dropdown
            class="col-5"
            [placeholder]="'pw.cnPopup.selectCNTypeLabel' | translate"
            [control]="cnForm.get('cnType')"
            [options]="cnTypesList"
            [required]="true"
            (selectionChange)="onCNTypeChange()"
          >
          </poss-web-select-dropdown>
          <poss-web-select-dropdown
            class="col-5"
            [placeholder]="'pw.cnPopup.selectCNNumLabel' | translate"
            [control]="cnForm.get('cnNumber')"
            [options]="cnNumbersList"
            [required]="true"
            (selectionChange)="onCNNumChange()"
          >
          </poss-web-select-dropdown>
        </div>
        <ng-container *ngIf="selectedCnDetails">
          <div class="row">
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.cnTypeLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.creditNoteType }}
            </div>
          </div>
          <div class="row">
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.cnAmountLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.amount | currencyFormatter }}
            </div>
          </div>
          <div class="row">
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.cnGoldRateLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.goldRateAmount | currencyFormatter }}
            </div>
          </div>
          <div class="row">
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.minAmountLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.minAmount | currencyFormatter }}
            </div>
          </div>
          <div class="row">
            <div
              class="col-3 pw-detail-card__label"
              *ngIf="
                cnForm.get('cnType').value === transactionTypeEnum.GRN;
                else grf
              "
            >
              {{ 'pw.cnPopup.grnGoldWeightLabel' | translate }}
            </div>
            <ng-template #grf>
              <div class="col-3 pw-detail-card__label">
                {{ 'pw.cnPopup.grfGoldWeightLabel' | translate }}
              </div>
            </ng-template>

            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.goldWeight | weightFormatter }}
              {{ 'pw.cnPopup.gmsLabel' | translate }}
            </div>
          </div>
          <div
            class="row"
            *ngIf="cnForm.get('billingType').value === productTypesRef.PLAIN"
          >
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.weightToleranceLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.weightTolerance | weightFormatter }}
              {{ 'pw.cnPopup.gmsLabel' | translate }}
            </div>
          </div>
          <div
            class="row"
            *ngIf="cnForm.get('billingType').value === productTypesRef.STUDDED"
          >
            <div class="col-3 pw-detail-card__label">
              {{ 'pw.cnPopup.amountToleranceLabel' | translate }}
            </div>
            <div class="col-auto pw-font-weight-bold">
              : {{ selectedCnDetails?.valueTolerance | currencyFormatter }}
            </div>
          </div>
          <div class="row pw-panel-card__right-container">
            <div class="col-auto">
              {{ 'pw.cnPopup.allowedCategoryLabel' | translate }}
            </div>
            <mat-radio-group
              class="col-auto"
              aria-labelledby="example-radio-group-label"
              aria-label="Select an option"
              formControlName="billingType"
            >
              <mat-radio-button
                class="pw-radio-btn mr-3"
                [value]="productTypesRef.PLAIN"
              >
                {{ 'pw.cnPopup.plainGoldLabel' | translate }}
              </mat-radio-button>
              <mat-radio-button
                class="pw-radio-btn"
                [value]="productTypesRef.STUDDED"
              >
                {{ 'pw.cnPopup.studdedGoldLabel' | translate }}
              </mat-radio-button>
            </mat-radio-group>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="pw-confirmation-box__footer">
      <div class="row pw-confirmation-box__footer-border no-gutters">
        <div class="col-auto pw-confirmation-box__footer-item">
          <button
            (click)="addCNData()"
            [disabled]="!selectedCnDetails"
            mat-button
            class="pw-btn pw-primary-btn"
          >
            {{ 'pw.cnPopup.addButtonTxt' | translate }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
