<div
  class="pw-confirmation-box pw-confirmation-box__fixed-width"
  cdkDragBoundary=".cdk-overlay-container"
  cdkDragRootElement=".cdk-overlay-pane"
  cdkDrag
  cdkDragHandle
>
  <div class="row pw-confirmation-box__header">
    <div class="col-auto">
      {{ 'pw.discount.allBillLevelDiscountsApplied' | translate }}
    </div>
    <div class="col pw-text-right">
      <a class="sub-heading" (click)="onClose()">
        <span class="pw-i-24 pw-close-no-border-icon-24"></span>
      </a>
    </div>
  </div>
  <div class="pw-confirmation-box__body">
    <mat-tab-group #tabGroup [selectedIndex]="0" dynamicHeight class="pw-tab">
      <mat-tab class="pw-tab_item">
        <ng-template mat-tab-label>
          <span class="pw-tab__label">{{
            'pw.discount.billLevelDiscount' | translate
          }}</span>
        </ng-template>
        <ag-grid-angular
          class="pw-titan-poss-theme pw-ag-grid-table pw-discount-tab"
          [rowData]="billLevelDiscountRowData"
          [columnDefs]="columnsDef"
          [rowHeight]="rowHeight"
          [animateRows]="animateRows"
          [domLayout]="domLayout"
          [context]="getContext()"
          (gridReady)="gridReady($event)"
          [defaultColDef]="defaultColDef"
        ></ag-grid-angular>

        <div
          class="d-flex justify-content-between pw-mat-table__header align-items-center px-2"
        >
          <p>{{ 'pw.discount.total' | translate }}</p>

          <p>
            {{ totalBillLevelDiscount | currencyFormatter: 'INR' }}
          </p>
        </div>
      </mat-tab>
      <mat-tab class="pw-tab-item">
        <ng-template mat-tab-label>
          <span class="pw-tab__label">
            {{ 'pw.discount.karatOfferDiscounts' | translate }}</span
          >
        </ng-template>
        <ag-grid-angular
          class="pw-titan-poss-theme pw-ag-grid-table pw-discount-tab"
          [rowData]="karatOfferRowData"
          [columnDefs]="columnsDef"
          [rowHeight]="rowHeight"
          [animateRows]="animateRows"
          [domLayout]="domLayout"
          [context]="getContext()"
          (gridReady)="gridReady($event)"
          [defaultColDef]="defaultColDef"
        ></ag-grid-angular>

        <div
          class="d-flex justify-content-between pw-mat-table__header align-items-center px-2"
        >
          <p>{{ 'pw.discount.total' | translate }}</p>

          <p>
            {{ totalKaratageOfferDiscount | currencyFormatter: 'INR' }}
          </p>
        </div>
      </mat-tab>
      <mat-tab class="pw-tab-item">
        <ng-template mat-tab-label>
          <span class="pw-tab__label">
            {{ 'pw.discount.coinOfferDiscounts' | translate }}</span
          >
        </ng-template>
        <ag-grid-angular
          class="pw-titan-poss-theme pw-ag-grid-table pw-discount-tab"
          [rowData]="coinOfferRowData"
          [columnDefs]="columnsDef"
          [rowHeight]="rowHeight"
          [animateRows]="animateRows"
          [domLayout]="domLayout"
          [context]="getContext()"
          (gridReady)="gridReady($event)"
          [defaultColDef]="defaultColDef"
        ></ag-grid-angular>

        <div
          class="d-flex justify-content-between pw-mat-table__header align-items-center px-2"
        >
          <p>{{ 'pw.discount.total' | translate }}</p>

          <p>
            {{ totalKaratageOfferDiscount | currencyFormatter: 'INR' }}
          </p>
        </div>
      </mat-tab>
      <mat-tab class="pw-tab-item">
        <ng-template mat-tab-label>
          <span class="pw-tab__label"> GEP Purity Discounts</span>
        </ng-template>
        <ag-grid-angular
          class="pw-titan-poss-theme pw-ag-grid-table pw-discount-tab"
          [rowData]="gepPurityDiscountRowData"
          [columnDefs]="columnsDef"
          [rowHeight]="rowHeight"
          [animateRows]="animateRows"
          [domLayout]="domLayout"
          [context]="getContext()"
          (gridReady)="gridReady($event)"
          [defaultColDef]="defaultColDef"
        ></ag-grid-angular>

        <div
          class="d-flex justify-content-between pw-mat-table__header align-items-center px-2"
        >
          <p>
            Total
            <!-- {{ getTotalCashCollected() | currencyFormatter: currencyCode }} -->
          </p>

          <p>
            <!-- {{ 'pw.paymentDetails.totalAomuntCollectedLabel' | translate }} : -->
            {{ totalGepPurityDiscount | currencyFormatter: 'INR' }}

            <!-- <span class="pw-error-color pw-font-weight-bold">
          {{ totalPaidAmount | currencyFormatter: currencyCode }}333
        </span> -->
          </p>
        </div>
      </mat-tab>
      <mat-tab class="pw-tab-item">
        <ng-template mat-tab-label>
          <span class="pw-tab__label">
            {{ 'pw.discount.automatedBillLevelDiscounts' | translate }}
          </span>
        </ng-template>
        <ag-grid-angular
          class="pw-titan-poss-theme pw-ag-grid-table pw-discount-tab"
          [rowData]="ghsDvDiscountRowData"
          [columnDefs]="columnsDef"
          [rowHeight]="rowHeight"
          [animateRows]="animateRows"
          [domLayout]="domLayout"
          [context]="getContext()"
          (gridReady)="gridReady($event)"
          [defaultColDef]="defaultColDef"
        ></ag-grid-angular>
        <div
          class="d-flex justify-content-between pw-mat-table__header align-items-center px-2"
        >
          <p>{{ 'pw.discount.total' | translate }}</p>

          <p>
            {{ totalSytemDiscountDiscount | currencyFormatter: 'INR' }}
          </p>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>

<div class="pw-confirmation-box__footer mt-2 row">
  <div class="pw-discount-summary col">
    <div class="row mb-1">
      <div class="col-7">{{ 'pw.discount.billLevelDiscount' | translate }}</div>

      <div class="col-5 pw-text-right">
        {{ totalBillLevelDiscount | currency: 'INR' }}
      </div>
    </div>
    <div class="row mb-1">
      <div class="col-7">
        {{ 'pw.discount.karatOfferDiscounts' | translate }}
      </div>

      <div class="col-5 pw-text-right">
        {{ totalKaratageOfferDiscount | currency: 'INR' }}
      </div>
    </div>

    <div class="row mb-1">
      <div class="col-7">
        {{ 'pw.discount.coinOfferDiscounts' | translate }}
      </div>

      <div class="col-5 pw-text-right">
        {{ totalCoinOfferDiscount | currency: 'INR' }}
      </div>
    </div>

    <div class="row mb-1">
      <div class="col-7">GEP Purity Discount</div>

      <div class="col-5 pw-text-right">
        {{ totalGepPurityDiscount | currency: 'INR' }}
      </div>
    </div>

    <!-- <div class="row mb-1">
      <div class="col-7">Exchange offer Discount</div>

      <div class="col-5 pw-text-right">exhcnage</div>
    </div> -->

    <!-- <div class="row mb-1">
      <div class="col-7">Coin offer Discount</div>

      <div class="col-5 pw-text-right">
       {{
          totalDiscountData.totalCoinOfferDiscount
            | currency: discountDetails?.currencyCode
        }}

      </div>
    </div> -->

    <div class="row mb-1">
      <div class="col-7">
        {{ 'pw.discount.automatedBillLevelDiscounts' | translate }}
      </div>

      <div class="col-5 pw-text-right">
        {{ totalSytemDiscountDiscount | currency: 'INR' }}
      </div>
    </div>

    <div class="row pw-font-weight-bold">
      <div class="col-7">Total Discount</div>

      <div class="col-5 pw-text-right">
        {{ totalDiscountValue | currency: 'INR' }}
      </div>
    </div>
  </div>
</div>
