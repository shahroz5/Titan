<div *ngIf="errorData" class="pw-error-container">
  <div class="pw-error-container__content">
    {{ 'pw.productGrid.productDataDuplicationMsg' | translate }}
  </div>
</div>
<div
  *ngIf="
    currentColumnName &&
    parentForm.value.length !== 0 &&
    parentForm.controls.length !== 0
  "
  class="pw-info-container"
>
  <div
    class="pw-info-container__content"
    *ngIf="currentColumnName === productGridFieldsEnumRef.SELECT"
  >
    <span class="pw-fourth-color">{{
      'pw.productGrid.selectUnselectLabel' | translate
    }}</span>
  </div>
  <ng-container *ngIf="currentRowIndex !== -1">
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.ITEMCODE"
    >
      <span class="pw-fourth-color">
        {{ 'pw.productGrid.variantCodeLabel' | translate }}</span
      >
      {{ parentForm.controls[currentRowIndex].value.itemCode }}
      <span
        *ngIf="parentForm.controls[currentRowIndex].value.binCode"
        class="pw-fourth-color"
      >
        {{ 'pw.productGrid.binCodeLabel' | translate }}
      </span>
      {{ parentForm.controls[currentRowIndex].value.binCode }}
      <span
        *ngIf="parentForm.controls[currentRowIndex].value.description"
        class="pw-fourth-color"
      >
        {{ 'pw.productGrid.descriptionLabel' | translate }}
      </span>
      {{
        pgDescription !== null &&
        parentForm.controls[currentRowIndex].value.productType !==
          productTypesEnumRef.FOC
          ? pgDescription[
              parentForm.controls[currentRowIndex].value.productGroup
            ]
          : parentForm.controls[currentRowIndex].value.description
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.SELECTEDLOTNUMBER"
    >
      <span class="pw-fourth-color">
        {{ 'pw.productGrid.lotNumberLabel' | translate }}</span
      >
      {{
        lotNumber
          ? lotNumber
          : parentForm.controls[currentRowIndex].value.selectedLotNumber
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.UNITWEIGHT"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.unitWeightLabel' | translate
      }}</span>
      {{
        parentForm.controls[currentRowIndex].value.unitWeight | weightFormatter
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.ACTUALWEIGHT"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.actualWeightLabel' | translate
      }}</span>
      {{
        parentForm.controls[currentRowIndex].value.actualWeightGroup
          .actualWeight | weightFormatter
      }}
      <span
        class="pw-fourth-color"
        *ngIf="
          parentForm.controls[currentRowIndex].value.actualWeightGroup.reason
        "
      >
        {{ 'pw.productGrid.reasonLabel' | translate }}
      </span>
      {{ parentForm.controls[currentRowIndex].value.actualWeightGroup.reason }}
      <span
        *ngIf="
          parentForm.controls[currentRowIndex].value.actualWeightGroup.remarks
        "
        class="pw-fourth-color"
      >
        {{ 'pw.productGrid.remarksLabel' | translate }}
      </span>
      {{ parentForm.controls[currentRowIndex].value.actualWeightGroup.remarks }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.SELECTEDRSO"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.RSONameLabel' | translate
      }}</span>
      {{ parentForm.controls[currentRowIndex].value.selectedRso !== selectRSO  ?
        getRsoNameFromCode(
          parentForm.controls[currentRowIndex].value.selectedRso
        )  + ' - ' + parentForm.controls[currentRowIndex].value.selectedRso
      : 'NA' }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.PRICEPERUNIT"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.pricePerUnitLabel' | translate
      }}</span>
      {{
        parentForm.controls[currentRowIndex].value.pricePerUnit
          | currencyFormatter
      }}
    </div>
    <!-- <div
    class="pw-info-container__content"
    *ngIf="
      currentColumnName === productGridFieldsEnumRef.DISCOUNT &&
      (sampleDiscountData.length !== 0) &&
      sampleDiscountData.length !== 1
    "
  >
    <span class="pw-fourth-color">{{
      'pw.productGrid.discountLabel' | translate
    }}</span>
    <span>
      {{ sampleOccasion }}
    </span>
  </div> -->
    <div
      class="pw-info-container__content"
      *ngIf="
        currentColumnName === productGridFieldsEnumRef.DISCOUNT &&
        sampleDiscountData.length !== 0
      "
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.discountLabel' | translate
      }}</span>
      <span *ngFor="let data of sampleDiscountData; let i = index">
        <span *ngIf="i > 0 && i < sampleDiscountData.length"> | </span>
        <span *ngIf="data.isSingle === true"> {{ data.occasion }}</span>
        <span *ngIf="data.isSingle === false">
          {{ data.occasion }} - {{ data.component | titlecase }} -
          {{
            data.isPercent ? (data.percent | percentageFormatter) : data.value
          }}
        </span>
      </span>
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="
        currentColumnName === productGridFieldsEnumRef.DISCOUNT &&
        sampleDiscountData.length === 0
      "
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.selectDiscountLabel' | translate
      }}</span>
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.FINALPRICE"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.finalPriceLabel' | translate
      }}</span>
      {{
        parentForm.controls[currentRowIndex].value.finalPrice
          | currencyFormatter
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.ISHM"
    >
      <span class="pw-fourth-color"
        >{{ 'pw.productGrid.isHallmarkingHeaderText' | translate }} :
      </span>
      {{
        parentForm.controls[currentRowIndex].value.isHallmarked
          ? parentForm.controls[currentRowIndex].value.isHallmarked
          : false
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.HMQUANTITY"
    >
      <span class="pw-fourth-color"
        >{{ 'pw.productGrid.isHMQuantityLabel' | translate }} :
      </span>
      {{ parentForm.controls[currentRowIndex].value.hmQuantity }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.FOCFORHM"
    >
      <span class="pw-fourth-color"
        >{{ 'pw.productGrid.isFOCforHallmarkingHeaderText' | translate }} :
      </span>
      {{
        parentForm.controls[currentRowIndex].value.isFOCForHallmarkingCharges
          ? parentForm.controls[currentRowIndex].value
              .isFOCForHallmarkingCharges
          : false
      }}
    </div>
    <div
      class="pw-info-container__content"
      *ngIf="currentColumnName === productGridFieldsEnumRef.DELETE"
    >
      <span class="pw-fourth-color">{{
        'pw.productGrid.deleteLabel' | translate
      }}</span>
    </div>
  </ng-container>
</div>
<ag-grid-angular
  class="pw-titan-poss-theme pw-ag-grid-table"
  [columnDefs]="columnDefs"
  [rowSelection]="rowSelection"
  [frameworkComponents]="getComponents()"
  [context]="getContext()"
  [animateRows]="animateRows"
  [domLayout]="domLayout"
  [rowHeight]="rowHeight"
  [getRowNodeId]="getRowNodeId"
  [defaultColDef]="defaultColumnDefs"
  [suppressRowClickSelection]="suppressRowClickSelection"
  [tooltipShowDelay]="tooltipShowDelay"
  (gridReady)="gridReady($event)"
  (cellValueChanged)="onCellValueChanged($event)"
  (cellKeyDown)="onCellKeyPress($event)"
  (cellClicked)="onCellClicked($event)"
  (cellFocused)="onCellFocused($event)"
  (gridSizeChanged)="onGridSizeChanged()"
  (selectionChanged)="onSelectionChanged($event)"
></ag-grid-angular>
