<div *ngIf="!isCorpUser" class="pw-tab">
  <ul class="pw-tab__list">
    <li class="pw-tab__back-item">
      <a (click)="back()">
        <span
          class="pw-i-24 pw-back-arrow-icon-24 pw-back-arrow-position-middle"
        ></span>{{ 'pw.cmRequestApproval.backButtonTxt' | translate }}
      </a>
    </li>
  </ul>
</div>

<poss-web-customer-view
  *ngIf="isCorpUser && (cmCustomerDetails$ | async)"
  [cmCustomerDetails$]="cmCustomerDetails$"
></poss-web-customer-view>
<poss-web-cm-header-view
  *ngIf="cmHeaderDetails$ | async"
  [cmHeaderDetails$]="cmHeaderDetails$"
  [cmRequestDetails$]="cmRequestDetails$"
  [isCorpUser]="isCorpUser"
  [imageUrl]="imageUrl"
></poss-web-cm-header-view>
<poss-web-product-view
  *ngIf="productDetails$ | async"
  [productDetails$]="productDetails$"
  (loadImageUrl)="loadImageUrl($event)"
  [imageUrlData$]="imageUrlData$"
  [pgDesc$]="pgDesc$"
  [locationCode]="isCorpUser ? (cmRequestDetails$ | async)?.locationCode : null"
  [cashMemoData]="selectedItemsDetails"
  [rsoNames] = "rsoDetails$ | async"
></poss-web-product-view>
<!-- <poss-web-discount-view></poss-web-discount-view> -->
<ng-content></ng-content>
<poss-web-summary-view
  *ngIf="isCorpUser && (cmRequestDetails$ | async)"
  [cmRequestDetails$]="cmRequestDetails$"
  (isApprove)="isApprove($event)"
></poss-web-summary-view>
<div *ngIf="customerId && cashMemoId && !isCorpUser" class="pw-flat-btn-container">
  <button class="pw-flat-btn-container__button">
    <div
      class="pw-flat-btn-container__vertical-label"
      matTooltip="VIEW TCS"
      matTooltipPosition="before"
      (click)="viewTcs()"
    >
      View TCS
    </div>
  </button>
</div>

<poss-web-loader
  *ngIf="
    (isLoading$ | async) ||
    (isLoadingOrder$ | async) ||
    (printingService.getPrinterIsLoading() | async) ||
    (isCMLoading$ | async) ||
    (isCommonLoading$ | async)
  "
>
</poss-web-loader>
<ng-template #confirmSuccessNotificationTemplate>
  <div class="pw-text-center">
    <h3 class="pw-success-color">
      {{ 'pw.manualCashMemo.regulariseBillMsg' | translate }}
    </h3>
    <h5 class="pw-success-color pt-2">
      {{ 'pw.manualCashMemo.cmNumber' | translate }} {{ docNo }}
    </h5>
    <h4 *ngIf="newlyGeneratedCn.length > 0">
      Generated Partial CN Amount of :
      {{ newlyGeneratedCn[0].otherDetails.data.remainingAmount }} ,&nbsp;
      {{ 'pw.regularCashMemo.newCnLabel' | translate }}:
      {{ newlyGeneratedCn[0].otherDetails.data.newCNNumber }}
    </h4>
    <h4 *ngIf="refundAmountAsCash !== 0">
      {{ 'pw.manualCashMemo.refundAmountMsg' | translate }} :
      {{ refundAmountAsCash | currencyFormatter: currencyCode }}
    </h4>
    <h4 class="pw-success-color pw-pointer" (click)="print()">
      <span class="pw-i-16 pw-download-icon-16 pw-print"></span>Print
    </h4>
  </div>
</ng-template>
