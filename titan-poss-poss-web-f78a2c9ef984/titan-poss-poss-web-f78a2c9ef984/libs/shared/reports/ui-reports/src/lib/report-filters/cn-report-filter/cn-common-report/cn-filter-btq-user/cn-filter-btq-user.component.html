<div [formGroup]="filterForm">
  <div class="row no-gutters">
    <mat-form-field class="col-3 px-2">
      <mat-label>{{ 'pw.reports.dateRangeLabel' | translate }}</mat-label>
      <mat-date-range-input
        [rangePicker]="picker"
        [max]="toMaxDate"
      >
        <input
          matStartDate
          formControlName="fromDate"
          placeholder="'pw.reports.fromDateLabel' | translate"
          (dateChange)="getMaxDate()"
          required
        />
        <input
          matEndDate
          formControlName="toDate"
          placeholder="'pw.reports.toDateLabel' | translate"
          required
        />
      </mat-date-range-input>
      <mat-datepicker-toggle matSuffix [for]="picker">
        <mat-icon matDatepickerToggleIcon>
          <span class="pw-i-12 pw-calender-icon-12"></span>
        </mat-icon>
      </mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
      <mat-error
        *ngIf="
        filterForm.get('fromDate').errors &&
        filterForm.get('fromDate').errors
            .errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="
          filterForm.get('fromDate').errors
              .errorArray
          "
        ></poss-web-error-info-tooltip>
      </mat-error>
      <mat-error
        *ngIf="
        filterForm.get('toDate').errors &&
          filterForm.get('toDate').errors
            .errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="
          filterForm.get('toDate').errors
              .errorArray
          "
        ></poss-web-error-info-tooltip>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="col-3 px-2">
      <mat-label> {{ 'pw.reports.btqCodeLabel' | translate }} </mat-label>
      <input matInput formControlName="btqCode" required readonly />
      <mat-error
        *ngIf="
          filterForm.get('btqCode').errors &&
          filterForm.get('btqCode').errors.errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="filterForm.get('btqCode').errors.errorArray"
        ></poss-web-error-info-tooltip>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="col-3 px-2">
      <mat-label> {{ 'pw.reports.cnType' | translate }} </mat-label>

      <mat-select
        formControlName="cnType"
        disableOptionCentering
        multiple
        required
      >
        <mat-option
          *ngFor="let option of filterOptions?.cnType"
          [value]="option.id"
          >{{ option.description }}</mat-option
        >
      </mat-select>
      <mat-error
        *ngIf="
          filterForm.get('cnType').errors &&
          filterForm.get('cnType').errors.errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="filterForm.get('cnType').errors.errorArray"
        ></poss-web-error-info-tooltip>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="col-3 px-2">
      <mat-label> {{ 'pw.reports.cnStatus' | translate }} </mat-label>

      <mat-select
        formControlName="cnStatus"
        disableOptionCentering
        multiple
        required
      >
        <mat-option
          *ngFor="let option of filterOptions?.cnStatus"
          [value]="option.id"
          >{{ option.description }}</mat-option
        >
      </mat-select>
      <mat-error
        *ngIf="
          filterForm.get('cnStatus').errors &&
          filterForm.get('cnStatus').errors.errorArray
        "
      >
        <poss-web-error-info-tooltip
          [errorMessage]="filterForm.get('cnStatus').errors.errorArray"
        ></poss-web-error-info-tooltip>
      </mat-error>
    </mat-form-field>

    <div class="col-12 row px-2 no-gutters">
      <div
        class="ml-auto col-9 align-self-center row no-gutters d-flex justify-content-end"
      >
        <button
          mat-button
          class="pw-btn pw-primary-btn mr-3"
          (click)="clearFilter()"
        >
          {{ 'pw.reports.clearButton' | translate }}
        </button>

        <button
          mat-button
          class="pw-btn pw-accent-btn mr-3"
          (click)="fieldSettings()"
        >
          {{ 'pw.reports.fieldSettings' | translate }}
        </button>

        <button
          mat-button
          class="pw-btn pw-accent-btn mr-3"
          (click)="saveSearch()"
        >
          {{ 'pw.reports.saveSearch' | translate }}
        </button>
        <button
          mat-button
          class="pw-btn pw-accent-btn"
          (click)="generateReport()"
        >
          {{ 'pw.reports.generateReportButton' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>
