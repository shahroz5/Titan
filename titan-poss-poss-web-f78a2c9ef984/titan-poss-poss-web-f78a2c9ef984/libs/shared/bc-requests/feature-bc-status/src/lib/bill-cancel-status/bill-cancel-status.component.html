<div class="row align-items-center">
  <mat-form-field class="pw-search-bar col-auto ml-auto" floatLabel="never">
    <input
      #searchBox
      type="number"
      [min]="0"
      matInput
      class="pw-input-box"
      placeholder="
        Search by Doc Number
      "
      [formControl]="searchFormControl"
    />
    <mat-icon matSuffix>
      <span
        *ngIf="!searchFormControl.value"
        class="pw-i-16 pw-search-icon-16"
      ></span
    ></mat-icon>
    <mat-icon matSuffix (click)="clearSearch()">
      <span
        *ngIf="searchFormControl.value"
        class="pw-i-10 pw-close-icon-16"
      ></span
    ></mat-icon>
  </mat-form-field>
  <mat-form-field class="pw-single-bordered-input col-lg-2 col-3" required>
    <mat-label>Request Status</mat-label>
    <mat-select
      disableOptionCentering
      placeholder="Request Status"
      [formControl]="statuses"
      (selectionChange)="onSelectionChange($event)"
    >
      <mat-option *ngFor="let status of statusesList" [value]="status">{{
        getStatus(status)
      }}</mat-option>
    </mat-select>
    <mat-error *ngIf="statuses.errors && statuses.errors.errorArray">
      <poss-web-error-info-tooltip
        [errorMessage]="statuses.errors.errorArray"
      ></poss-web-error-info-tooltip>
    </mat-error>
  </mat-form-field>
</div>

<poss-web-card-list
  *ngIf="billCancelList"
  [count]="count"
  [dataList]="billCancelList"
  [pageSize]="pageSize"
  (loadMore)="loadRequests($event)"
  (selected)="onSelected($event)"
>
  <ng-template let-item="data">
    <poss-web-card-title>
      <div class="row">
        <div class="col-auto">
          <h4>Doc No. {{ item.docNo }}</h4>
          <h4>CM No. {{ item?.headerData?.data?.invoiceNo }}</h4>
        </div>
      </div>

      <div class="col-auto ml-auto"></div>
    </poss-web-card-title>

    <poss-web-card-content>
      <div class="mt-1">
        <p>Cust. Name : {{ item.headerData.data.customerName }}</p>
      </div>
      <div class="mt-1">
        <p>
          {{ item.headerData.data.totalQuantity }} products |
          {{ item.headerData.data.totalWeight | weightFormatter }} gms
        </p>
        <p>
          {{ item.headerData.data.totalValue | currencyFormatter }}
        </p>
      </div>
      <div class="mt-1">
        <p>Request Date : {{ item?.requestedDate | dateFormatter }}</p>
      </div>
      <div class="mt-1">
        <p>Requested By : {{ item.requestedBy }}</p>
      </div>
      <div class="mt-1">
        <p
          [ngClass]="
            getStatusColor(item.approvalStatus ? item.approvalStatus : '')
          "
        >
          {{ item.approvalStatus }}
        </p>
      </div>
    </poss-web-card-content>
  </ng-template>
</poss-web-card-list>
<h3
  class="pw-text-center m-5"
  *ngIf="count === 0 && (isLoading$ | async) === false"
>
  {{ noDataFoundMessage }}
</h3>

<poss-web-loader *ngIf="(isLoading$ | async) === true"> </poss-web-loader>
