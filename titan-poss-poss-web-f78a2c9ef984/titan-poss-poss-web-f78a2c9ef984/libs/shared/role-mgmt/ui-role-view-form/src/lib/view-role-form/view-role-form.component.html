<form [formGroup]="roleForm">
  <div class="pw-confirmation-box">
    <div
      class="row pw-confirmation-box__header pw-cursor-grab"
      cdkDragBoundary=".cdk-overlay-container"
      cdkDragRootElement=".cdk-overlay-pane"
      cdkDrag
      cdkDragHandle
    >
      <div class="col-auto">
        {{ 'pw.rolemanagementform.viewRoleTitle' | translate }}
      </div>
      <div class="col pw-text-right">
        <button
          mat-icon-button
          mat-dialog-close="close"
          class="pw-confirmation-box__icon-btn"
        >
          <mat-icon class="pw-sub-heading">
            <span class="pw-i-24 pw-close-no-border-icon-24"></span>
          </mat-icon>
        </button>
      </div>
    </div>

    <div mat-dialog-content class="pw-confirmation-box__body">
      <div>
        <p class="pw-fourth-color">
          {{ 'pw.rolemanagementform.roleforlabeltext' | translate }}
        </p>
        <mat-selection-list
        #selected
        >
          <ng-container *ngFor="let type of data.roleTypes; let i = index">
            <mat-list-option
              #listitem
              checkboxPosition="before"
              [selected]="accessType[i] === '1'"
              [disabled]="true"
            >
              {{ type.value }}
            </mat-list-option>
          </ng-container>
        </mat-selection-list>
      </div>
      <div class="pw-confirmation-box__margin-top-5 pw-padding-bottom">
        <p class="pw-fourth-color">
          {{ 'pw.rolemanagementform.rolecodePlaceholderText' | translate }}*
        </p>
        <div>
          {{ roleForm.controls['roleCode'].value }}
        </div>
      </div>

      <div class="pw-confirmation-box__margin-top-5">
        <div class="row">
          <mat-form-field class="col-12">
            <input
              possWebInput
              matInput
              required
              maxlength="100"
              placeholder="{{
                'pw.rolemanagementform.rolenamePlaceholderText' | translate
              }}"
              formControlName="roleName"
            />

            <mat-error
              *ngIf="
                roleForm.get('roleName').errors &&
                roleForm.get('roleName').errors.errorArray
              "
            >
              <poss-web-error-info-tooltip
                [errorMessage]="roleForm.get('roleName').errors.errorArray"
              ></poss-web-error-info-tooltip>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="" *ngIf="data.roleDetails.locationFormats.size !== 0">
        <p class="pw-fourth-color">
          {{ 'pw.rolemanagementform.storeformatlabeltext' | translate }}
        </p>
        <div
          class="row align-items-center"
          *ngFor="let format of data.locationFormats | keyvalue"
        >
          <div class="col-6">{{ format.value }} :</div>
          <mat-form-field
            class="col-5 pw-single-bordered-input pw-form-field-padding-bottom-0 pw-form-field-border-top-0"
          >
            <input
              possWebInput
              matInput
              type="number"
              min="0"
              max="999"
              formControlName="{{ format.key }}"
              (keydown)="
                $event.keyCode === 8 ||
                $event.keyCode === 9 ||
                $event.keyCode === 46 ||
                $event.keyCode === 38 ||
                $event.keyCode === 40
                  ? true
                  : regExp.test($event.key)
              "
            />
          </mat-form-field>
        </div>
      </div>

      <div class="pw-confirmation-box__margin-top-5">
        <div class="row">
          <mat-form-field class="col-12">
            <textarea
              possWebTextarea
              matInput
              required
              maxlength="250"
              placeholder="{{
                'pw.rolemanagementform.descriptionPlaceholderText' | translate
              }}"
              formControlName="description"
            ></textarea>

            <mat-error
              *ngIf="
                roleForm.get('description').errors &&
                roleForm.get('description').errors.errorArray
              "
            >
              <poss-web-error-info-tooltip
                [errorMessage]="roleForm.get('description').errors.errorArray"
              ></poss-web-error-info-tooltip>
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div
        class=""
        *ngIf="
          data &&
          data.roleDetails.corpAccess &&
          data.roleDetails.locationFormats.size !== 0
        "
      >
        <mat-checkbox checked="true" disabled="true" class="pw-checkbox__input">
          <span class="pw-checkbox__label">{{
            'pw.rolemanagementform.corpAccessCheckboxText' | translate
          }}</span></mat-checkbox
        >
      </div>

      <div *ngIf="data.roleDetails.corpAccess && accessType[1] === '1'">
        <div>
          <mat-checkbox [disabled]="true" [checked]='data.roleDetails.isLocationMappingRequired'></mat-checkbox>
        {{ 'pw.rolemanagementform.locationMappingAllowedLabel' | translate }}
        </div>
        <div>
          <p>{{ 'pw.rolemanagementform.locationMappingFootNoteLabel' | translate }}</p>
        </div>
      </div>
    </div>
  </div>
</form>
