<div
  class="col-auto pw-top-heading-container__right-content"
  *possWebPermission="loadPermission(USER_LIST_ADDUSER_BTN)"
>
  <button class="pw-btn pw-accent-btn" [routerLink]="['create']">
    {{ 'pw.usermanagementlist.addnewuserButtonText' | translate }}
  </button>
</div>

<ng-container *possWebPermission="loadPermission(USER_LIST_SEARCH_BOX)">
  <form class="pw-search-container" [formGroup]="searchForm" autocomplete="off">
    <div class="row align-items-baseline">
      <poss-web-select-dropdown
        class="col-lg-2 col-4 pw-form-field-padding-bottom-0 pw-customer-position"
        placeholder="{{ 'pw.usermanagementlist.searchByLabel' | translate }}"
        [control]="searchForm.get('searchBy')"
        [options]="dropdownSearchOptions"
        [required]="true"
      >
      </poss-web-select-dropdown>

      <mat-form-field class="col-lg-10 col-8 pw-search-bar" floatLabel="never">
        <input
          #searchBox
          matInput
          possWebInput
          [placeholder]="searchPlaceHolder"
          [formControl]="searchForm.get('searchFormControl')"
          possWebMaxLengthValidator
          name="searchForm.get('searchFormControl')"
        />
        <mat-icon matSuffix *ngIf="!searchForm.get('searchFormControl')?.value">
          <span class="pw-i-16 pw-search-icon-16"></span>
        </mat-icon>
        <mat-icon
          matSuffix
          (click)="clearSearch()"
          *ngIf="searchForm.get('searchFormControl')?.value"
        >
          <span class="pw-i-10 pw-close-icon-16"></span>
        </mat-icon>
      </mat-form-field>
    </div>
  </form>
</ng-container>

<span *possWebPermission="loadPermission(USER_LIST_DIV)">
  <div class="row pw-list-header">
    <div class="col-auto">
      <h5 class="pw-list-header__left-content">
        {{
          'pw.usermanagementlist.userslistTabText'
            | translate: { count: userListSize }
        }}
      </h5>
    </div>
    <div class="col-auto pw-list-header__right-content">
      <button mat-button [matMenuTriggerFor]="filterby">
        <span
          class="pw-i-24"
          [ngClass]="
            appliedFilter ? 'pw-filter-icon-color-24' : 'pw-filter-icon-24'
          "
        ></span>
        {{ 'pw.usermanagementlist.filterButtonText' | translate }}
      </button>

      <mat-menu #filterby="matMenu">
        <button mat-menu-item (click)="filter.emit()">
          {{ 'pw.usermanagementlist.filterrolesOptionText' | translate }}
        </button>
        <button
          mat-menu-item
          *ngIf="!isBTQUser"
          (click)="locationSelection.emit()"
        >
          {{ 'pw.usermanagementlist.filterlocationOptionText' | translate }}
        </button>
      </mat-menu>
    </div>
  </div>

  <div *ngIf="usersList.length !== 0">
    <poss-web-user-list-item
      *ngFor="let user of usersList"
      [user]="user"
      [permissions$]="permissions$"
      (toggleUserLock)="toggleUserLock.emit($event)"
    ></poss-web-user-list-item>
  </div>

  <div
    class="pw-text-center pw-fourth-color"
    *ngIf="isSearch && userListSize == 0"
  >
    <div class="pw-font-24">
      <span class="pw-font-weight-bold">
        {{ noDataFoundMessage }}
      </span>
    </div>
  </div>

  <mat-paginator
    class="pw-paginator"
    *ngIf="userListSize > minPageSize && usersList.length > 0"
    [length]="userListSize"
    [pageSize]="pageEvent.pageSize"
    [pageIndex]="pageEvent.pageIndex"
    showFirstLastButtons
    [pageSizeOptions]="pageSizeOptions"
    (page)="paginateUsersList.emit($event)"
  >
  </mat-paginator>
</span>
