<div class="row">
  <div class="col-8">
    <div class="row">
      <div class="errorMessage" *ngFor="let error of form.errors | objIterator">
        <poss-web-error-message [formId]="formId" [error]="error">
        </poss-web-error-message>
      </div>

      <div
        *ngFor="let field of fields | nonsubformfilter"
        class="{{ field.classNames.join(' ') }}"
      >
        <!-- for mainform -->
        <poss-web-dynamic-input
          [style]="style"
          [field]="field"
          [form]="form"
          (selectChange)="selectChange.emit($event)"
          (selectRefreshClick)="selectRefreshClickEvent.emit($event)"
          (radioChange)="radioChange.emit($event)"
          (checkboxChange)="checkBoxChange.emit($event)"
        >
        </poss-web-dynamic-input>
      </div>
      <div
        *ngFor="let field of fields | subformfilter"
        class="{{ field.classNames.join(' ') }}"
      >
        <!-- for subform -->
        <poss-web-dynamic-input
          [style]="style"
          [field]="field"
          [form]="form"
          (selectChange)="selectChange.emit($event)"
          (selectRefreshClick)="selectRefreshClickEvent.emit($event)"
          (radioChange)="radioChange.emit($event)"
          (checkboxChange)="checkBoxChange.emit($event)"
        >
        </poss-web-dynamic-input>
      </div>
    </div>
  </div>
  <div class="col-4 align-self-end">
    <div class="row" *ngIf="!disabled && !disableSubmit">
      <div class="col-auto ml-auto">
        <div class="row justify-content-end">
          <ng-container *ngIf="buttonNames">
            <button
              type="submit"
              class="pw-btn pw-accent-btn col-auto mr-3"
              (click)="onAddForm.emit(true)"
              [disabled]="
                (!form.valid && !enableSubmitOnInvalid) || !form.dirty
              "
            >
              {{ buttonNames[1] | translate }}
            </button>
          </ng-container>
          <ng-container *ngIf="commandButtons">
            <ng-container *ngFor="let btn of commandButtons; let i = index">
              <div *ngIf="btn.permission; else elseNoPermission">
                <button
                  *possWebPermission="btn?.permission"
                  #commandButtonPanel
                  type="{{ btn.type }}"
                  class="{{ btn.cssClassName }} col-auto mr-3 "
                  (click)="emitButton.emit({ btn: btn, i: i })"
                  [disabled]="
                    btn.type != ButtonType.BUTTON
                      ? (!form.valid && !enableSubmitOnInvalid) || !form.dirty
                      : 'false'
                  "
                >
                  {{ btn.name | translate }}
                </button>
              </div>
              <ng-template #elseNoPermission>
                <button
                  #commandButtonPanel
                  type="{{ btn.type }}"
                  class="{{ btn.cssClassName }} col-auto mr-3 "
                  (click)="emitButton.emit({ btn: btn, i: i })"
                  [disabled]="
                    btn.type != ButtonType.BUTTON
                      ? (!form.valid && !enableSubmitOnInvalid) || !form.dirty
                      : 'false'
                  "
                >
                  {{ btn.name | translate }}
                </button>
              </ng-template>
            </ng-container>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
