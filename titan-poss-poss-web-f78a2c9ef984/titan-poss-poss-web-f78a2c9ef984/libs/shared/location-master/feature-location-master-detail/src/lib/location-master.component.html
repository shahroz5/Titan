<poss-web-loader *ngIf="isLoading"></poss-web-loader>
<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-lg-10 m-auto">
      <div class="pw-top-heading-container mb-3">
        <div class="row pw-top-heading-container__item">
          <div class="col-auto pr-0">
            <a (click)="back()">
              <span class="pw-i-24 pw-back-arrow-icon-24"></span>
            </a>
          </div>
          <div class="col-auto pl-0">
            <div class="pw-top-heading-container__main-head">
              <span class="pw-i-36 pw-location-icon-36"></span>
              <div>
                <h2>{{ 'pw.locationMaster.mainLocationlabel' | translate }}</h2>
                <h5 class="pw-top-heading-container__sub-heading">
                  {{ 'pw.locationMaster.mainSetuplabel' | translate }}
                </h5>
              </div>
            </div>
          </div>
        </div>

        <!--        <div class="row pw-sub-header">
          <div class="col-auto">
            <div class="pw-sub-header__heading">
              {{ 'pw.locationMaster.mainLocationlabel' | translate }}
            </div>
          </div>
        </div> -->
      </div>
      <div class="row mb-2">
        <div class="col-auto ml-auto">
          <span class="pw-fourth-disabled-box"></span> -
          {{ 'pw.locationMaster.indicatesNotSavedSection' | translate }}
        </div>
        <div class="col-auto">
          <span class="pw-fourth-box"></span> -
          {{ 'pw.locationMaster.indicatesSavedSection' | translate }}
        </div>
      </div>
      <!-- <div class="pw-text-right d-flex align-items-center mb-2">
        <span class="pw-fourth-box"></span> -
        {{ 'pw.locationMaster.indicatesSavedSection' | translate }}
      </div>
      <div class="pw-text-right d-flex align-items-center mb-2">
        <span class="pw-fourth-box"></span> -
        {{ 'pw.locationMaster.indicatesSavedSection' | translate }}
      </div> -->
      <div class="row" *ngIf="!showViewOnly; else viewOnly">
        <div class="col-lg-2 col-3 pw-vertical-tab">
          <mat-selection-list
            class="pw-add-btn"
            [multiple]="false"
            (selectionChange)="locationSectionChange($event)"
          >
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="0"
              [ngClass]="{ 'mat-list-location-saved': !isNew }"
              [selected]="tabIndex === 0"
            >
              {{ 'pw.locationMaster.leftMenuLOCATION' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="1"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.printDetails
              }"
              [selected]="tabIndex === 1"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuPRINT' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="2"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.cnDetails
              }"
              [selected]="tabIndex === 2"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuTRANSACTIONTYPE' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="3"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.ghsDetails
              }"
              [selected]="tabIndex === 3"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuGHS' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="4"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.inventoryDetails
              }"
              [selected]="tabIndex === 4"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuINVENTORY' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="5"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.bankingDetails
              }"
              [selected]="tabIndex === 5"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuBANKING' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="6"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.otpDetails
              }"
              [selected]="tabIndex === 6"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuOTP' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="7"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.customerDetails
              }"
              [selected]="tabIndex === 7"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuCUSTOMER' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="8"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.paymentDetails
              }"
              [selected]="tabIndex === 8"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuPAYMENTS' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="9"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.offerDetails
              }"
              [selected]="tabIndex === 9"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuFOC' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="10"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.digigoldDetails
              }"
              [selected]="tabIndex === 10"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuDIGIGOLD' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="11"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.tcsDetails
              }"
              [selected]="tabIndex === 11"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuTCSDETAILS' | translate }}
            </mat-list-option>
            <mat-list-option
              class="mat-list-location-disabled"
              [value]="12"
              [ngClass]="{
                'mat-list-location-saved': !!locationDetails?.serviceDetails
              }"
              [selected]="tabIndex === 12"
              [disabled]="isNew"
            >
              {{ 'pw.locationMaster.leftMenuServiceDETAILS' | translate }}
            </mat-list-option>
          </mat-selection-list>
          <!-- <ul>
            <li class="mb-4">
              <a
                (click)="updateTab(0)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg': tabIndex === 0 && !isNew,
                  active: tabIndex === 0 && isNew,
                  'pw-cta-button pw-sixth-color': !isNew,
                  'ml-2': isNew
                }"
                >{{ 'pw.locationMaster.leftMenuLOCATION' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuPRINT' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(1)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 1 && !!locationDetails?.printDetails,
                  active: tabIndex === 1 && !locationDetails?.printDetails,
                  'ml-2': !locationDetails?.printDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.printDetails
                }"
                >{{ 'pw.locationMaster.leftMenuPRINT' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuTRANSACTIONTYPE' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(2)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 2 && !!locationDetails?.cnDetails,
                  active: tabIndex === 2 && !locationDetails?.cnDetails,
                  'ml-2': !locationDetails?.cnDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.cnDetails
                }"
                >{{
                  'pw.locationMaster.leftMenuTRANSACTIONTYPE' | translate
                }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuGHS' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(3)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 3 && !!locationDetails?.ghsDetails,
                  active: tabIndex === 3 && !locationDetails?.ghsDetails,
                  'ml-2': !locationDetails?.ghsDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.ghsDetails
                }"
                >{{ 'pw.locationMaster.leftMenuGHS' | translate }}</a
              >
            </li>

            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuINVENTORY' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(4)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 4 && !!locationDetails?.inventoryDetails,
                  active: tabIndex === 4 && !locationDetails?.inventoryDetails,
                  'ml-2': !locationDetails?.inventoryDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.inventoryDetails
                }"
                >{{ 'pw.locationMaster.leftMenuINVENTORY' | translate }}</a
              >
            </li>

            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuBANKING' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(5)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 5 && !!locationDetails?.bankingDetails,
                  active: tabIndex === 5 && !locationDetails?.bankingDetails,
                  'ml-2': !locationDetails?.bankingDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.bankingDetails
                }"
                >{{ 'pw.locationMaster.leftMenuBANKING' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuOTP' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(6)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 6 && !!locationDetails?.otpDetails,
                  active: tabIndex === 6 && !locationDetails?.otpDetails,
                  'ml-2': !locationDetails?.otpDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.otpDetails
                }"
                >{{ 'pw.locationMaster.leftMenuOTP' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuCUSTOMER' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(7)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 7 && !!locationDetails?.customerDetails,
                  active: tabIndex === 7 && !locationDetails?.customerDetails,
                  'ml-2': !locationDetails?.customerDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.customerDetails
                }"
                >{{ 'pw.locationMaster.leftMenuCUSTOMER' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuPAYMENTS' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(8)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 8 && !!locationDetails?.paymentDetails,
                  active: tabIndex === 8 && !locationDetails?.paymentDetails,
                  'ml-2': !locationDetails?.paymentDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.paymentDetails
                }"
                >{{ 'pw.locationMaster.leftMenuPAYMENTS' | translate }}</a
              >
            </li>
            <li class="mb-4">
              <span class="pw-disabled ml-2" *ngIf="isNew">
                {{ 'pw.locationMaster.leftMenuFOC' | translate }}
              </span>
              <a
                *ngIf="!isNew"
                (click)="updateTab(9)"
                class="pw-vertical-tab__item"
                [ngClass]="{
                  'pw-seventh-bg':
                    tabIndex === 9 && !!locationDetails?.offerDetails,
                  active: tabIndex === 9 && !locationDetails?.offerDetails,
                  'ml-2': !locationDetails?.offerDetails,
                  'pw-cta-button pw-sixth-color': !!locationDetails?.offerDetails
                }"
                >{{ 'pw.locationMaster.leftMenuFOC' | translate }}</a
              >
            </li>
          </ul> -->
        </div>
        <div class="col-lg-10 col-9">
          <div [ngSwitch]="tabIndex">
            <div *ngSwitchCase="0">
              <poss-web-location-form
                *ngIf="
                  (locationDetails$ | async) &&
                  (locationStates$ | async) &&
                  (locationTypes$ | async) &&
                  (ownerInfo$ | async) &&
                  (marketCode$ | async) &&
                  (regions$ | async) &&
                  (currencyTypes$ | async) &&
                  (brandName$ | async) &&
                  (countryCode$ | async) &&
                  (locationSize$ | async) &&
                  (locationCFATypes$ | async)
                "
                [locationDetails]="locationDetails$ | async"
                [locationStates]="locationStates$ | async"
                [locationTypes]="locationTypes$ | async"
                [ownerInfo]="ownerInfo$ | async"
                [marketCode]="marketCode$ | async"
                [regions]="regions$ | async"
                [currencyTypes]="currencyTypes$ | async"
                [brandName]="brandName$ | async"
                [subRegion$]="subRegion$"
                [subBrandName$]="subBrandName$"
                [locationTowns$]="locationTowns$"
                [locationSize]="locationSize$ | async"
                [countryCode]="countryCode$ | async"
                [locationCFATypes]="locationCFATypes$ | async"
                (priceGroupMapping)="priceGroupMapping()"
                (formOutput)="formOutput_location($event)"
                (formGroup)="formGroupCreated_location($event)"
                (formGroupCreatedOutput)="locationFormGroupCreated($event)"
              >
              </poss-web-location-form>
            </div>
            <div *ngSwitchCase="1">
              <poss-web-print-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                [invoiceType]="invoiceType$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-print-form>
            </div>
            <div *ngSwitchCase="2">
              <poss-web-transaction-type-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              >
              </poss-web-transaction-type-form>
            </div>
            <div *ngSwitchCase="3">
              <poss-web-ghs-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-ghs-form>
            </div>
            <div *ngSwitchCase="4">
              <poss-web-inventory-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-inventory-form>
            </div>
            <div *ngSwitchCase="5">
              <poss-web-banking-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                [refundMode]="refundMode$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-banking-form>
            </div>
            <div *ngSwitchCase="6">
              <poss-web-otp-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-otp-form>
            </div>
            <div *ngSwitchCase="7">
              <poss-web-customer-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-customer-form>
            </div>
            <div *ngSwitchCase="8">
              <poss-web-payments-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-payments-form>
            </div>
            <div *ngSwitchCase="9">
              <poss-web-foc-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-foc-form>
            </div>
            <div *ngSwitchCase="10">
              <poss-web-digigold-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-digigold-form>
            </div>
            <div *ngSwitchCase="11">
              <poss-web-tcs-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-tcs-form>
            </div>
            <div *ngSwitchCase="12">
              <poss-web-service-poss-form
                *ngIf="locationDetails$ | async"
                [locationDetails]="locationDetails$ | async"
                (formOutput)="formOutput($event)"
              ></poss-web-service-poss-form>
            </div>
          </div>
        </div>
        <!-- <div class="col-auto ml-auto mb-4" *ngIf="locationDetails$ | async">
          <button
            class="pw-btn pw-primary-btn px-5"
            (click)="priceGroupMapping()"
            routerLinkActive="router-link-active"
          >
            {{ 'pw.priceGroupMapping.priceGroupMappingBtn' | translate }}
          </button>
        </div> -->
      </div>
      <ng-template #viewOnly>
        <div>
          <poss-web-location-details-view
            *ngIf="
              (locationDetails$ | async) &&
              (locationStates$ | async) &&
              (locationTowns$ | async)
            "
            [locationDetails]="locationDetails$ | async"
            [locationStates]="locationStates$ | async"
            [locationTowns]="locationTowns$ | async"
          ></poss-web-location-details-view>
        </div>
      </ng-template>
    </div>
  </div>
</div>
