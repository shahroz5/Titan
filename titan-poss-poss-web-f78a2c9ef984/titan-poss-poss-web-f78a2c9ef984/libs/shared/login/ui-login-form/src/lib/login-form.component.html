<form
  [formGroup]="loginForm"
  (ngSubmit)="loginForm.invalid ? '' : loginUser(loginForm)"
  autocomplete="off"
>
  <h5 class="pw-login__header">
    {{ 'pw.login.loginTitleText' | translate }}
  </h5>
  <div class="pw-login__input row mb-4">
    <mat-form-field
      class="pw-input-box col-lg-7 col-sm-7 col-8 pw-form-field-padding-bottom-0"
      floatLabel="never"
    >
      <input
        matInput
        type="text"
        placeholder="{{ 'pw.login.loginIdLable' | translate }}"
        formControlName="name"
        required
      />
      <mat-icon matPrefix>
        <span class="pw-i-16 pw-user-icon-16"></span>
      </mat-icon>

      <!-- <mat-error
        *ngIf="
          loginForm.get('name').errors &&
          loginForm.get('name').errors.errorArray
        "
      >
        <span
          *ngFor="
            let errorMesage of loginForm.get('name').errors.errorArray;
            let i = index
          "
        >
          <span *ngIf="i === 0"> {{ errorMesage }}</span>
          <poss-web-error-info-tooltip
            *ngIf="i > 0"
            [errorMessage]="errorMesage"
          ></poss-web-error-info-tooltip>
        </span>
      </mat-error> -->
    </mat-form-field>
    <p
      *ngIf="
        loginForm.get('name').touched &&
        loginForm.get('name').errors &&
        loginForm.get('name').errors.errorArray
      "
      class="pw-error-margin col-12"
    >
      <poss-web-error-info-tooltip
        [errorMessage]="loginForm.get('name').errors.errorArray"
      ></poss-web-error-info-tooltip>
    </p>
  </div>
  <div class="pw-login__input row">
    <!-- <mat-form-field
      class="pw-input-box col-lg-7 col-sm-7 col-8"
      floatLabel="never"
    >
      <input
        matInput
        type="password"
        placeholder="{{ 'pw.login.passwordLable' | translate }}"
        formControlName="password"
        autocomplete="new-password"
        required
      />
      <mat-icon matPrefix>
        <span class="pw-i-16 pw-lock-icon-16"></span>
      </mat-icon>

      <mat-error
        *ngIf="
          loginForm.get('password').errors &&
          loginForm.get('password').errors.errorArray
        "
      >
        <span
          *ngFor="
            let errorMesage of loginForm.get('password').errors.errorArray;
            let i = index
          "
        >
          <span *ngIf="i === 0"> {{ errorMesage }}</span>
          <poss-web-error-info-tooltip
            *ngIf="i > 0"
            [errorMessage]="errorMesage"
          ></poss-web-error-info-tooltip>
        </span>
      </mat-error>
    </mat-form-field> -->

    <poss-web-password
      class="col-lg-7 col-sm-7 col-8"
      [control]="loginForm.get('password')"
      [passwordCharPattern]="passwordCharPattern"
      placeholder="{{ 'pw.login.passwordLable' | translate }}"
      (submit)="loginForm.invalid ? '' : login.emit(loginForm.value)"
    >
    </poss-web-password>
  </div>
  <div class="pw-login__input row m-auto pr-2">
    <button
      class="col-lg-7 col-sm-7 col-8 pw-btn pw-accent-btn pw-login-btn"
      type="submit"
      [disabled]="!IsValid || (!!loginClicked && !authError)"
    >
      {{ 'pw.login.loginButtonText' | translate }}
    </button>
  </div>
  <div class="p-1">
    <a [routerLink]="['/forgot-password']"
      ><span class="pw-seventh-color">{{
        'pw.login.forgotPasswordLinkText' | translate
      }}</span></a
    >
    <span class="pw-font-weight-bold"> | </span>
    <a [routerLink]="['/activate-user']" class="pw-seventh-color"
      ><span class="pw-seventh-color">{{
        'pw.login.activateAccountLinkText' | translate
      }}</span></a
    >
    <span class="pw-font-weight-bold"> | </span>
    <a class="pw-seventh-color"
      ><span (click)="downloadFile()" class="pw-seventh-color"
        ><span class="pw-i-24 pw-download-icon-24"></span>
        {{ 'pw.login.uaInstaller' | translate }}
      </span>
    </a>
  </div>

  <!-- Below for Titan AD Integration -->
  <ng-container *ngIf="appType === appTypesEnum.EPOSS">
    <div class="row">
      <div
        class="col-lg-7 col-sm-7 col-8 pw-text-center pw-seventh-color pw-font-weight-bold py-2"
      >
        {{ 'pw.login.orLabel' | translate }}
      </div>
    </div>

    <div class="pw-login__input row m-auto pr-2">
      <a
        href="{{ getTitanADLoginUrl() }}"
        class="col-lg-7 col-sm-7 col-8 pw-btn pw-accent-btn pw-login-btn"
        ><div class="row">
          <div class="col-2"><span class="pw-i-32 pw-logo-icon-32"></span></div>
          <div class="col-auto mt-2 pw-white-text">
            {{ 'pw.login.signInWithTitanAD' | translate }}
          </div>
        </div>
      </a>
    </div>
  </ng-container>
  <!-- Titan AD Integration -->
</form>
